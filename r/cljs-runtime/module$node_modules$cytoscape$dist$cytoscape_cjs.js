shadow$provide.module$node_modules$cytoscape$dist$cytoscape_cjs=function(global,require,module,exports){function _interopDefaultLegacy(e){return e&&"object"===typeof e&&"default"in e?e:{"default":e}}function _typeof(obj$jscomp$0){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj$jscomp$0)}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,
protoProps);staticProps&&_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:!1});return Constructor}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function _slicedToArray(arr,i){var JSCompiler_inline_result=Array.isArray(arr)?arr:void 0;if(!JSCompiler_inline_result)if(JSCompiler_inline_result=null==arr?null:"undefined"!==typeof Symbol&&arr[Symbol.iterator]||
arr["@@iterator"],null==JSCompiler_inline_result)JSCompiler_inline_result=void 0;else{var _arr=[],_n=!0,_d=!1,_s;try{for(JSCompiler_inline_result=JSCompiler_inline_result.call(arr);!(_n=(_s=JSCompiler_inline_result.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0;var _e=err}finally{try{if(!_n&&null!=JSCompiler_inline_result["return"])JSCompiler_inline_result["return"]()}finally{if(_d)throw _e;}}JSCompiler_inline_result=_arr}if(!(_s=JSCompiler_inline_result))a:{if(arr){if("string"===
typeof arr){_s=_arrayLikeToArray(arr,i);break a}_s=Object.prototype.toString.call(arr).slice(8,-1);"Object"===_s&&arr.constructor&&(_s=arr.constructor.name);if("Map"===_s||"Set"===_s){_s=Array.from(arr);break a}if("Arguments"===_s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_s)){_s=_arrayLikeToArray(arr,i);break a}}_s=void 0}if(!(arr=_s))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return arr}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function clusteringDistance(method,length,getP,getQ,nodeP,nodeQ){var impl=fn$6(method)?method:distances[method]||distances.euclidean;return 0===length&&fn$6(method)?impl(nodeP,nodeQ):impl(length,getP,getQ,nodeP,nodeQ)}function forEachCompound(eles,fn,includeSelf,recursiveStep){for(var q=[],did=new Set$1,hasCompounds=eles.cy().hasCompoundNodes(),
i=0;i<eles.length;i++){var ele=eles[i];includeSelf?q.push(ele):hasCompounds&&recursiveStep(q,did,ele)}for(;0<q.length;)includeSelf=q.shift(),fn(includeSelf),did.add(includeSelf.id()),hasCompounds&&recursiveStep(q,did,includeSelf);return eles}function addChildren(q,did,ele){if(ele.isParent()){ele=ele._private.children;for(var i=0;i<ele.length;i++){var child=ele[i];did.has(child.id())||q.push(child)}}}function addParent(q,did,ele){ele.isChild()&&(ele=ele._private.parent,did.has(ele.id())||q.push(ele))}
function addParentAndChildren(q,did,ele){addParent(q,did,ele);addChildren(q,did,ele)}function defineDegreeFunction(callback){return function(includeLoops){void 0===includeLoops&&(includeLoops=!0);if(0!==this.length&&this.isNode()&&!this.removed()){for(var degree=0,node=this[0],connectedEdges=node._private.edges,i=0;i<connectedEdges.length;i++){var edge=connectedEdges[i];if(includeLoops||!edge.isLoop())degree+=callback(node,edge)}return degree}}}function defineDegreeBoundsFunction(degreeFn,callback){return function(includeLoops){for(var ret,
nodes=this.nodes(),i=0;i<nodes.length;i++){var degree=nodes[i][degreeFn](includeLoops);void 0===degree||void 0!==ret&&!callback(degree,ret)||(ret=degree)}return ret}}function returnFalse(){return!1}function returnTrue(){return!0}function Emitter(){for(var opts=0<arguments.length&&void 0!==arguments[0]?arguments[0]:emptyOpts,context=1<arguments.length?arguments[1]:void 0,i=0;i<defaultsKeys.length;i++){var key=defaultsKeys[i];this[key]=opts[key]||defaults$8[key]}this.context=context||this.context;this.listeners=
[];this.emitting=0}function styleCache(key,fn,ele){var _p=ele._private;_p=_p.styleCache=_p.styleCache||[];var val;null==(val=_p[key])&&(val=_p[key]=fn(ele));return val}function cacheStyleFunction(key,fn){key=hashString(key);return function(ele){return styleCache(key,fn,ele)}}function cachePrototypeStyleFunction(key,fn){key=hashString(key);var selfFn=function(ele){return fn.call(ele)};return function(){var ele=this[0];if(ele)return styleCache(key,selfFn,ele)}}function checkCompound(ele,parentOk){if(ele=
ele._private.data.parent?ele.parents():null)for(var i=0;i<ele.length;i++)if(!parentOk(ele[i]))return!1;return!0}function defineDerivedStateFunction(specs){var ok=specs.ok,edgeOkViaNode=specs.edgeOkViaNode||specs.ok,parentOk=specs.parentOk||specs.ok;return function(){var cy=this.cy();if(!cy.styleEnabled())return!0;var ele=this[0];cy=cy.hasCompoundNodes();if(ele){var _p=ele._private;if(!ok(ele))return!1;if(ele.isNode())return!cy||checkCompound(ele,parentOk);ele=_p.source;_p=_p.target;return edgeOkViaNode(ele)&&
(!cy||checkCompound(ele,edgeOkViaNode))&&(ele===_p||edgeOkViaNode(_p)&&(!cy||checkCompound(_p,edgeOkViaNode)))}}}function defineSwitchFunction(params){return function(){var args=arguments,changedEles=[];if(2===args.length)this.on(params.event,args[0],args[1]);else if(1===args.length&&fn$6(args[0]))this.on(params.event,args[0]);else if(0===args.length||1===args.length&&array$jscomp$0(args[0])){args=1===args.length?args[0]:null;for(var i=0;i<this.length;i++){var ele=this[i],able=!params.ableField||
ele._private[params.ableField],changed=ele._private[params.field]!=params.value;if(params.overrideAble){var overrideAble=params.overrideAble(ele);if(void 0!==overrideAble&&(able=overrideAble,!overrideAble))return this}able&&(ele._private[params.field]=params.value,changed&&changedEles.push(ele))}changedEles=this.spawn(changedEles);changedEles.updateStyle();changedEles.emit(params.event);args&&changedEles.emit(args)}return this}}function defineSwitchSet(params){elesfn$3[params.field]=function(){var ele=
this[0];if(ele){if(params.overrideField){var val=params.overrideField(ele);if(void 0!==val)return val}return ele._private[params.field]}};elesfn$3[params.on]=defineSwitchFunction({event:params.on,field:params.field,ableField:params.ableField,overrideAble:params.overrideAble,value:!0});elesfn$3[params.off]=defineSwitchFunction({event:params.off,field:params.field,ableField:params.ableField,overrideAble:params.overrideAble,value:!1})}function defineSourceFunction(params){return function(selector){for(var sources=
[],i=0;i<this.length;i++){var src=this[i]._private[params.attr];src&&sources.push(src)}return this.spawn(sources,!0).filter(selector)}}function defineEdgesWithFunction(params){return function(otherNodes){var elements=[],cy=this._private.cy,p=params||{};string$jscomp$0(otherNodes)&&(otherNodes=cy.$(otherNodes));for(cy=0;cy<otherNodes.length;cy++)for(var edges=otherNodes[cy]._private.edges,i=0;i<edges.length;i++){var edge=edges[i],edgeData=edge._private.data,thisToOther=this.hasElementWithId(edgeData.source)&&
otherNodes.hasElementWithId(edgeData.target);edgeData=otherNodes.hasElementWithId(edgeData.source)&&this.hasElementWithId(edgeData.target);if(thisToOther||edgeData){if(p.thisIsSrc||p.thisIsTgt){if(p.thisIsSrc&&!thisToOther)continue;if(p.thisIsTgt&&!edgeData)continue}elements.push(edge)}}return this.spawn(elements,!0)}}function defineParallelEdgesFunction(params){params=extend({},{codirected:!1},params);return function(selector){for(var elements=[],edges=this.edges(),p=params,i=0;i<edges.length;i++){var edge1_p=
edges[i]._private,src1=edge1_p.source,srcid1=src1._private.data.id;edge1_p=edge1_p.data.target;src1=src1._private.edges;for(var j=0;j<src1.length;j++){var edge2=src1[j],edge2data=edge2._private.data,tgtid2=edge2data.target,srcid2=edge2data.source;edge2data=tgtid2===edge1_p&&srcid2===srcid1;tgtid2=srcid1===tgtid2&&edge1_p===srcid2;(p.codirected&&edge2data||!p.codirected&&(edge2data||tgtid2))&&elements.push(edge2)}}return this.spawn(elements,!0).filter(selector)}}function generateCubicBezier(mX1,mY1,
mX2,mY2){function calcBezier(aT,aA1,aA2){return(((1-3*aA2+3*aA1)*aT+(3*aA2-6*aA1))*aT+3*aA1)*aT}var float32ArraySupported="undefined"!==typeof Float32Array;if(4!==arguments.length)return!1;for(var i$jscomp$0=0;4>i$jscomp$0;++i$jscomp$0)if("number"!==typeof arguments[i$jscomp$0]||isNaN(arguments[i$jscomp$0])||!isFinite(arguments[i$jscomp$0]))return!1;mX1=Math.min(mX1,1);mX2=Math.min(mX2,1);mX1=Math.max(mX1,0);mX2=Math.max(mX2,0);var mSampleValues=float32ArraySupported?new Float32Array(11):Array(11),
_precomputed=!1;float32ArraySupported=function(aX){if(!_precomputed&&(_precomputed=!0,mX1!==mY1||mX2!==mY2))for(var _i2=0;11>_i2;++_i2)mSampleValues[_i2]=calcBezier(.1*_i2,mX1,mX2);if(mX1===mY1&&mX2===mY2)return aX;if(0===aX)return 0;if(1===aX)return 1;var intervalStart=0;for(_i2=1;10!==_i2&&mSampleValues[_i2]<=aX;++_i2)intervalStart+=.1;--_i2;_i2=intervalStart+(aX-mSampleValues[_i2])/(mSampleValues[_i2+1]-mSampleValues[_i2])*.1;var initialSlope=3*(1-3*mX2+3*mX1)*_i2*_i2+2*(3*mX2-6*mX1)*_i2+3*mX1;
if(.001<=initialSlope){for(intervalStart=0;4>intervalStart;++intervalStart){initialSlope=3*(1-3*mX2+3*mX1)*_i2*_i2+2*(3*mX2-6*mX1)*_i2+3*mX1;if(0===initialSlope)break;var currentX=calcBezier(_i2,mX1,mX2)-aX;_i2-=currentX/initialSlope}aX=_i2}else if(0===initialSlope)aX=_i2;else{_i2=intervalStart;intervalStart+=.1;var i=0;do currentX=_i2+(intervalStart-_i2)/2,initialSlope=calcBezier(currentX,mX1,mX2)-aX,0<initialSlope?intervalStart=currentX:_i2=currentX;while(1E-7<Math.abs(initialSlope)&&10>++i);aX=
currentX}return calcBezier(aX,mY1,mY2)};float32ArraySupported.getControlPoints=function(){return[{x:mX1,y:mY1},{x:mX2,y:mY2}]};var str="generateBezier("+[mX1,mY1,mX2,mY2]+")";float32ArraySupported.toString=function(){return str};return float32ArraySupported}function getEasedValue(type,start,end,percent,easingFn){if(1===percent||start===end)return end;start=easingFn(start,end,percent);if(null==type)return start;if(type.roundValue||type.color)start=Math.round(start);void 0!==type.min&&(start=Math.max(start,
type.min));void 0!==type.max&&(start=Math.min(start,type.max));return start}function getValue(prop,spec){return null!=prop.pfValue||null!=prop.value?null==prop.pfValue||null!=spec&&"%"===spec.type.units?prop.value:prop.pfValue:prop}function ease(startProp,endProp,percent,easingFn,propSpec){var type=null!=propSpec?propSpec.type:null;0>percent?percent=0:1<percent&&(percent=1);startProp=getValue(startProp,propSpec);endProp=getValue(endProp,propSpec);if(number$1(startProp)&&number$1(endProp))return getEasedValue(type,
startProp,endProp,percent,easingFn);if(array$jscomp$0(startProp)&&array$jscomp$0(endProp)){propSpec=[];for(var i=0;i<endProp.length;i++){var si=startProp[i],ei=endProp[i];null!=si&&null!=ei?(si=getEasedValue(type,si,ei,percent,easingFn),propSpec.push(si)):propSpec.push(ei)}return propSpec}}function step$1(self,ani,now,isCore){var isEles=!isCore,_p=self._private;ani=ani._private;var pEasing=ani.easing,startTime=ani.startTime,style=(isCore?self:self.cy()).style();if(!ani.easingImpl)if(null==pEasing)ani.easingImpl=
easings.linear;else{var easingVals=string$jscomp$0(pEasing)?style.parse("transition-timing-function",pEasing).value:pEasing;string$jscomp$0(easingVals)?(pEasing=easingVals,easingVals=[]):(pEasing=easingVals[1],easingVals=easingVals.slice(2).map(function(n){return+n}));0<easingVals.length?("spring"===pEasing&&easingVals.push(ani.duration),ani.easingImpl=easings[pEasing].apply(null,easingVals)):ani.easingImpl=easings[pEasing]}pEasing=ani.easingImpl;now=0===ani.duration?1:(now-startTime)/ani.duration;
ani.applying&&(now=ani.progress);0>now?now=0:1<now&&(now=1);if(null==ani.delay){startTime=ani.startPosition;if((easingVals=ani.position)&&isEles&&!self.locked()){var newPos={};valid(startTime.x,easingVals.x)&&(newPos.x=ease(startTime.x,easingVals.x,now,pEasing));valid(startTime.y,easingVals.y)&&(newPos.y=ease(startTime.y,easingVals.y,now,pEasing));self.position(newPos)}easingVals=ani.startPan;newPos=ani.pan;var pan=_p.pan;if(startTime=null!=newPos&&isCore)valid(easingVals.x,newPos.x)&&(pan.x=ease(easingVals.x,
newPos.x,now,pEasing)),valid(easingVals.y,newPos.y)&&(pan.y=ease(easingVals.y,newPos.y,now,pEasing)),self.emit("pan");easingVals=ani.startZoom;newPos=ani.zoom;if(isCore=null!=newPos&&isCore)valid(easingVals,newPos)&&(_p.zoom=bound(_p.minZoom,ease(easingVals,newPos,now,pEasing),_p.maxZoom)),self.emit("zoom");(startTime||isCore)&&self.emit("viewport");if((_p=ani.style)&&0<_p.length&&isEles){for(isEles=0;isEles<_p.length;isEles++)startTime=_p[isEles],isCore=startTime.name,easingVals=ani.startStyle[isCore],
startTime=ease(easingVals,startTime,now,pEasing,style.properties[easingVals.name]),style.overrideBypass(self,isCore,startTime);self.emit("style")}}return ani.progress=now}function valid(start,end){return null==start||null==end?!1:number$1(start)&&number$1(end)||start&&end?!0:!1}function startAnimation(self,ani,now,isCore){self=ani._private;self.started=!0;self.startTime=now-self.progress*self.duration}function stepAll(now,cy){function stepOne(ele,isCore){var _p=ele._private,current=_p.animation.current;
_p=_p.animation.queue;var ranAnis=!1;if(0===current.length){var next=_p.shift();next&&current.push(next)}next=function(_callbacks){for(var j=_callbacks.length-1;0<=j;j--)(0,_callbacks[j])();_callbacks.splice(0,_callbacks.length)};for(var i=current.length-1;0<=i;i--){var ani=current[i],ani_p=ani._private;if(ani_p.stopped)current.splice(i,1),ani_p.hooked=!1,ani_p.playing=!1,ani_p.started=!1,next(ani_p.frames);else if(ani_p.playing||ani_p.applying)ani_p.playing&&ani_p.applying&&(ani_p.applying=!1),ani_p.started||
startAnimation(ele,ani,now),step$1(ele,ani,now,isCore),ani_p.applying&&(ani_p.applying=!1),next(ani_p.frames),null!=ani_p.step&&ani_p.step(now),ani.completed()&&(current.splice(i,1),ani_p.hooked=!1,ani_p.playing=!1,ani_p.started=!1,next(ani_p.completes)),ranAnis=!0}isCore||0!==current.length||0!==_p.length||doneEles.push(ele);return ranAnis}for(var eles=cy._private.aniEles,doneEles=[],ranEleAni=!1,e=0;e<eles.length;e++){var handledThisEle=stepOne(eles[e]);ranEleAni=ranEleAni||handledThisEle}e=stepOne(cy,
!0);if(ranEleAni||e)0<eles.length?cy.notify("draw",eles):cy.notify("draw");eles.unmerge(doneEles);cy.emit("step")}function BreadthFirstLayout(options){this.options=extend({},defaults$7,deprecatedOptionDefaults,options)}function CircleLayout(options){this.options=extend({},defaults$6,options)}function ConcentricLayout(options){this.options=extend({},defaults$5,options)}function CoseLayout(options){this.options=extend({},defaults$4,options);this.options.layout=this}function GridLayout(options){this.options=
extend({},defaults$3,options)}function NullLayout(options){this.options=extend({},defaults$2,options)}function PresetLayout(options){this.options=extend({},defaults$1,options)}function RandomLayout(options){this.options=extend({},defaults,options)}function NullRenderer(options){this.options=options;this.notifications=0}function getPts(pts){var retPts=[];if(null!=pts){for(var i=0;i<pts.length;i+=2)retPts.push({x:pts[i],y:pts[i+1]});return retPts}}function polygon(context,points){for(var i=0;i<points.length;i++){var pt=
points[i];context.lineTo(pt.x,pt.y)}}function triangleBackcurve(context,points,controlPoint){for(var firstPt,i=0;i<points.length;i++){var pt=points[i];0===i&&(firstPt=pt);context.lineTo(pt.x,pt.y)}context.quadraticCurveTo(controlPoint.x,controlPoint.y,firstPt.x,firstPt.y)}function triangleTee(context,trianglePoints,teePoints){context.beginPath&&context.beginPath();for(var i=0;i<trianglePoints.length;i++){var pt=trianglePoints[i];context.lineTo(pt.x,pt.y)}trianglePoints=teePoints[0];context.moveTo(trianglePoints.x,
trianglePoints.y);for(i=1;i<teePoints.length;i++)pt=teePoints[i],context.lineTo(pt.x,pt.y);context.closePath&&context.closePath()}function circleTriangle(context,trianglePoints,rx,ry,r){context.beginPath&&context.beginPath();context.arc(rx,ry,r,0,2*Math.PI,!1);rx=trianglePoints[0];context.moveTo(rx.x,rx.y);for(rx=0;rx<trianglePoints.length;rx++)ry=trianglePoints[rx],context.lineTo(ry.x,ry.y);context.closePath&&context.closePath()}function circle(context,rx,ry,r){context.arc(rx,ry,r,0,2*Math.PI,!1)}
function roundRect(ctx,x,y,width,height){var radius=5<arguments.length&&void 0!==arguments[5]?arguments[5]:5;ctx.beginPath();ctx.moveTo(x+radius,y);ctx.lineTo(x+width-radius,y);ctx.quadraticCurveTo(x+width,y,x+width,y+radius);ctx.lineTo(x+width,y+height-radius);ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);ctx.lineTo(x+radius,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-radius);ctx.lineTo(x,y+radius);ctx.quadraticCurveTo(x,y,x+radius,y);ctx.closePath();ctx.fill()}function b64ToBlob(b64,
mimeType){b64=atob(b64);for(var buff=new ArrayBuffer(b64.length),buffUint8=new Uint8Array(buff),i=0;i<b64.length;i++)buffUint8[i]=b64.charCodeAt(i);return new Blob([buff],{type:mimeType})}function b64UriToB64(b64uri){var i=b64uri.indexOf(",");return b64uri.substr(i+1)}function output(options,canvas,mimeType){switch(options.output){case "blob-promise":return new Promise$1(function(resolve,reject){try{canvas.toBlob(function(blob){null!=blob?resolve(blob):reject(Error("`canvas.toBlob()` sent a null value in its callback"))},
mimeType,options.quality)}catch(err){reject(err)}});case "blob":return b64ToBlob(b64UriToB64(canvas.toDataURL(mimeType,options.quality)),mimeType);case "base64":return b64UriToB64(canvas.toDataURL(mimeType,options.quality));default:return canvas.toDataURL(mimeType,options.quality)}}function CanvasRenderer(options){var r=this;r.data={canvases:Array(CRp.CANVAS_LAYERS),contexts:Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:Array(CRp.CANVAS_LAYERS),bufferCanvases:Array(CRp.BUFFER_COUNT),bufferContexts:Array(CRp.CANVAS_LAYERS)};
r.data.canvasContainer=document.createElement("div");var containerStyle=r.data.canvasContainer.style;r.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";containerStyle.position="relative";containerStyle.zIndex="0";containerStyle.overflow="hidden";options=options.cy.container();options.appendChild(r.data.canvasContainer);options.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var styleMap={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none",
"-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};navigator&&navigator.userAgent.match(/msie|trident|edge/i)&&(styleMap["-ms-touch-action"]="none",styleMap["touch-action"]="none");for(options=0;options<CRp.CANVAS_LAYERS;options++){var canvas=r.data.canvases[options]=document.createElement("canvas");r.data.contexts[options]=canvas.getContext("2d");Object.keys(styleMap).forEach(function(k){canvas.style[k]=styleMap[k]});canvas.style.position="absolute";canvas.setAttribute("data-id",
"layer"+options);canvas.style.zIndex=String(CRp.CANVAS_LAYERS-options);r.data.canvasContainer.appendChild(canvas);r.data.canvasNeedsRedraw[options]=!1}r.data.topCanvas=r.data.canvases[0];r.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node");r.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox");r.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag");for(options=0;options<CRp.BUFFER_COUNT;options++)r.data.bufferCanvases[options]=
document.createElement("canvas"),r.data.bufferContexts[options]=r.data.bufferCanvases[options].getContext("2d"),r.data.bufferCanvases[options].style.position="absolute",r.data.bufferCanvases[options].setAttribute("data-id","buffer"+options),r.data.bufferCanvases[options].style.zIndex=String(-options-1),r.data.bufferCanvases[options].style.visibility="hidden";r.pathsEnabled=!0;var emptyBb=makeBoundingBox(),getCenterOffset=function(bb){return{x:-bb.w/2,y:-bb.h/2}},getElementBox=function(ele){ele.boundingBox();
return ele[0]._private.bodyBounds},getLabelBox=function(ele){ele.boundingBox();return ele[0]._private.labelBounds.main||emptyBb},getSourceLabelBox=function(ele){ele.boundingBox();return ele[0]._private.labelBounds.source||emptyBb},getTargetLabelBox=function(ele){ele.boundingBox();return ele[0]._private.labelBounds.target||emptyBb};options=function(ele,scaledLabelShown){return scaledLabelShown};var addTextMargin=function(prefix,pt,ele){prefix=prefix?prefix+"-":"";return{x:pt.x+ele.pstyle(prefix+"text-margin-x").pfValue,
y:pt.y+ele.pstyle(prefix+"text-margin-y").pfValue}},getRsPt=function(ele,x,y){ele=ele[0]._private.rscratch;return{x:ele[x],y:ele[y]}},eleTxrCache=r.data.eleTxrCache=new ElementTextureCache(r,{getKey:function(ele){return ele[0]._private.nodeKey},doesEleInvalidateKey:function(ele){ele=ele[0]._private;return ele.oldBackgroundTimestamp!==ele.backgroundTimestamp},drawElement:function(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElement(context,ele,bb,!1,!1,useEleOpacity)},getBoundingBox:getElementBox,
getRotationPoint:function(ele){ele=getElementBox(ele);return{x:(ele.x1+ele.x2)/2,y:(ele.y1+ele.y2)/2}},getRotationOffset:function(ele){return getCenterOffset(getElementBox(ele))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),lblTxrCache=r.data.lblTxrCache=new ElementTextureCache(r,{getKey:function(ele){return ele[0]._private.labelStyleKey},drawElement:function(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElementText(context,ele,bb,scaledLabelShown,"main",useEleOpacity)},getBoundingBox:getLabelBox,
getRotationPoint:function(ele){return addTextMargin("",getRsPt(ele,"labelX","labelY"),ele)},getRotationOffset:function(ele){var bb=getLabelBox(ele),p=getCenterOffset(getLabelBox(ele));if(ele.isNode()){switch(ele.pstyle("text-halign").value){case "left":p.x=-bb.w;break;case "right":p.x=0}switch(ele.pstyle("text-valign").value){case "top":p.y=-bb.h;break;case "bottom":p.y=0}}return p},isVisible:options}),slbTxrCache=r.data.slbTxrCache=new ElementTextureCache(r,{getKey:function(ele){return ele[0]._private.sourceLabelStyleKey},
drawElement:function(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElementText(context,ele,bb,scaledLabelShown,"source",useEleOpacity)},getBoundingBox:getSourceLabelBox,getRotationPoint:function(ele){return addTextMargin("source",getRsPt(ele,"sourceLabelX","sourceLabelY"),ele)},getRotationOffset:function(ele){return getCenterOffset(getSourceLabelBox(ele))},isVisible:options}),tlbTxrCache=r.data.tlbTxrCache=new ElementTextureCache(r,{getKey:function(ele){return ele[0]._private.targetLabelStyleKey},
drawElement:function(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElementText(context,ele,bb,scaledLabelShown,"target",useEleOpacity)},getBoundingBox:getTargetLabelBox,getRotationPoint:function(ele){return addTextMargin("target",getRsPt(ele,"targetLabelX","targetLabelY"),ele)},getRotationOffset:function(ele){return getCenterOffset(getTargetLabelBox(ele))},isVisible:options}),lyrTxrCache=r.data.lyrTxrCache=new LayeredTextureCache(r);r.onUpdateEleCalcs(function(willDraw,eles){eleTxrCache.invalidateElements(eles);
lblTxrCache.invalidateElements(eles);slbTxrCache.invalidateElements(eles);tlbTxrCache.invalidateElements(eles);lyrTxrCache.invalidateElements(eles);for(willDraw=0;willDraw<eles.length;willDraw++){var _p=eles[willDraw]._private;_p.oldBackgroundTimestamp=_p.backgroundTimestamp}});options=function(reqs){for(var i=0;i<reqs.length;i++)lyrTxrCache.enqueueElementRefinement(reqs[i].ele)};eleTxrCache.onDequeue(options);lblTxrCache.onDequeue(options);slbTxrCache.onDequeue(options);tlbTxrCache.onDequeue(options)}
function setExtension(type,name$jscomp$0,registrant){var ext=registrant,overrideErr=function(field){warn("Can not register `"+name$jscomp$0+"` for `"+type+"` since `"+field+"` already exists in the prototype and can not be overridden")};if("core"===type){if(Core.prototype[name$jscomp$0])return overrideErr(name$jscomp$0);Core.prototype[name$jscomp$0]=registrant}else if("collection"===type){if(Collection.prototype[name$jscomp$0])return overrideErr(name$jscomp$0);Collection.prototype[name$jscomp$0]=
registrant}else if("layout"===type){overrideErr=function(options){this.options=options;registrant.call(this,options);plainObject(this._private)||(this._private={});this._private.cy=options.cy;this._private.listeners=[];this.createEmitter()};var layoutProto=overrideErr.prototype=Object.create(registrant.prototype),optLayoutFns=[];for(ext=0;ext<optLayoutFns.length;ext++){var fnName=optLayoutFns[ext];layoutProto[fnName]=layoutProto[fnName]||function(){return this}}layoutProto.start&&!layoutProto.run?
layoutProto.run=function(){this.start();return this}:!layoutProto.start&&layoutProto.run&&(layoutProto.start=function(){this.run();return this});var regStop=registrant.prototype.stop;layoutProto.stop=function(){var opts=this.options;if(opts&&opts.animate&&(opts=this.animations))for(var _i=0;_i<opts.length;_i++)opts[_i].stop();regStop?regStop.call(this):this.emit("layoutstop");return this};layoutProto.destroy||(layoutProto.destroy=function(){return this});layoutProto.cy=function(){return this._private.cy};
var emitterOpts={addEventFields:function(layout,evt){evt.layout=layout;evt.cy=layout._private.cy;evt.target=layout},bubble:function(){return!0},parent:function(layout){return layout._private.cy}};extend(layoutProto,{createEmitter:function(){this._private.emitter=new Emitter(emitterOpts,this);return this},emitter:function(){return this._private.emitter},on:function(evt,cb){this.emitter().on(evt,cb);return this},one:function(evt,cb){this.emitter().one(evt,cb);return this},once:function(evt,cb){this.emitter().one(evt,
cb);return this},removeListener:function(evt,cb){this.emitter().removeListener(evt,cb);return this},removeAllListeners:function(){this.emitter().removeAllListeners();return this},emit:function(evt,params){this.emitter().emit(evt,params);return this}});define.eventAliasesOn(layoutProto);ext=overrideErr}else if("renderer"===type&&"null"!==name$jscomp$0&&"base"!==name$jscomp$0){var BaseRenderer=getExtension("renderer","base");ext=BaseRenderer.prototype;fnName=registrant.prototype;var Renderer=function(){BaseRenderer.apply(this,
arguments);registrant.apply(this,arguments)},proto=Renderer.prototype;for(layoutProto in ext){var pVal=ext[layoutProto];if(null!=fnName[layoutProto])return overrideErr(layoutProto);proto[layoutProto]=pVal}for(optLayoutFns in fnName)proto[optLayoutFns]=fnName[optLayoutFns];ext.clientFunctions.forEach(function(name){proto[name]=proto[name]||function(){error("Renderer does not implement `renderer."+name+"()` on its prototype")}});ext=Renderer}else if("__proto__"===type||"constructor"===type||"prototype"===
type)return error(type+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[type,name$jscomp$0],value:ext})}function getExtension(type,name){return getMap({map:extensions,keys:[type,name]})}function setModule(type,name,moduleType,moduleName,registrant){return setMap({map:modules,keys:[type,name,moduleType,moduleName],value:registrant})}function getModule(type,name,moduleType,moduleName){return getMap({map:modules,keys:[type,name,moduleType,
moduleName]})}var debounce=require("module$node_modules$lodash$debounce"),Heap=require("module$node_modules$heap$index"),get=require("module$node_modules$lodash$get"),set=require("module$node_modules$lodash$set"),toPath=require("module$node_modules$lodash$toPath"),debounce__default=_interopDefaultLegacy(debounce),Heap__default=_interopDefaultLegacy(Heap),get__default=_interopDefaultLegacy(get),set__default=_interopDefaultLegacy(set),toPath__default=_interopDefaultLegacy(toPath),_window="undefined"===
typeof window?null:window,navigator=_window?_window.navigator:null;_window?_window.document:null;var typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof(function(){}),typeofhtmlele="undefined"===typeof HTMLElement?"undefined":_typeof(HTMLElement),instanceStr=function(obj){return obj&&obj.instanceString&&fn$6(obj.instanceString)?obj.instanceString():null},string$jscomp$0=function(obj){return null!=obj&&_typeof(obj)==typeofstr},fn$6=function(obj){return null!=obj&&_typeof(obj)===typeoffn},
array$jscomp$0=function(obj){return!elementOrCollection(obj)&&(Array.isArray?Array.isArray(obj):null!=obj&&obj instanceof Array)},plainObject=function(obj){return null!=obj&&_typeof(obj)===typeofobj&&!array$jscomp$0(obj)&&obj.constructor===Object},number$1=function(obj){return null!=obj&&_typeof(obj)===_typeof(1)&&!isNaN(obj)},integer=function(obj){return number$1(obj)&&Math.floor(obj)===obj},htmlElement=function(obj){if("undefined"!==typeofhtmlele)return null!=obj&&obj instanceof HTMLElement},elementOrCollection=
function(obj){return element$jscomp$0(obj)||collection(obj)},element$jscomp$0=function(obj){return"collection"===instanceStr(obj)&&obj._private.single},collection=function(obj){return"collection"===instanceStr(obj)&&!obj._private.single},emptyString=function(obj){return void 0===obj||null===obj||""===obj||obj.match(/^\s+$/)?!0:!1},promise=function(obj){return null!=obj&&_typeof(obj)===typeofobj&&fn$6(obj.then)},memoize=function(fn,keyFn){keyFn||(keyFn=function(){if(1===arguments.length)return arguments[0];
if(0===arguments.length)return"undefined";for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);return args.join("$")});var memoizedFn=function memoizedFn(){var args=arguments,ret,k=keyFn.apply(this,args),cache=memoizedFn.cache;(ret=cache[k])||(ret=cache[k]=fn.apply(this,args));return ret};memoizedFn.cache={};return memoizedFn},camel2dash=memoize(function(str){return str.replace(/([A-Z])/g,function(v){return"-"+v.toLowerCase()})}),dash2camel=memoize(function(str){return str.replace(/(-\w)/g,
function(v){return v[1].toUpperCase()})}),prependCamel=memoize(function(prefix,str){return prefix+str[0].toUpperCase()+str.substring(1)},function(prefix,str){return prefix+"$"+str}),capitalize=function(str){return emptyString(str)?str:str.charAt(0).toUpperCase()+str.substring(1)},extend=null!=Object.assign?Object.assign.bind(Object):function(tgt){for(var args=arguments,i=1;i<args.length;i++){var obj=args[i];if(null!=obj)for(var keys=Object.keys(obj),j=0;j<keys.length;j++){var k=keys[j];tgt[k]=obj[k]}}return tgt},
hsl2tuple=function(hsl){function hue2rgb(p,q,t){0>t&&(t+=1);1<t&&--t;return t<1/6?p+6*(q-p)*t:.5>t?q:t<2/3?p+(q-p)*(2/3-t)*6:p}if(hsl=RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(hsl)){var ret=parseInt(hsl[1]);0>ret?ret=(360- -1*ret%360)%360:360<ret&&(ret%=360);ret/=
360;var s=parseFloat(hsl[2]);if(0>s||100<s)return;s/=100;var l=parseFloat(hsl[3]);if(0>l||100<l)return;l/=100;hsl=hsl[4];if(void 0!==hsl&&(hsl=parseFloat(hsl),0>hsl||1<hsl))return;if(0===s)l=s=ret=Math.round(255*l);else{var q=.5>l?l*(1+s):l+s-l*s,p$jscomp$0=2*l-q;l=Math.round(255*hue2rgb(p$jscomp$0,q,ret+1/3));s=Math.round(255*hue2rgb(p$jscomp$0,q,ret));ret=Math.round(255*hue2rgb(p$jscomp$0,q,ret-1/3))}ret=[l,s,ret,hsl]}return ret},rgb2tuple=function(rgb){if(rgb=RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(rgb)){var ret=
[];for(var isPct=[],i=1;3>=i;i++){var channel=rgb[i];"%"===channel[channel.length-1]&&(isPct[i]=!0);channel=parseFloat(channel);isPct[i]&&(channel=channel/100*255);if(0>channel||255<channel)return;ret.push(Math.floor(channel))}i=isPct[1]&&isPct[2]&&isPct[3];if((isPct[1]||isPct[2]||isPct[3])&&!i)return;rgb=rgb[4];if(void 0!==rgb){rgb=parseFloat(rgb);if(0>rgb||1<rgb)return;ret.push(rgb)}}return ret},color2tuple=function(color){var JSCompiler_temp;if(!(JSCompiler_temp=(array$jscomp$0(color)?color:null)||
colors[color.toLowerCase()]))if(4!==color.length&&7!==color.length||"#"!==color[0])JSCompiler_temp=void 0;else{if(4===color.length){JSCompiler_temp=parseInt(color[1]+color[1],16);var g=parseInt(color[2]+color[2],16);var b=parseInt(color[3]+color[3],16)}else JSCompiler_temp=parseInt(color[1]+color[2],16),g=parseInt(color[3]+color[4],16),b=parseInt(color[5]+color[6],16);JSCompiler_temp=[JSCompiler_temp,g,b]}return JSCompiler_temp||rgb2tuple(color)||hsl2tuple(color)},colors={transparent:[0,0,0,0],aliceblue:[240,
248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,
11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],
firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,
230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],
mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,
170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,
128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(options){for(var obj=options.map,keys=options.keys,l=keys.length,i=0;i<l;i++){var key=keys[i];if(plainObject(key))throw Error("Tried to set map with object key");
i<keys.length-1?(null==obj[key]&&(obj[key]={}),obj=obj[key]):obj[key]=options.value}},getMap=function(options){var obj=options.map;options=options.keys;for(var l=options.length,i=0;i<l;i++){var key=options[i];if(plainObject(key))throw Error("Tried to get map with object key");obj=obj[key];if(null==obj)break}return obj},performance=_window?_window.performance:null,pnow=performance&&performance.now?function(){return performance.now()}:function(){return Date.now()},raf=function(){if(_window){if(_window.requestAnimationFrame)return function(fn){_window.requestAnimationFrame(fn)};
if(_window.mozRequestAnimationFrame)return function(fn){_window.mozRequestAnimationFrame(fn)};if(_window.webkitRequestAnimationFrame)return function(fn){_window.webkitRequestAnimationFrame(fn)};if(_window.msRequestAnimationFrame)return function(fn){_window.msRequestAnimationFrame(fn)}}return function(fn){fn&&setTimeout(function(){fn(pnow())},1E3/60)}}(),hashIterableInts=function(iterator){for(var hash=1<arguments.length&&void 0!==arguments[1]?arguments[1]:9261,entry;;){entry=iterator.next();if(entry.done)break;
hash=65599*hash+entry.value|0}return hash},hashInt=function(num){return 65599*(1<arguments.length&&void 0!==arguments[1]?arguments[1]:9261)+num|0},hashIntAlt=function(num){var seed=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5381;return(seed<<5)+seed+num|0},combineHashesArray=function(hashes){return 2097152*hashes[0]+hashes[1]},hashArrays=function(hashes1,hashes2){return[hashInt(hashes1[0],hashes2[0]),hashIntAlt(hashes1[1],hashes2[1])]},hashIntsArray=function(ints,seed){var entry={value:0,
done:!1},i=0,length=ints.length;return hashIterableInts({next:function(){i<length?entry.value=ints[i++]:entry.done=!0;return entry}},seed)},hashString=function(str,seed){var entry={value:0,done:!1},i=0,length=str.length;return hashIterableInts({next:function(){i<length?entry.value=str.charCodeAt(i++):entry.done=!0;return entry}},seed)},hashStrings=function(){for(var strs=arguments,hash,i=0;i<strs.length;i++){var str=strs[i];hash=0===i?hashString(str):hashString(str,hash)}return hash},warningsEnabled=
!0,warnSupported=null!=console.warn,traceSupported=null!=console.trace,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop$1=function(){},error=function(msg){throw Error(msg);},warnings=function(enabled){if(void 0!==enabled)warningsEnabled=!!enabled;else return warningsEnabled},warn=function(msg){warnings()&&(warnSupported?console.warn(msg):(console.log(msg),traceSupported&&console.trace()))},copy=function(obj){return null==
obj?obj:array$jscomp$0(obj)?obj.slice():plainObject(obj)?extend({},obj):obj},uuid=function(a,b){for(b=a="";36>a++;b+=51*a&52?(a^15?8^Math.random()*(a^20?16:4):4).toString(16):"-");return b},_staticEmptyObject={},defaults$g=function(_defaults){var keys=Object.keys(_defaults);return function(opts){for(var filledOpts={},i=0;i<keys.length;i++){var key=keys[i],optVal=null==opts?void 0:opts[key];filledOpts[key]=void 0===optVal?_defaults[key]:optVal}return filledOpts}},removeFromArray=function(arr,ele,oneCopy){for(var i=
arr.length-1;0<=i&&(arr[i]!==ele||(arr.splice(i,1),!oneCopy));i--);},clearArray=function(arr){arr.splice(0,arr.length)},push=function(arr,otherArr){for(var i=0;i<otherArr.length;i++)arr.push(otherArr[i])},getPrefixedProperty=function(obj,propName,prefix){prefix&&(propName=prependCamel(prefix,propName));return obj[propName]},setPrefixedProperty=function(obj,propName,prefix,value){prefix&&(propName=prependCamel(prefix,propName));obj[propName]=value},ObjectMap=function(){function ObjectMap(){_classCallCheck(this,
ObjectMap);this._obj={}}_createClass(ObjectMap,[{key:"set",value:function(key,val){this._obj[key]=val;return this}},{key:"delete",value:function(key){this._obj[key]=void 0;return this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(key){return void 0!==this._obj[key]}},{key:"get",value:function(key){return this._obj[key]}}]);return ObjectMap}(),Map$1="undefined"!==typeof Map?Map:ObjectMap,ObjectSet=function(){function ObjectSet(arrayOrObjectSet){_classCallCheck(this,ObjectSet);
this._obj=Object.create(null);this.size=0;if(null!=arrayOrObjectSet){arrayOrObjectSet=null!=arrayOrObjectSet.instanceString&&arrayOrObjectSet.instanceString()===this.instanceString()?arrayOrObjectSet.toArray():arrayOrObjectSet;for(var i=0;i<arrayOrObjectSet.length;i++)this.add(arrayOrObjectSet[i])}}_createClass(ObjectSet,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(val){var o=this._obj;1!==o[val]&&(o[val]=1,this.size++)}},{key:"delete",value:function(val){var o=
this._obj;1===o[val]&&(o[val]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(val){return 1===this._obj[val]}},{key:"toArray",value:function(){var _this=this;return Object.keys(this._obj).filter(function(key){return _this.has(key)})}},{key:"forEach",value:function(callback,thisArg){return this.toArray().forEach(callback,thisArg)}}]);return ObjectSet}(),Set$1="undefined"!==("undefined"===typeof Set?"undefined":_typeof(Set))?Set:ObjectSet,Element=
function(cy,params){var restore=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(void 0===cy||void 0===params||"core"!==instanceStr(cy))error("An element must have a core reference and parameters set");else{var group=params.group;null==group&&(group=params.data&&null!=params.data.source&&null!=params.data.target?"edges":"nodes");if("nodes"!==group&&"edges"!==group)error("An element must be of type `nodes` or `edges`; you specified `"+group+"`");else{this.length=1;this[0]=this;group=this._private=
{cy,single:!0,data:params.data||{},position:params.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:params.selected?!0:!1,selectable:void 0===params.selectable?!0:params.selectable?!0:!1,locked:params.locked?!0:!1,grabbed:!1,grabbable:void 0===params.grabbable?!0:params.grabbable?!0:!1,pannable:void 0===params.pannable?"edges"===group?!0:!1:params.pannable?!0:!1,active:!1,
classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:params.scratch||{},edges:[],children:[],parent:params.parent&&params.parent.isNode()?params.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};null==group.position.x&&(group.position.x=0);null==group.position.y&&(group.position.y=0);
if(params.renderedPosition){var rpos=params.renderedPosition,pan=cy.pan(),zoom=cy.zoom();group.position={x:(rpos.x-pan.x)/zoom,y:(rpos.y-pan.y)/zoom}}rpos=[];array$jscomp$0(params.classes)?rpos=params.classes:string$jscomp$0(params.classes)&&(rpos=params.classes.split(/\s+/));pan=0;for(zoom=rpos.length;pan<zoom;pan++){var cls=rpos[pan];cls&&""!==cls&&group.classes.add(cls)}this.createEmitter();if(group=params.style||params.css)warn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),
this.style(group);(void 0===restore||restore)&&this.restore()}}},defineSearch=function(params){params={bfs:params.bfs||!params.dfs,dfs:params.dfs||!params.bfs};return function(roots,fn,directed){if(plainObject(roots)&&!elementOrCollection(roots)){var options=roots;roots=options.roots||options.root;fn=options.visit;directed=options.directed}directed=2!==arguments.length||fn$6(fn)?directed:fn;fn=fn$6(fn)?fn:function(){};options=this._private.cy;var v$jscomp$0=roots=string$jscomp$0(roots)?this.filter(roots):
roots,Q=[],connectedNodes=[],connectedBy={},id2depth={},V={},j=0,found,_this$byGroup=this.byGroup(),nodes=_this$byGroup.nodes,edges=_this$byGroup.edges;for(_this$byGroup=0;_this$byGroup<v$jscomp$0.length;_this$byGroup++){var vi=v$jscomp$0[_this$byGroup],viId=vi.id();vi.isNode()&&(Q.unshift(vi),params.bfs&&(V[viId]=!0,connectedNodes.push(vi)),id2depth[viId]=0)}for(v$jscomp$0=function(){var v=params.bfs?Q.shift():Q.pop(),vId=v.id();if(params.dfs){if(V[vId])return"continue";V[vId]=!0;connectedNodes.push(v)}var depth=
id2depth[vId],prevEdge=connectedBy[vId],src=null!=prevEdge?prevEdge.source():null,tgt=null!=prevEdge?prevEdge.target():null;src=null==prevEdge?void 0:v.same(src)?tgt[0]:src[0];tgt=void 0;tgt=fn(v,prevEdge,src,j++,depth);if(!0===tgt)return found=v,"break";if(!1===tgt)return"break";depth=v.connectedEdges().filter(function(e){return(!directed||e.source().same(v))&&edges.has(e)});for(prevEdge=0;prevEdge<depth.length;prevEdge++){src=depth[prevEdge];tgt=src.connectedNodes().filter(function(n){return!n.same(v)&&
nodes.has(n)});var wId=tgt.id();0===tgt.length||V[wId]||(tgt=tgt[0],Q.push(tgt),params.bfs&&(V[wId]=!0,connectedNodes.push(tgt)),connectedBy[wId]=src,id2depth[wId]=id2depth[vId]+1)}};0!==Q.length&&(_this$byGroup=v$jscomp$0(),"continue"===_this$byGroup||"break"!==_this$byGroup););v$jscomp$0=options.collection();for(_this$byGroup=0;_this$byGroup<connectedNodes.length;_this$byGroup++)vi=connectedNodes[_this$byGroup],viId=connectedBy[vi.id()],null!=viId&&v$jscomp$0.push(viId),v$jscomp$0.push(vi);return{path:options.collection(v$jscomp$0),
found:options.collection(found)}}},elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn$v.bfs=elesfn$v.breadthFirstSearch;elesfn$v.dfs=elesfn$v.depthFirstSearch;var dijkstraDefaults=defaults$g({root:null,weight:function(edge){return 1},directed:!1}),aStarDefaults=defaults$g({root:null,goal:null,weight:function(edge){return 1},heuristic:function(edge){return 0},directed:!1}),floydWarshallDefaults=defaults$g({weight:function(edge){return 1},directed:!1}),
bellmanFordDefaults=defaults$g({weight:function(edge){return 1},directed:!1,root:null}),sqrt2=Math.sqrt(2),contractUntil=function(metaNodeMap,remainingEdges$jscomp$0,size,sizeLimit){for(;size>sizeLimit;){var edgeIndex=Math.floor(Math.random()*remainingEdges$jscomp$0.length),nodeMap=metaNodeMap,remainingEdges=remainingEdges$jscomp$0;0===remainingEdges.length&&error("Karger-Stein must be run on a connected (sub)graph");remainingEdges$jscomp$0=remainingEdges[edgeIndex];edgeIndex=nodeMap[remainingEdges$jscomp$0[1]];
remainingEdges$jscomp$0=nodeMap[remainingEdges$jscomp$0[2]];for(var i=remainingEdges.length-1;0<=i;i--){var edge=remainingEdges[i],src=edge[1];edge=edge[2];(nodeMap[src]===edgeIndex&&nodeMap[edge]===remainingEdges$jscomp$0||nodeMap[src]===remainingEdges$jscomp$0&&nodeMap[edge]===edgeIndex)&&remainingEdges.splice(i,1)}for(i=0;i<remainingEdges.length;i++)src=remainingEdges[i],src[1]===remainingEdges$jscomp$0?(remainingEdges[i]=src.slice(),remainingEdges[i][1]=edgeIndex):src[2]===remainingEdges$jscomp$0&&
(remainingEdges[i]=src.slice(),remainingEdges[i][2]=edgeIndex);for(i=0;i<nodeMap.length;i++)nodeMap[i]===remainingEdges$jscomp$0&&(nodeMap[i]=edgeIndex);remainingEdges$jscomp$0=remainingEdges;size--}return remainingEdges$jscomp$0},modelToRenderedPosition=function(p,zoom,pan){return{x:p.x*zoom+pan.x,y:p.y*zoom+pan.y}},array2point=function(arr){return{x:arr[0],y:arr[1]}},min$jscomp$0=function(arr){for(var end=2<arguments.length&&void 0!==arguments[2]?arguments[2]:arr.length,min=Infinity,i=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0;i<end;i++){var val=arr[i];isFinite(val)&&(min=Math.min(val,min))}return min},max=function(arr){for(var end=2<arguments.length&&void 0!==arguments[2]?arguments[2]:arr.length,max=-Infinity,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;i<end;i++){var val=arr[i];isFinite(val)&&(max=Math.max(val,max))}return max},mean=function(arr){for(var end=2<arguments.length&&void 0!==arguments[2]?arguments[2]:arr.length,total=0,n=0,i=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:0;i<end;i++){var val=arr[i];isFinite(val)&&(total+=val,n++)}return total/n},median=function(arr){var begin=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,end=2<arguments.length&&void 0!==arguments[2]?arguments[2]:arr.length,sort=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0,includeHoles=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!0;(3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)?arr=arr.slice(begin,end):(end<arr.length&&arr.splice(end,arr.length-
end),0<begin&&arr.splice(0,begin));begin=0;for(end=arr.length-1;0<=end;end--){var v=arr[end];includeHoles?isFinite(v)||(arr[end]=-Infinity,begin++):arr.splice(end,1)}sort&&arr.sort(function(a,b){return a-b});sort=arr.length;includeHoles=Math.floor(sort/2);return 0!==sort%2?arr[includeHoles+1+begin]:(arr[includeHoles-1+begin]+arr[includeHoles+begin])/2},log2=Math.log2||function(n){return Math.log(n)/Math.log(2)},dist=function(p1,p2){return Math.sqrt(sqdist(p1,p2))},sqdist=function(p1,p2){var dx=p2.x-
p1.x;p1=p2.y-p1.y;return dx*dx+p1*p1},inPlaceSumNormalize=function(v){for(var length=v.length,total=0,i=0;i<length;i++)total+=v[i];for(i=0;i<length;i++)v[i]/=total;return v},qbezierAt=function(p0,p1,p2,t){return(1-t)*(1-t)*p0+2*(1-t)*t*p1+t*t*p2},qbezierPtAt=function(p0,p1,p2,t){return{x:qbezierAt(p0.x,p1.x,p2.x,t),y:qbezierAt(p0.y,p1.y,p2.y,t)}},bound=function(min,val,max){return Math.max(min,Math.min(max,val))},makeBoundingBox=function(bb){if(null==bb)return{x1:Infinity,y1:Infinity,x2:-Infinity,
y2:-Infinity,w:0,h:0};if(null!=bb.x1&&null!=bb.y1){if(null!=bb.x2&&null!=bb.y2&&bb.x2>=bb.x1&&bb.y2>=bb.y1)return{x1:bb.x1,y1:bb.y1,x2:bb.x2,y2:bb.y2,w:bb.x2-bb.x1,h:bb.y2-bb.y1};if(null!=bb.w&&null!=bb.h&&0<=bb.w&&0<=bb.h)return{x1:bb.x1,y1:bb.y1,x2:bb.x1+bb.w,y2:bb.y1+bb.h,w:bb.w,h:bb.h}}},copyBoundingBox=function(bb){return{x1:bb.x1,x2:bb.x2,w:bb.w,y1:bb.y1,y2:bb.y2,h:bb.h}},clearBoundingBox=function(bb){bb.x1=Infinity;bb.y1=Infinity;bb.x2=-Infinity;bb.y2=-Infinity;bb.w=0;bb.h=0},expandBoundingBox=
function(bb){var padding=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;bb.x1-=padding;bb.x2+=padding;bb.y1-=padding;bb.y2+=padding;bb.w=bb.x2-bb.x1;bb.h=bb.y2-bb.y1;return bb},expandBoundingBoxSides=function(bb){var padding=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0],right,bottom,left;if(1===padding.length)var top=right=bottom=left=padding[0];else 2===padding.length?(top=bottom=padding[0],left=right=padding[1]):4===padding.length&&(padding=_slicedToArray(padding,4),top=padding[0],
right=padding[1],bottom=padding[2],left=padding[3]);bb.x1-=left;bb.x2+=right;bb.y1-=top;bb.y2+=bottom;bb.w=bb.x2-bb.x1;bb.h=bb.y2-bb.y1;return bb},assignBoundingBox=function(bb1,bb2){bb1.x1=bb2.x1;bb1.y1=bb2.y1;bb1.x2=bb2.x2;bb1.y2=bb2.y2;bb1.w=bb1.x2-bb1.x1;bb1.h=bb1.y2-bb1.y1},boundingBoxesIntersect=function(bb1,bb2){return bb1.x1>bb2.x2||bb2.x1>bb1.x2||bb1.x2<bb2.x1||bb2.x2<bb1.x1||bb1.y2<bb2.y1||bb2.y2<bb1.y1||bb1.y1>bb2.y2||bb2.y1>bb1.y2?!1:!0},inBoundingBox=function(bb,x,y){return bb.x1<=x&&
x<=bb.x2&&bb.y1<=y&&y<=bb.y2},boundingBoxInBoundingBox=function(bb1,bb2){return inBoundingBox(bb1,bb2.x1,bb2.y1)&&inBoundingBox(bb1,bb2.x2,bb2.y2)},roundRectangleIntersectLine=function(x,y,nodeX,nodeY,width,height,padding){var cornerRadius=Math.min(width/4,height/4,8);width/=2;height/=2;var straightLineIntersections=nodeY-height-padding;straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,nodeX-width+cornerRadius-padding,straightLineIntersections,nodeX+width-cornerRadius+padding,straightLineIntersections,
!1);if(0<straightLineIntersections.length)return straightLineIntersections;straightLineIntersections=nodeX+width+padding;straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,straightLineIntersections,nodeY-height+cornerRadius-padding,straightLineIntersections,nodeY+height-cornerRadius+padding,!1);if(0<straightLineIntersections.length)return straightLineIntersections;straightLineIntersections=nodeY+height+padding;straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,nodeX-width+
cornerRadius-padding,straightLineIntersections,nodeX+width-cornerRadius+padding,straightLineIntersections,!1);if(0<straightLineIntersections.length)return straightLineIntersections;straightLineIntersections=nodeX-width-padding;straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,straightLineIntersections,nodeY-height+cornerRadius-padding,straightLineIntersections,nodeY+height-cornerRadius+padding,!1);if(0<straightLineIntersections.length)return straightLineIntersections;var topLeftCenterX=
nodeX-width+cornerRadius,topLeftCenterY=nodeY-height+cornerRadius;straightLineIntersections=intersectLineCircle(x,y,nodeX,nodeY,topLeftCenterX,topLeftCenterY,cornerRadius+padding);if(0<straightLineIntersections.length&&straightLineIntersections[0]<=topLeftCenterX&&straightLineIntersections[1]<=topLeftCenterY)return[straightLineIntersections[0],straightLineIntersections[1]];topLeftCenterX=nodeX+width-cornerRadius;topLeftCenterY=nodeY-height+cornerRadius;straightLineIntersections=intersectLineCircle(x,
y,nodeX,nodeY,topLeftCenterX,topLeftCenterY,cornerRadius+padding);if(0<straightLineIntersections.length&&straightLineIntersections[0]>=topLeftCenterX&&straightLineIntersections[1]<=topLeftCenterY)return[straightLineIntersections[0],straightLineIntersections[1]];topLeftCenterX=nodeX+width-cornerRadius;topLeftCenterY=nodeY+height-cornerRadius;straightLineIntersections=intersectLineCircle(x,y,nodeX,nodeY,topLeftCenterX,topLeftCenterY,cornerRadius+padding);if(0<straightLineIntersections.length&&straightLineIntersections[0]>=
topLeftCenterX&&straightLineIntersections[1]>=topLeftCenterY)return[straightLineIntersections[0],straightLineIntersections[1]];width=nodeX-width+cornerRadius;height=nodeY+height-cornerRadius;straightLineIntersections=intersectLineCircle(x,y,nodeX,nodeY,width,height,cornerRadius+padding);return 0<straightLineIntersections.length&&straightLineIntersections[0]<=width&&straightLineIntersections[1]>=height?[straightLineIntersections[0],straightLineIntersections[1]]:[]},solveQuadratic=function(a,b,c,val){c=
b*b-4*a*(c-val);if(0>c)return[];c=Math.sqrt(c);a*=2;return[(-b+c)/a,(-b-c)/a]},pointInsidePolygonPoints=function(x,y,points){for(var x1,y1,x2,y2,up=0,i=0;i<points.length/2;i++)if(x1=points[2*i],y1=points[2*i+1],i+1<points.length/2?(x2=points[2*(i+1)],y2=points[2*(i+1)+1]):(x2=points[2*(i+1-points.length/2)],y2=points[2*(i+1-points.length/2)+1]),x1!=x||x2!=x)if(x1>=x&&x>=x2||x1<=x&&x<=x2)x1=(x-x1)/(x2-x1)*(y2-y1)+y1,x1>y&&up++;return 0===up%2?!1:!0},pointInsidePolygon=function(x,y,basePoints,centerX,
centerY,width,height,direction,padding){var transformedPoints=Array(basePoints.length);if(null!=direction[0]){var angle=Math.atan(direction[1]/direction[0]);angle=0>direction[0]?angle+Math.PI/2:-angle-Math.PI/2}else angle=direction;direction=Math.cos(-angle);angle=Math.sin(-angle);for(var i=0;i<transformedPoints.length/2;i++)transformedPoints[2*i]=width/2*(basePoints[2*i]*direction-basePoints[2*i+1]*angle),transformedPoints[2*i+1]=height/2*(basePoints[2*i+1]*direction+basePoints[2*i]*angle),transformedPoints[2*
i]+=centerX,transformedPoints[2*i+1]+=centerY;0<padding?(basePoints=expandPolygon(transformedPoints,-padding),basePoints=joinLines(basePoints)):basePoints=transformedPoints;return pointInsidePolygonPoints(x,y,basePoints)},joinLines=function(lineSet){for(var vertices=Array(lineSet.length/2),currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY,nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY,i=0;i<lineSet.length/4;i++)currentLineStartX=lineSet[4*i],currentLineStartY=lineSet[4*
i+1],currentLineEndX=lineSet[4*i+2],currentLineEndY=lineSet[4*i+3],i<lineSet.length/4-1?(nextLineStartX=lineSet[4*(i+1)],nextLineStartY=lineSet[4*(i+1)+1],nextLineEndX=lineSet[4*(i+1)+2],nextLineEndY=lineSet[4*(i+1)+3]):(nextLineStartX=lineSet[0],nextLineStartY=lineSet[1],nextLineEndX=lineSet[2],nextLineEndY=lineSet[3]),currentLineStartX=finiteLinesIntersect(currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY,nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY,!0),vertices[2*i]=
currentLineStartX[0],vertices[2*i+1]=currentLineStartX[1];return vertices},expandPolygon=function(points,pad){for(var expandedLineSet=Array(2*points.length),currentPointX,currentPointY,nextPointX,nextPointY,i=0;i<points.length/2;i++){currentPointX=points[2*i];currentPointY=points[2*i+1];i<points.length/2-1?(nextPointX=points[2*(i+1)],nextPointY=points[2*(i+1)+1]):(nextPointX=points[0],nextPointY=points[1]);var offsetX=nextPointY-currentPointY,offsetY=-(nextPointX-currentPointX),offsetLength=Math.sqrt(offsetX*
offsetX+offsetY*offsetY);offsetX/=offsetLength;offsetY/=offsetLength;expandedLineSet[4*i]=currentPointX+offsetX*pad;expandedLineSet[4*i+1]=currentPointY+offsetY*pad;expandedLineSet[4*i+2]=nextPointX+offsetX*pad;expandedLineSet[4*i+3]=nextPointY+offsetY*pad}return expandedLineSet},checkInEllipse=function(x,y,width,height,centerX,centerY,padding){x=(x-centerX)/(width/2+padding);y=(y-centerY)/(height/2+padding);return 1>=x*x+y*y},intersectLineCircle=function(x1,y1,x2,y2,centerX,centerY,radius){x2=[x2-
x1,y2-y1];y2=[x1-centerX,y1-centerY];centerX=x2[0]*x2[0]+x2[1]*x2[1];centerY=2*(y2[0]*x2[0]+y2[1]*x2[1]);y2=centerY*centerY-4*centerX*(y2[0]*y2[0]+y2[1]*y2[1]-radius*radius);if(0>y2)return[];radius=(-centerY+Math.sqrt(y2))/(2*centerX);centerY=(-centerY-Math.sqrt(y2))/(2*centerX);centerX=Math.min(radius,centerY);centerY=Math.max(radius,centerY);radius=[];0<=centerX&&1>=centerX&&radius.push(centerX);0<=centerY&&1>=centerY&&radius.push(centerY);if(0===radius.length)return[];centerX=radius[0]*x2[0]+x1;
centerY=radius[0]*x2[1]+y1;return 1<radius.length?radius[0]==radius[1]?[centerX,centerY]:[centerX,centerY,radius[1]*x2[0]+x1,radius[1]*x2[1]+y1]:[centerX,centerY]},midOfThree=function(a,b,c){return b<=a&&a<=c||c<=a&&a<=b?a:a<=b&&b<=c||c<=b&&b<=a?b:c},finiteLinesIntersect=function(x1,y1,x2,y2,x3,y3,x4,y4,infiniteLines){var dx13=x1-x3,dx21=x2-x1,dx43=x4-x3,dy13=y1-y3,dy21=y2-y1,dy43=y4-y3,ua_t=dx43*dy13-dy43*dx13;dx13=dx21*dy13-dy21*dx13;dx43=dy43*dx21-dx43*dy21;return 0!==dx43?(x2=ua_t/dx43,y2=dx13/
dx43,-.001<=x2&&1.001>=x2&&-.001<=y2&&1.001>=y2?[x1+x2*dx21,y1+x2*dy21]:infiniteLines?[x1+x2*dx21,y1+x2*dy21]:[]):0===ua_t||0===dx13?midOfThree(x1,x2,x4)===x4?[x4,y4]:midOfThree(x1,x2,x3)===x3?[x3,y3]:midOfThree(x3,x4,x2)===x2?[x2,y2]:[]:[]},polygonIntersectLine=function(x,y,basePoints,centerX,centerY,width,height,padding){var intersections=[],transformedPoints=Array(basePoints.length),doTransform=!0;null==width&&(doTransform=!1);if(doTransform){for(doTransform=0;doTransform<transformedPoints.length/
2;doTransform++)transformedPoints[2*doTransform]=basePoints[2*doTransform]*width+centerX,transformedPoints[2*doTransform+1]=basePoints[2*doTransform+1]*height+centerY;0<padding?(basePoints=expandPolygon(transformedPoints,-padding),basePoints=joinLines(basePoints)):basePoints=transformedPoints}for(width=0;width<basePoints.length/2;width++)height=basePoints[2*width],padding=basePoints[2*width+1],width<basePoints.length/2-1?(transformedPoints=basePoints[2*(width+1)],doTransform=basePoints[2*(width+1)+
1]):(transformedPoints=basePoints[0],doTransform=basePoints[1]),height=finiteLinesIntersect(x,y,centerX,centerY,height,padding,transformedPoints,doTransform),0!==height.length&&intersections.push(height[0],height[1]);return intersections},shortenIntersection=function(intersection,offset,amount){intersection=[intersection[0]-offset[0],intersection[1]-offset[1]];var length=Math.sqrt(intersection[0]*intersection[0]+intersection[1]*intersection[1]);amount=(length-amount)/length;0>amount&&(amount=1E-5);
return[offset[0]+amount*intersection[0],offset[1]+amount*intersection[1]]},generateUnitNgonPointsFitToSquare=function(sides,rotationRadians){sides=generateUnitNgonPoints(sides,rotationRadians);return sides=fitPolygonToSquare(sides)},fitPolygonToSquare=function(points){for(var x,y,sides=points.length/2,minX=Infinity,minY=Infinity,maxX=-Infinity,maxY=-Infinity,i=0;i<sides;i++)x=points[2*i],y=points[2*i+1],minX=Math.min(minX,x),maxX=Math.max(maxX,x),minY=Math.min(minY,y),maxY=Math.max(maxY,y);i=2/(maxX-
minX);for(var sy=2/(maxY-minY),_i5=0;_i5<sides;_i5++)x=points[2*_i5]*=i,y=points[2*_i5+1]*=sy,minX=Math.min(minX,x),maxX=Math.max(maxX,x),minY=Math.min(minY,y),maxY=Math.max(maxY,y);if(-1>minY)for(x=0;x<sides;x++)points[2*x+1]+=-1-minY;return points},generateUnitNgonPoints=function(sides,rotationRadians){var increment=1/sides*2*Math.PI,startAngle=0===sides%2?Math.PI/2+increment/2:Math.PI/2;startAngle+=rotationRadians;rotationRadians=Array(2*sides);for(var currentAngle,i=0;i<sides;i++)currentAngle=
i*increment+startAngle,rotationRadians[2*i]=Math.cos(currentAngle),rotationRadians[2*i+1]=Math.sin(-currentAngle);return rotationRadians},getBarrelCurveConstants=function(width,height){return{heightOffset:Math.min(15,.05*height),widthOffset:Math.min(100,.25*width),ctrlPtOffsetPct:.05}},pageRankDefaults=defaults$g({dampingFactor:.8,precision:1E-6,iterations:200,weight:function(edge){return 1}}),defaults$f=defaults$g({root:null,weight:function(edge){return 1},directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:function(options){options=
defaults$f(options);var cy=this.cy(),nodes=this.nodes(),numNodes=nodes.length;if(options.directed){for(var indegrees={},outdegrees={},maxIndegree=0,maxOutdegree=0,_i=0;_i<numNodes;_i++){var _node=nodes[_i],id=_node.id();options.root=_node;_node=this.degreeCentrality(options);maxIndegree<_node.indegree&&(maxIndegree=_node.indegree);maxOutdegree<_node.outdegree&&(maxOutdegree=_node.outdegree);indegrees[id]=_node.indegree;outdegrees[id]=_node.outdegree}return{indegree:function(node){if(0==maxIndegree)return 0;
string$jscomp$0(node)&&(node=cy.filter(node));return indegrees[node.id()]/maxIndegree},outdegree:function(node){if(0===maxOutdegree)return 0;string$jscomp$0(node)&&(node=cy.filter(node));return outdegrees[node.id()]/maxOutdegree}}}var degrees={},maxDegree=0;for(_i=0;_i<numNodes;_i++)id=nodes[_i],options.root=id,_node=this.degreeCentrality(options),maxDegree<_node.degree&&(maxDegree=_node.degree),degrees[id.id()]=_node.degree;return{degree:function(node){if(0===maxDegree)return 0;string$jscomp$0(node)&&
(node=cy.filter(node));return degrees[node.id()]/maxDegree}}},degreeCentrality:function(options){options=defaults$f(options);var cy=this.cy(),callingEles=this,_options=options,root=_options.root;options=_options.weight;var directed=_options.directed;_options=_options.alpha;root=cy.collection(root)[0];if(directed){directed=root.connectedEdges();cy=directed.filter(function(edge){return edge.target().same(root)&&callingEles.has(edge)});directed=directed.filter(function(edge){return edge.source().same(root)&&
callingEles.has(edge)});for(var k_in=cy.length,k_out=directed.length,s_in=0,s_out=0,_i2=0;_i2<cy.length;_i2++)s_in+=options(cy[_i2]);for(cy=0;cy<directed.length;cy++)s_out+=options(directed[cy]);return{indegree:Math.pow(k_in,1-_options)*Math.pow(s_in,_options),outdegree:Math.pow(k_out,1-_options)*Math.pow(s_out,_options)}}cy=root.connectedEdges().intersection(callingEles);directed=cy.length;for(k_out=k_in=0;k_out<cy.length;k_out++)k_in+=options(cy[k_out]);return{degree:Math.pow(directed,1-_options)*
Math.pow(k_in,_options)}}};elesfn$n.dc=elesfn$n.degreeCentrality;elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized;var defaults$e=defaults$g({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:function(options){var _defaults=defaults$e(options);options=_defaults.harmonic;var weight=_defaults.weight,directed=_defaults.directed,cy=this.cy(),closenesses={},maxCloseness=0;_defaults=this.nodes();weight=this.floydWarshall({weight,
directed});for(directed=0;directed<_defaults.length;directed++){for(var currCloseness=0,node_i=_defaults[directed],j=0;j<_defaults.length;j++)if(directed!==j){var d=weight.distance(node_i,_defaults[j]);currCloseness=options?currCloseness+1/d:currCloseness+d}options||(currCloseness=1/currCloseness);maxCloseness<currCloseness&&(maxCloseness=currCloseness);closenesses[node_i.id()]=currCloseness}return{closeness:function(node){if(0==maxCloseness)return 0;node=string$jscomp$0(node)?cy.filter(node)[0].id():
node.id();return closenesses[node]/maxCloseness}}},closenessCentrality:function(options){var _defaults2=defaults$e(options);options=_defaults2.root;var weight=_defaults2.weight,directed=_defaults2.directed;_defaults2=_defaults2.harmonic;options=this.filter(options)[0];weight=this.dijkstra({root:options,weight,directed});directed=0;for(var nodes=this.nodes(),i=0;i<nodes.length;i++){var n=nodes[i];n.same(options)||(n=weight.distanceTo(n),directed=_defaults2?directed+1/n:directed+n)}return _defaults2?
directed:1/directed}};elesfn$m.cc=elesfn$m.closenessCentrality;elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized;var defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:function(options){var _defaults=defaults$d(options);options=_defaults.directed;var weight=_defaults.weight,weighted=null!=weight,cy=this.cy(),V=this.nodes(),A={},_C={},max=0,C={set:function(key,val){_C[key]=val;val>max&&(max=val)},get:function(key){return _C[key]}};
for(_defaults=0;_defaults<V.length;_defaults++){var v=V[_defaults],vid=v.id();A[vid]=options?v.outgoers().nodes():v.openNeighborhood().nodes();C.set(vid,0)}options=function(s){for(var sid=V[s].id(),S=[],P={},g={},d={},Q=new Heap__default["default"](function(a,b){return d[a]-d[b]}),_i=0;_i<V.length;_i++){var _vid=V[_i].id();P[_vid]=[];g[_vid]=0;d[_vid]=Infinity}g[sid]=1;d[sid]=0;for(Q.push(sid);!Q.empty();)if(sid=Q.pop(),S.push(sid),weighted)for(_i=0;_i<A[sid].length;_i++){_vid=A[sid][_i];var vEle=
cy.getElementById(sid),edge=void 0;edge=0<vEle.edgesTo(_vid).length?vEle.edgesTo(_vid)[0]:_vid.edgesTo(vEle)[0];vEle=weight(edge);_vid=_vid.id();d[_vid]>d[sid]+vEle&&(d[_vid]=d[sid]+vEle,0>Q.nodes.indexOf(_vid)?Q.push(_vid):Q.updateItem(_vid),g[_vid]=0,P[_vid]=[]);d[_vid]==d[sid]+vEle&&(g[_vid]+=g[sid],P[_vid].push(sid))}else for(_i=0;_i<A[sid].length;_i++)_vid=A[sid][_i].id(),Infinity==d[_vid]&&(Q.push(_vid),d[_vid]=d[sid]+1),d[_vid]==d[sid]+1&&(g[_vid]+=g[sid],P[_vid].push(sid));Q={};for(sid=0;sid<
V.length;sid++)Q[V[sid].id()]=0;for(;0<S.length;){sid=S.pop();for(_i=0;_i<P[sid].length;_i++)_vid=P[sid][_i],Q[_vid]+=g[_vid]/g[sid]*(1+Q[sid]);sid!=V[s].id()&&C.set(sid,C.get(sid)+Q[sid])}};for(_defaults=0;_defaults<V.length;_defaults++)options(_defaults);options={betweenness:function(node){node=cy.collection(node).id();return C.get(node)},betweennessNormalized:function(node){if(0==max)return 0;node=cy.collection(node).id();return C.get(node)/max}};options.betweennessNormalised=options.betweennessNormalized;
return options}};elesfn$l.bc=elesfn$l.betweennessCentrality;var defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(edge){return 1}]}),normalize=function(M,n){for(var sum,col=0;col<n;col++){for(var row=sum=0;row<n;row++)sum+=M[row*n+col];for(row=0;row<n;row++)M[row*n+col]/=sum}},markovClustering=function(options){var nodes=this.nodes(),edges=this.edges(),cy=this.cy(),opts=defaults$c(options),id2position={};for(options=0;options<nodes.length;options++)id2position[nodes[options].id()]=
options;options=nodes.length;var n2=options*options,M=Array(n2),_M;for(_M=0;_M<n2;_M++)M[_M]=0;for(_M=0;_M<edges.length;_M++){for(var edge=edges[_M],_i2=id2position[edge.source().id()],j=id2position[edge.target().id()],attributes=opts.attributes,total=0,i=0;i<attributes.length;i++)total+=attributes[i](edge);edge=total;M[_i2*options+j]+=edge;M[j*options+_i2]+=edge}edges=M;id2position=opts.multFactor;for(_M=0;_M<options;_M++)edges[_M*options+_M]=id2position;normalize(M,options);edges=!0;for(id2position=
0;edges&&id2position<opts.maxIterations;){edges=!1;edge=M;M=options;_M=opts.expandFactor;_i2=edge.slice(0);for(j=1;j<_M;j++){attributes=_i2;total=M;i=Array(total*total);for(var i$jscomp$0=0;i$jscomp$0<total;i$jscomp$0++){for(var j$jscomp$0=0;j$jscomp$0<total;j$jscomp$0++)i[i$jscomp$0*total+j$jscomp$0]=0;for(j$jscomp$0=0;j$jscomp$0<total;j$jscomp$0++)for(var _j=0;_j<total;_j++)i[i$jscomp$0*total+_j]+=edge[i$jscomp$0*total+j$jscomp$0]*attributes[j$jscomp$0*total+_j]}edge=i}M=_M=edge;_i2=options;j=opts.inflateFactor;
edge=Array(_i2*_i2);for(attributes=0;attributes<_i2*_i2;attributes++)edge[attributes]=Math.pow(M[attributes],j);normalize(edge,_i2);M=edge;a:{for(_i2=0;_i2<n2;_i2++)if(Math.round(M[_i2]*Math.pow(10,4))/Math.pow(10,4)!==Math.round(_M[_i2]*Math.pow(10,4))/Math.pow(10,4)){_M=!1;break a}_M=!0}_M||(edges=!0);id2position++}opts=M;n2=[];for(edges=0;edges<options;edges++){id2position=[];for(M=0;M<options;M++)0<Math.round(1E3*opts[edges*options+M])/1E3&&id2position.push(nodes[M]);0!==id2position.length&&n2.push(cy.collection(id2position))}nodes=
n2;for(cy=0;cy<nodes.length;cy++)for(options=0;options<nodes.length;options++){if(opts=cy!=options)a:{opts=nodes[cy];n2=nodes[options];for(edges=0;edges<opts.length;edges++)if(!n2[edges]||opts[edges].id()!==n2[edges].id()){opts=!1;break a}opts=!0}opts&&nodes.splice(options,1)}return nodes},markovClustering$1={markovClustering,mcl:markovClustering},identity=function(x){return x},addAbsDiff=function(total,p,q){return total+Math.abs(q-p)},addSquaredDiff=function(total,p,q){return total+Math.pow(q-p,
2)},sqrt=function(x){return Math.sqrt(x)},maxAbsDiff=function(currentMax,p,q){return Math.max(currentMax,Math.abs(q-p))},getDistance=function(length,getP,getQ,init,visit){for(var post=5<arguments.length&&void 0!==arguments[5]?arguments[5]:identity,ret=init,p,q,dim=0;dim<length;dim++)p=getP(dim),q=getQ(dim),ret=visit(ret,p,q);return post(ret)},distances={euclidean:function(length,getP,getQ){return 2<=length?getDistance(length,getP,getQ,0,addSquaredDiff,sqrt):getDistance(length,getP,getQ,0,addAbsDiff)},
squaredEuclidean:function(length,getP,getQ){return getDistance(length,getP,getQ,0,addSquaredDiff)},manhattan:function(length,getP,getQ){return getDistance(length,getP,getQ,0,addAbsDiff)},max:function(length,getP,getQ){return getDistance(length,getP,getQ,-Infinity,maxAbsDiff)}};distances["squared-euclidean"]=distances.squaredEuclidean;distances.squaredeuclidean=distances.squaredEuclidean;var defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1E-4,distance:"euclidean",maxIterations:10,attributes:[],
testMode:!1,testCentroids:null}),getDist=function(type,node,centroid,attributes,mode){return clusteringDistance(type,attributes.length,"kMedoids"!==mode?function(i){return centroid[i]}:function(i){return attributes[i](centroid)},function(i){return attributes[i](node)},centroid,node)},randomCentroids=function(nodes,k,attributes){for(var ndim=attributes.length,min=Array(ndim),max=Array(ndim),centroids=Array(k),i=0;i<ndim;i++)min[i]=nodes.min(attributes[i]).value,max[i]=nodes.max(attributes[i]).value;
for(attributes=0;attributes<k;attributes++){nodes=[];for(i=0;i<ndim;i++)nodes[i]=Math.random()*(max[i]-min[i])+min[i];centroids[attributes]=nodes}return centroids},classify=function(node,centroids,distance,attributes,type){for(var min=Infinity,index=0,i=0;i<centroids.length;i++){var dist=getDist(distance,node,centroids[i],attributes,type);dist<min&&(min=dist,index=i)}return index},buildCluster=function(centroid,nodes,assignment){for(var cluster=[],node,n=0;n<nodes.length;n++)node=nodes[n],assignment[node.id()]===
centroid&&cluster.push(node);return cluster},seenBefore=function(node,medoids,n){for(var i=0;i<n;i++)if(node===medoids[i])return!0;return!1},randomMedoids=function(nodes,k){var medoids=Array(k);if(50>nodes.length)for(var i=0;i<k;i++){for(var node=nodes[Math.floor(Math.random()*nodes.length)];seenBefore(node,medoids,i);)node=nodes[Math.floor(Math.random()*nodes.length)];medoids[i]=node}else for(i=0;i<k;i++)medoids[i]=nodes[Math.floor(Math.random()*nodes.length)];return medoids},findCost=function(potentialNewMedoid,
cluster,attributes){for(var cost=0,n=0;n<cluster.length;n++)cost+=getDist("manhattan",cluster[n],potentialNewMedoid,attributes,"kMedoids");return cost},fuzzyCMeans=function(options){var cy=this.cy(),nodes=this.nodes(),opts=defaults$b(options),centroids,weight;var _U=Array(nodes.length);for(options=0;options<nodes.length;options++)_U[options]=Array(opts.k);options=Array(nodes.length);for(centroids=0;centroids<nodes.length;centroids++)options[centroids]=Array(opts.k);for(centroids=0;centroids<nodes.length;centroids++){for(var j=
weight=0;j<opts.k;j++)options[centroids][j]=Math.random(),weight+=options[centroids][j];for(j=0;j<opts.k;j++)options[centroids][j]/=weight}centroids=Array(opts.k);for(weight=0;weight<opts.k;weight++)centroids[weight]=Array(opts.attributes.length);weight=Array(nodes.length);for(j=0;j<nodes.length;j++)weight[j]=Array(opts.k);j=!0;for(var iterations=0;j&&iterations<opts.maxIterations;){j=!1;var numerator,centroids$jscomp$0=centroids,nodes$jscomp$0=nodes;var denominator=options;var weight$jscomp$0=weight,
opts$jscomp$0=opts;for(numerator=0;numerator<nodes$jscomp$0.length;numerator++)for(var c=0;c<centroids$jscomp$0.length;c++)weight$jscomp$0[numerator][c]=Math.pow(denominator[numerator][c],opts$jscomp$0.m);for(c=0;c<centroids$jscomp$0.length;c++)for(var dim=0;dim<opts$jscomp$0.attributes.length;dim++){for(var _n2=denominator=numerator=0;_n2<nodes$jscomp$0.length;_n2++)numerator+=weight$jscomp$0[_n2][c]*opts$jscomp$0.attributes[dim](nodes$jscomp$0[_n2]),denominator+=weight$jscomp$0[_n2][c];centroids$jscomp$0[c][dim]=
numerator/denominator}centroids$jscomp$0=options;denominator=_U;nodes$jscomp$0=centroids;weight$jscomp$0=nodes;opts$jscomp$0=opts;for(numerator=0;numerator<centroids$jscomp$0.length;numerator++)denominator[numerator]=centroids$jscomp$0[numerator].slice();dim=2/(opts$jscomp$0.m-1);for(_n2=0;_n2<nodes$jscomp$0.length;_n2++)for(var n=0;n<weight$jscomp$0.length;n++){for(var k=c=0;k<nodes$jscomp$0.length;k++)numerator=getDist(opts$jscomp$0.distance,weight$jscomp$0[n],nodes$jscomp$0[_n2],opts$jscomp$0.attributes,
"cmeans"),denominator=getDist(opts$jscomp$0.distance,weight$jscomp$0[n],nodes$jscomp$0[k],opts$jscomp$0.attributes,"cmeans"),c+=Math.pow(numerator/denominator,dim);centroids$jscomp$0[n][_n2]=1/c}a:{for(centroids$jscomp$0=0;centroids$jscomp$0<options.length;centroids$jscomp$0++)for(nodes$jscomp$0=0;nodes$jscomp$0<options[centroids$jscomp$0].length;nodes$jscomp$0++)if(Math.abs(options[centroids$jscomp$0][nodes$jscomp$0]-_U[centroids$jscomp$0][nodes$jscomp$0])>opts.sensitivityThreshold){centroids$jscomp$0=
!1;break a}centroids$jscomp$0=!0}centroids$jscomp$0||(j=!0);iterations++}opts=Array(opts.k);for(_U=0;_U<opts.length;_U++)opts[_U]=[];for(weight=0;weight<options.length;weight++){_U=-Infinity;centroids=-1;for(j=0;j<options[0].length;j++)options[weight][j]>_U&&(_U=options[weight][j],centroids=j);opts[centroids].push(nodes[weight])}for(nodes=0;nodes<opts.length;nodes++)opts[nodes]=cy.collection(opts[nodes]);return{clusters:opts,degreeOfMembership:options}},kClustering={kMeans:function(options){var cy=
this.cy(),nodes=this.nodes(),opts=defaults$b(options),clusters=Array(opts.k),assignment={};if(opts.testMode)if("number"===typeof opts.testCentroids){opts.testCentroids;var centroids=randomCentroids(nodes,opts.k,opts.attributes)}else centroids="object"===_typeof(opts.testCentroids)?opts.testCentroids:randomCentroids(nodes,opts.k,opts.attributes);else centroids=randomCentroids(nodes,opts.k,opts.attributes);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;){for(isStillMoving=
0;isStillMoving<nodes.length;isStillMoving++)options=nodes[isStillMoving],assignment[options.id()]=classify(options,centroids,opts.distance,opts.attributes,"kMeans");isStillMoving=!1;for(var c=0;c<opts.k;c++){var cluster=buildCluster(c,nodes,assignment);if(0!==cluster.length){for(var ndim=opts.attributes.length,centroid=centroids[c],newCentroid=Array(ndim),sum=Array(ndim),d=0;d<ndim;d++){for(var i=sum[d]=0;i<cluster.length;i++)options=cluster[i],sum[d]+=opts.attributes[d](options);newCentroid[d]=
sum[d]/cluster.length;Math.abs(centroid[d]-newCentroid[d])<=opts.sensitivityThreshold||(isStillMoving=!0)}centroids[c]=newCentroid;clusters[c]=cy.collection(cluster)}}iterations++}return clusters},kMedoids:function(options){var cy=this.cy(),nodes=this.nodes();options=defaults$b(options);var clusters=Array(options.k),medoids,assignment={},minCosts=Array(options.k);options.testMode?"number"!==typeof options.testCentroids&&(medoids="object"===_typeof(options.testCentroids)?options.testCentroids:randomMedoids(nodes,
options.k)):medoids=randomMedoids(nodes,options.k);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<options.maxIterations;){for(isStillMoving=0;isStillMoving<nodes.length;isStillMoving++){var node=nodes[isStillMoving];assignment[node.id()]=classify(node,medoids,options.distance,options.attributes,"kMedoids")}isStillMoving=!1;for(var m=0;m<medoids.length;m++){var cluster=buildCluster(m,nodes,assignment);if(0!==cluster.length){minCosts[m]=findCost(medoids[m],cluster,options.attributes);
for(var _n=0;_n<cluster.length;_n++)node=findCost(cluster[_n],cluster,options.attributes),node<minCosts[m]&&(minCosts[m]=node,medoids[m]=cluster[_n],isStillMoving=!0);clusters[m]=cy.collection(cluster)}}iterations++}return clusters},fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:Infinity,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=function(options){options=defaults$a(options);
var preferredAlias=linkageAliases[options.linkage];null!=preferredAlias&&(options.linkage=preferredAlias);return options},mergeClosest=function(clusters,index,dists,mins,opts){for(var minKey=0,min=Infinity,attrs=opts.attributes,getDist=function(n1,n2){return clusteringDistance(opts.distance,attrs.length,function(i){return attrs[i](n1)},function(i){return attrs[i](n2)},n1,n2)},i$jscomp$0=0;i$jscomp$0<clusters.length;i$jscomp$0++){var key=clusters[i$jscomp$0].key,_dist=dists[key][mins[key]];_dist<min&&
(minKey=key,min=_dist)}if("threshold"===opts.mode&&min>=opts.threshold||"dendrogram"===opts.mode&&1===clusters.length)return!1;min=index[minKey];minKey=index[mins[minKey]];i$jscomp$0="dendrogram"===opts.mode?{left:min,right:minKey,key:min.key}:{value:min.value.concat(minKey.value),key:min.key};clusters[min.index]=i$jscomp$0;clusters.splice(minKey.index,1);index[min.key]=i$jscomp$0;for(i$jscomp$0=0;i$jscomp$0<clusters.length;i$jscomp$0++)key=clusters[i$jscomp$0],min.key===key.key?index=Infinity:"min"===
opts.linkage?(index=dists[min.key][key.key],dists[min.key][key.key]>dists[minKey.key][key.key]&&(index=dists[minKey.key][key.key])):"max"===opts.linkage?(index=dists[min.key][key.key],dists[min.key][key.key]<dists[minKey.key][key.key]&&(index=dists[minKey.key][key.key])):index="mean"===opts.linkage?(dists[min.key][key.key]*min.size+dists[minKey.key][key.key]*minKey.size)/(min.size+minKey.size):"dendrogram"===opts.mode?getDist(key.value,min.value):getDist(key.value[0],min.value[0]),dists[min.key][key.key]=
dists[key.key][min.key]=index;for(getDist=0;getDist<clusters.length;getDist++){index=clusters[getDist].key;if(mins[index]===min.key||mins[index]===minKey.key){i$jscomp$0=index;for(key=0;key<clusters.length;key++)_dist=clusters[key].key,dists[index][_dist]<dists[index][i$jscomp$0]&&(i$jscomp$0=_dist);mins[index]=i$jscomp$0}clusters[getDist].index=getDist}min.key=minKey.key=min.index=minKey.index=null;return!0},getAllChildren=function getAllChildren(root,arr,cy){root&&(root.value?arr.push(root.value):
(root.left&&getAllChildren(root.left,arr),root.right&&getAllChildren(root.right,arr)))},buildDendrogram=function buildDendrogram(root,cy){if(!root)return"";if(root.left&&root.right){var leftStr=buildDendrogram(root.left,cy);root=buildDendrogram(root.right,cy);var node=cy.add({group:"nodes",data:{id:leftStr+","+root}});cy.add({group:"edges",data:{source:leftStr,target:node.id()}});cy.add({group:"edges",data:{source:root,target:node.id()}});return node.id()}if(root.value)return root.value.id()},buildClustersFromTree=
function buildClustersFromTree(root,k,cy){if(!root)return[];var left=[],right=[];if(0===k)return root.left&&getAllChildren(root.left,left),root.right&&getAllChildren(root.right,right),root=left.concat(right),[cy.collection(root)];if(1===k){if(root.value)return[cy.collection(root.value)];root.left&&getAllChildren(root.left,left);root.right&&getAllChildren(root.right,right);return[cy.collection(left),cy.collection(right)]}if(root.value)return[cy.collection(root.value)];root.left&&(left=buildClustersFromTree(root.left,
k-1,cy));root.right&&(right=buildClustersFromTree(root.right,k-1,cy));return left.concat(right)},hierarchicalClustering=function(options){var cy=this.cy(),nodes=this.nodes(),opts=setOptions$1(options),attrs=opts.attributes,getDist=function(n1,n2){return clusteringDistance(opts.distance,attrs.length,function(i){return attrs[i](n1)},function(i){return attrs[i](n2)},n1,n2)};options=[];for(var dists=[],mins=[],index=[],n=0;n<nodes.length;n++){var cluster$jscomp$0={value:"dendrogram"===opts.mode?nodes[n]:
[nodes[n]],key:n,index:n};options[n]=cluster$jscomp$0;index[n]=cluster$jscomp$0;dists[n]=[];mins[n]=0}for(nodes=0;nodes<options.length;nodes++)for(n=0;n<=nodes;n++)cluster$jscomp$0=void 0,cluster$jscomp$0="dendrogram"===opts.mode?nodes===n?Infinity:getDist(options[nodes].value,options[n].value):nodes===n?Infinity:getDist(options[nodes].value[0],options[n].value[0]),dists[nodes][n]=cluster$jscomp$0,dists[n][nodes]=cluster$jscomp$0,cluster$jscomp$0<dists[nodes][mins[nodes]]&&(mins[nodes]=n);for(getDist=
mergeClosest(options,index,dists,mins,opts);getDist;)getDist=mergeClosest(options,index,dists,mins,opts);if("dendrogram"===opts.mode){var retClusters=buildClustersFromTree(options[0],opts.dendrogramDepth,cy);opts.addDendrogram&&buildDendrogram(options[0],cy)}else retClusters=Array(options.length),options.forEach(function(cluster,i){cluster.key=cluster.index=null;retClusters[i]=cy.collection(cluster.value)});return retClusters},hierarchicalClustering$1={hierarchicalClustering,hca:hierarchicalClustering},
defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1E3,minIterations:100,attributes:[]}),setOptions=function(options){var dmp=options.damping,pref=options.preference;.5<=dmp&&1>dmp||error("Damping must range on [0.5, 1).  Got: ".concat(dmp));dmp=["median","mean","min","max"];dmp.some(function(v){return v===pref})||number$1(pref)||error("Preference must be one of [".concat(dmp.map(function(p){return"'".concat(p,"'")}).join(", "),"] or a number.  Got: ").concat(pref));
return defaults$9(options)},getSimilarity=function(type,n1,n2,attributes){return-clusteringDistance(type,attributes.length,function(i){return attributes[i](n1)},function(i){return attributes[i](n2)},n1,n2)},assignClusters=function(n,S,exemplars){for(var clusters=[],i=0;i<n;i++){for(var index=-1,max=-Infinity,ei=0;ei<exemplars.length;ei++){var e=exemplars[ei];S[i*n+e]>max&&(index=e,max=S[i*n+e])}0<index&&clusters.push(index)}for(n=0;n<exemplars.length;n++)clusters[exemplars[n]]=exemplars[n];return clusters},
affinityPropagation=function(options){var cy=this.cy(),nodes=this.nodes(),opts=setOptions(options);options={};for(var i=0;i<nodes.length;i++)options[nodes[i].id()]=i;var p,A;i=nodes.length;var n2=i*i;var S=Array(n2);for(p=0;p<n2;p++)S[p]=-Infinity;for(p=0;p<i;p++)for(A=0;A<i;A++)p!==A&&(S[p*i+A]=getSimilarity(opts.distance,nodes[p],nodes[A],opts.attributes));p=opts.preference;p="median"===p?median(S):"mean"===p?mean(S):"min"===p?min$jscomp$0(S):"max"===p?max(S):p;for(A=0;A<i;A++)S[A*i+A]=p;p=Array(n2);
for(A=0;A<n2;A++)p[A]=0;A=Array(n2);for(var _i5=0;_i5<n2;_i5++)A[_i5]=0;n2=Array(i);_i5=Array(i);for(var se=Array(i),_i6=0;_i6<i;_i6++)n2[_i6]=0,_i5[_i6]=0,se[_i6]=0;_i6=Array(i*opts.minIterations);for(var _i7=0;_i7<_i6.length;_i7++)_i6[_i7]=0;for(_i7=0;_i7<opts.maxIterations;_i7++){for(var _i8=0;_i8<i;_i8++){for(var max$jscomp$0=-Infinity,max2=-Infinity,maxI=-1,AS,_j=0;_j<i;_j++)n2[_j]=p[_i8*i+_j],AS=A[_i8*i+_j]+S[_i8*i+_j],AS>=max$jscomp$0?(max2=max$jscomp$0,max$jscomp$0=AS,maxI=_j):AS>max2&&(max2=
AS);for(AS=0;AS<i;AS++)p[_i8*i+AS]=(1-opts.damping)*(S[_i8*i+AS]-max$jscomp$0)+opts.damping*n2[AS];p[_i8*i+maxI]=(1-opts.damping)*(S[_i8*i+maxI]-max2)+opts.damping*n2[maxI]}for(_i8=0;_i8<i;_i8++){for(max2=max$jscomp$0=0;max2<i;max2++)n2[max2]=A[max2*i+_i8],_i5[max2]=Math.max(0,p[max2*i+_i8]),max$jscomp$0+=_i5[max2];max$jscomp$0-=_i5[_i8];_i5[_i8]=p[_i8*i+_i8];max$jscomp$0+=_i5[_i8];for(max2=0;max2<i;max2++)A[max2*i+_i8]=(1-opts.damping)*Math.min(0,max$jscomp$0-_i5[max2])+opts.damping*n2[max2];A[_i8*
i+_i8]=(1-opts.damping)*(max$jscomp$0-_i5[_i8])+opts.damping*n2[_i8]}for(max$jscomp$0=_i8=0;max$jscomp$0<i;max$jscomp$0++)max2=0<A[max$jscomp$0*i+max$jscomp$0]+p[max$jscomp$0*i+max$jscomp$0]?1:0,_i6[_i7%opts.minIterations*i+max$jscomp$0]=max2,_i8+=max2;if(0<_i8&&(_i7>=opts.minIterations-1||_i7==opts.maxIterations-1)){for(max$jscomp$0=_i8=0;max$jscomp$0<i;max$jscomp$0++){for(max2=se[max$jscomp$0]=0;max2<opts.minIterations;max2++)se[max$jscomp$0]+=_i6[max2*i+max$jscomp$0];0!==se[max$jscomp$0]&&se[max$jscomp$0]!==
opts.minIterations||_i8++}if(_i8===i)break}}opts=[];for(n2=0;n2<i;n2++)0<p[n2*i+n2]+A[n2*i+n2]&&opts.push(n2);p=assignClusters(i,S,opts);for(A=0;A<opts.length;A++){n2=[];for(_i5=0;_i5<p.length;_i5++)p[_i5]===opts[A]&&n2.push(_i5);_i5=-1;se=-Infinity;for(_i6=0;_i6<n2.length;_i6++){for(_i8=_i7=0;_i8<n2.length;_i8++)_i7+=S[n2[_i8]*i+n2[_i6]];_i7>se&&(_i5=_i6,se=_i7)}opts[A]=n2[_i5]}S=p=assignClusters(i,S,opts);i={};for(p=0;p<opts.length;p++)i[opts[p]]=[];for(p=0;p<nodes.length;p++)A=options[nodes[p].id()],
A=S[A],null!=A&&i[A].push(nodes[p]);nodes=Array(opts.length);for(options=0;options<opts.length;options++)nodes[options]=cy.collection(i[opts[options]]);return nodes},affinityPropagation$1={affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),hopcroftTarjanBiconnected=function(){var eles=this,nodes={},id$jscomp$0=0,edgeCount=0,components=[],stack=[],visitedEdges={},buildComponent=function(x,y){for(var i=stack.length-1,cutset=[],component=eles.spawn();stack[i].x!=
x||stack[i].y!=y;)cutset.push(stack.pop().edge),i--;cutset.push(stack.pop().edge);cutset.forEach(function(edge$jscomp$0){var connectedNodes=edge$jscomp$0.connectedNodes().intersection(eles);component.merge(edge$jscomp$0);connectedNodes.forEach(function(node){var nodeId=node.id(),connectedEdges=node.connectedEdges().intersection(eles);component.merge(node);nodes[nodeId].cutVertex?component.merge(connectedEdges.filter(function(edge){return edge.isLoop()})):component.merge(connectedEdges)})});components.push(component)},
biconnectedSearch=function biconnectedSearch(root,currentNode,parent){root===parent&&(edgeCount+=1);nodes[currentNode]={id:id$jscomp$0,low:id$jscomp$0++,cutVertex:!1};var edges=eles.getElementById(currentNode).connectedEdges().intersection(eles);if(0===edges.size())components.push(eles.spawn(eles.getElementById(currentNode)));else{var sourceId,targetId,otherNodeId,edgeId;edges.forEach(function(edge){sourceId=edge.source().id();targetId=edge.target().id();otherNodeId=sourceId===currentNode?targetId:
sourceId;otherNodeId!==parent&&(edgeId=edge.id(),visitedEdges[edgeId]||(visitedEdges[edgeId]=!0,stack.push({x:currentNode,y:otherNodeId,edge})),otherNodeId in nodes?nodes[currentNode].low=Math.min(nodes[currentNode].low,nodes[otherNodeId].id):(biconnectedSearch(root,otherNodeId,currentNode),nodes[currentNode].low=Math.min(nodes[currentNode].low,nodes[otherNodeId].low),nodes[currentNode].id<=nodes[otherNodeId].low&&(nodes[currentNode].cutVertex=!0,buildComponent(currentNode,otherNodeId))))})}};eles.forEach(function(ele){ele.isNode()&&
(ele=ele.id(),ele in nodes||(edgeCount=0,biconnectedSearch(ele,ele),nodes[ele].cutVertex=1<edgeCount))});var cutVertices=Object.keys(nodes).filter(function(id){return nodes[id].cutVertex}).map(function(id){return eles.getElementById(id)});return{cut:eles.spawn(cutVertices),components}},tarjanStronglyConnected=function(){var eles=this,nodes={},index=0,components=[],stack=[],cut=eles.spawn(eles),stronglyConnectedSearch=function stronglyConnectedSearch(sourceNodeId){stack.push(sourceNodeId);nodes[sourceNodeId]=
{index,low:index++,explored:!1};eles.getElementById(sourceNodeId).connectedEdges().intersection(eles).forEach(function(edge){edge=edge.target().id();edge!==sourceNodeId&&(edge in nodes||stronglyConnectedSearch(edge),nodes[edge].explored||(nodes[sourceNodeId].low=Math.min(nodes[sourceNodeId].low,nodes[edge].low)))});if(nodes[sourceNodeId].index===nodes[sourceNodeId].low){for(var componentNodes=eles.spawn();;){var nodeId=stack.pop();componentNodes.merge(eles.getElementById(nodeId));nodes[nodeId].low=
nodes[sourceNodeId].index;nodes[nodeId].explored=!0;if(nodeId===sourceNodeId)break}nodeId=componentNodes.edgesWith(componentNodes);componentNodes=componentNodes.merge(nodeId);components.push(componentNodes);cut=cut.difference(componentNodes)}};eles.forEach(function(ele){ele.isNode()&&(ele=ele.id(),ele in nodes||stronglyConnectedSearch(ele))});return{cut,components}},elesfn$j={};[elesfn$v,{dijkstra:function(options){if(!plainObject(options)){var args=arguments;options={root:args[0],weight:args[1],
directed:args[2]}}args=dijkstraDefaults(options);var root=args.root,directed=args.directed,eles=this,weightFn=args.weight;root=string$jscomp$0(root)?this.filter(root)[0]:root[0];var dist={},prev={},knownDist={};args=this.byGroup();var nodes=args.nodes,edges=args.edges;edges.unmergeBy(function(ele){return ele.isLoop()});args=function(node,d){dist[node.id()]=d;Q.updateItem(node)};for(var Q=new Heap__default["default"](function(a,b){return dist[a.id()]-dist[b.id()]}),i=0;i<nodes.length;i++){var node$jscomp$0=
nodes[i];dist[node$jscomp$0.id()]=node$jscomp$0.same(root)?0:Infinity;Q.push(node$jscomp$0)}for(root=function(u,v){u=(directed?u.edgesTo(v):u.edgesWith(v)).intersect(edges);v=Infinity;for(var smallestEdge,_i=0;_i<u.length;_i++){var edge=u[_i],_weight=weightFn(edge);if(_weight<v||!smallestEdge)v=_weight,smallestEdge=edge}return{edge:smallestEdge,dist:v}};0<Q.size();){i=Q.pop();node$jscomp$0=dist[i.id()];var uid$jscomp$0=i.id();knownDist[uid$jscomp$0]=node$jscomp$0;if(Infinity!==node$jscomp$0){uid$jscomp$0=
i.neighborhood().intersect(nodes);for(var _i2=0;_i2<uid$jscomp$0.length;_i2++){var v$jscomp$0=uid$jscomp$0[_i2],vid=v$jscomp$0.id(),vDist=root(i,v$jscomp$0),alt=node$jscomp$0+vDist.dist;alt<dist[v$jscomp$0.id()]&&(args(v$jscomp$0,alt),prev[vid]={node:i,edge:vDist.edge})}}}return{distanceTo:function(node){node=string$jscomp$0(node)?nodes.filter(node)[0]:node[0];return knownDist[node.id()]},pathTo:function(node){var target=string$jscomp$0(node)?nodes.filter(node)[0]:node[0];node=[];var uid=target.id();
if(0<target.length)for(node.unshift(target);prev[uid];)target=prev[uid],node.unshift(target.edge),node.unshift(target.node),target=target.node,uid=target.id();return eles.spawn(node)}}}},{kruskal:function(weightFn){weightFn=weightFn||function(edge){return 1};var _this$byGroup=this.byGroup(),nodes=_this$byGroup.nodes,edges=_this$byGroup.edges,numNodes=nodes.length,forest=Array(numNodes);_this$byGroup=function(ele){for(var i=0;i<forest.length;i++)if(forest[i].has(ele))return i};for(var i$jscomp$0=0;i$jscomp$0<
numNodes;i$jscomp$0++)forest[i$jscomp$0]=this.spawn(nodes[i$jscomp$0]);edges=edges.sort(function(a,b){return weightFn(a)-weightFn(b)});for(numNodes=0;numNodes<edges.length;numNodes++){i$jscomp$0=edges[numNodes];var u=i$jscomp$0.source()[0],v=i$jscomp$0.target()[0];u=_this$byGroup(u);v=_this$byGroup(v);var setU=forest[u],setV=forest[v];u!==v&&(nodes.merge(i$jscomp$0),setU.merge(setV),forest.splice(v,1))}return nodes}},{aStar:function(options){var cy=this.cy();options=aStarDefaults(options);var root=
options.root,goal=options.goal,heuristic=options.heuristic,directed=options.directed,weight=options.weight;root=cy.collection(root)[0];goal=cy.collection(goal)[0];var sid=root.id(),tid=goal.id();cy={};var fScore={},closedSetIds={},openSet=new Heap__default["default"](function(a,b){return fScore[a.id()]-fScore[b.id()]}),openSetIds=new Set$1;options={};var cameFromEdge={},addToOpenSet=function(ele,id){openSet.push(ele);openSetIds.add(id)};addToOpenSet(root,sid);cy[sid]=0;fScore[sid]=heuristic(root);
for(sid=0;0<openSet.size();){var cMin=openSet.pop();root=cMin.id();openSetIds["delete"](root);sid++;if(root===tid){heuristic=[];directed=tid;for(tid=cameFromEdge[directed];;){heuristic.unshift(goal);null!=tid&&heuristic.unshift(tid);goal=options[directed];if(null==goal)break;directed=goal.id();tid=cameFromEdge[directed]}return{found:!0,distance:cy[root],path:this.spawn(heuristic),steps:sid}}closedSetIds[root]=!0;for(var vwEdges=cMin._private.edges,i=0;i<vwEdges.length;i++){var e=vwEdges[i];if(this.hasElementWithId(e.id())&&
(!directed||e.data("source")===root)){var wSrc=e.source(),wTgt=e.target();wSrc=wSrc.id()!==root?wSrc:wTgt;wTgt=wSrc.id();if(this.hasElementWithId(wTgt)&&!closedSetIds[wTgt]){var tempScore=cy[root]+weight(e);openSetIds.has(wTgt)?tempScore<cy[wTgt]&&(cy[wTgt]=tempScore,fScore[wTgt]=tempScore+heuristic(wSrc),options[wTgt]=cMin,cameFromEdge[wTgt]=e):(cy[wTgt]=tempScore,fScore[wTgt]=tempScore+heuristic(wSrc),addToOpenSet(wSrc,wTgt),options[wTgt]=cMin,cameFromEdge[wTgt]=e)}}}}return{found:!1,distance:void 0,
path:void 0,steps:sid}}},{floydWarshall:function(options){var cy=this.cy(),_floydWarshallDefault=floydWarshallDefaults(options);options=_floydWarshallDefault.directed;_floydWarshallDefault=_floydWarshallDefault.weight;var _this$byGroup=this.byGroup(),nodes=_this$byGroup.nodes;_this$byGroup=_this$byGroup.edges;for(var N=nodes.length,Nsq=N*N,dist=Array(Nsq),n=0;n<Nsq;n++){var j=n%N;dist[n]=(n-j)/N===j?0:Infinity}var next=Array(Nsq),edgeNext=Array(Nsq);for(Nsq=0;Nsq<_this$byGroup.length;Nsq++){n=_this$byGroup[Nsq];
j=n.source()[0];var tgt=n.target()[0];if(j!==tgt){j=nodes.indexOf(j);var t=nodes.indexOf(tgt),st=j*N+t;tgt=_floydWarshallDefault(n);dist[st]>tgt&&(dist[st]=tgt,next[st]=t,edgeNext[st]=n);options||(t=t*N+j,!options&&dist[t]>tgt&&(dist[t]=tgt,next[t]=j,edgeNext[t]=n))}}for(options=0;options<N;options++)for(_floydWarshallDefault=0;_floydWarshallDefault<N;_floydWarshallDefault++)for(_this$byGroup=_floydWarshallDefault*N+options,Nsq=0;Nsq<N;Nsq++)n=_floydWarshallDefault*N+Nsq,j=options*N+Nsq,dist[_this$byGroup]+
dist[j]<dist[n]&&(dist[n]=dist[_this$byGroup]+dist[j],next[n]=next[_this$byGroup]);var getArgEle=function(ele){return(string$jscomp$0(ele)?cy.filter(ele):ele)[0]};return{distance:function(from,to){from=nodes.indexOf(getArgEle(from));to=nodes.indexOf(getArgEle(to));return dist[from*N+to]},path:function(from,to){from=nodes.indexOf(getArgEle(from));to=nodes.indexOf(getArgEle(to));var fromNode=nodes[from];if(from===to)return fromNode.collection();if(null==next[from*N+to])return cy.collection();var path=
cy.collection();for(path.merge(fromNode);from!==to;)fromNode=from,from=next[from*N+to],fromNode=edgeNext[fromNode*N+from],path.merge(fromNode),path.merge(nodes[from]);return path}}}},{bellmanFord:function(options){var _this=this,_bellmanFordDefaults=bellmanFordDefaults(options),directed=_bellmanFordDefaults.directed,root=_bellmanFordDefaults.root;_bellmanFordDefaults=_bellmanFordDefaults.weight;var eles=this,cy=this.cy(),_this$byGroup=this.byGroup(),edges=_this$byGroup.edges,nodes=_this$byGroup.nodes,
numNodes=nodes.length,infoMap=new Map$1;_this$byGroup=!1;var negativeWeightCycles=[];root=cy.collection(root)[0];edges.unmergeBy(function(edge){return edge.isLoop()});for(var numEdges=edges.length,getInfo=function(node){var obj=infoMap.get(node.id());obj||(obj={},infoMap.set(node.id(),obj));return obj},getNodeFromTo=function(to){return(string$jscomp$0(to)?cy.$(to):to)[0]},i=0;i<numNodes;i++){var node$jscomp$0=nodes[i],info=getInfo(node$jscomp$0);node$jscomp$0.same(root)?info.dist=0:info.dist=Infinity;
info.pred=null;info.edge=null}var replacedEdge=!1;nodes=function(node1,node2,edge,info1,info2,weight){node2=info1.dist+weight;node2<info2.dist&&!edge.same(info1.edge)&&(info2.dist=node2,info2.pred=node1,info2.edge=edge,replacedEdge=!0)};for(i=1;i<numNodes;i++){replacedEdge=!1;for(node$jscomp$0=0;node$jscomp$0<numEdges;node$jscomp$0++){info=edges[node$jscomp$0];var src=info.source(),tgt=info.target(),_weight=_bellmanFordDefaults(info),srcInfo=getInfo(src),tgtInfo=getInfo(tgt);nodes(src,tgt,info,srcInfo,
tgtInfo,_weight);directed||nodes(tgt,src,info,tgtInfo,srcInfo,_weight)}if(!replacedEdge)break}if(replacedEdge)for(numNodes=[],nodes=0;nodes<numEdges;nodes++)if(i=edges[nodes],node$jscomp$0=i.source(),info=i.target(),src=_bellmanFordDefaults(i),tgt=getInfo(node$jscomp$0).dist,_weight=getInfo(info).dist,tgt+src<_weight||!directed&&_weight+src<tgt)if(_this$byGroup||(warn("Graph contains a negative weight cycle for Bellman-Ford"),_this$byGroup=!0),!1!==options.findNegativeWeightCycles)for(i=[],tgt+src<
_weight&&i.push(node$jscomp$0),!directed&&_weight+src<tgt&&i.push(info),node$jscomp$0=i.length,info=0;info<node$jscomp$0;info++){tgt=i[info];src=[tgt];src.push(getInfo(tgt).edge);for(tgt=getInfo(tgt).pred;-1===src.indexOf(tgt);)src.push(tgt),src.push(getInfo(tgt).edge),tgt=getInfo(tgt).pred;src=src.slice(src.indexOf(tgt));tgt=src[0].id();_weight=0;for(srcInfo=2;srcInfo<src.length;srcInfo+=2)src[srcInfo].id()<tgt&&(tgt=src[srcInfo].id(),_weight=srcInfo);src=src.slice(_weight).concat(src.slice(0,_weight));
src.push(src[0]);tgt=src.map(function(el){return el.id()}).join(",");-1===numNodes.indexOf(tgt)&&(negativeWeightCycles.push(eles.spawn(src)),numNodes.push(tgt))}else break;return{distanceTo:function(to){return getInfo(getNodeFromTo(to)).dist},pathTo:function(to){for(var thisStart=1<arguments.length&&void 0!==arguments[1]?arguments[1]:root,path=[],node=getNodeFromTo(to);;){if(null==node)return _this.spawn();var _getInfo=getInfo(node),edge=_getInfo.edge;_getInfo=_getInfo.pred;path.unshift(node[0]);
if(node.same(thisStart)&&0<path.length)break;null!=edge&&path.unshift(edge);node=_getInfo}return eles.spawn(path)},hasNegativeWeightCycle:_this$byGroup,negativeWeightCycles}}},{kargerStein:function(){var _this=this,_this$byGroup=this.byGroup(),nodes=_this$byGroup.nodes,edges=_this$byGroup.edges;edges.unmergeBy(function(edge){return edge.isLoop()});var numNodes=nodes.length;_this$byGroup=edges.length;var numIter=Math.ceil(Math.pow(Math.log(numNodes)/Math.LN2,2)),stopSize=Math.floor(numNodes/sqrt2);
if(2>numNodes)error("At least 2 nodes are required for Karger-Stein algorithm");else{for(var edgeIndexes=[],i=0;i<_this$byGroup;i++){var e$jscomp$0=edges[i];edgeIndexes.push([i,nodes.indexOf(e$jscomp$0.source()),nodes.indexOf(e$jscomp$0.target())])}i=Infinity;e$jscomp$0=[];_this$byGroup=Array(numNodes);for(var metaNodeMap=Array(numNodes),metaNodeMap2=Array(numNodes),copyNodesMap=function(from,to){for(var _i3=0;_i3<numNodes;_i3++)to[_i3]=from[_i3]},iter=0;iter<=numIter;iter++){for(var _i4=0;_i4<numNodes;_i4++)metaNodeMap[_i4]=
_i4;var edgesState=contractUntil(metaNodeMap,edgeIndexes.slice(),numNodes,stopSize);_i4=edgesState.slice();copyNodesMap(metaNodeMap,metaNodeMap2);edgesState=contractUntil(metaNodeMap,edgesState,stopSize,2);_i4=contractUntil(metaNodeMap2,_i4,stopSize,2);edgesState.length<=_i4.length&&edgesState.length<i?(i=edgesState.length,e$jscomp$0=edgesState,copyNodesMap(metaNodeMap,_this$byGroup)):_i4.length<=edgesState.length&&_i4.length<i&&(i=_i4.length,e$jscomp$0=_i4,copyNodesMap(metaNodeMap2,_this$byGroup))}var cut=
this.spawn(e$jscomp$0.map(function(e){return edges[e[0]]}));numIter=this.spawn();stopSize=this.spawn();edgeIndexes=_this$byGroup[0];for(i=0;i<_this$byGroup.length;i++)e$jscomp$0=nodes[i],_this$byGroup[i]===edgeIndexes?numIter.merge(e$jscomp$0):stopSize.merge(e$jscomp$0);nodes=function(subset){var component=_this.spawn();subset.forEach(function(node){component.merge(node);node.connectedEdges().forEach(function(edge){_this.contains(edge)&&!cut.contains(edge)&&component.merge(edge)})});return component};
nodes=[nodes(numIter),nodes(stopSize)];return{cut,components:nodes,partition1:numIter,partition2:stopSize}}}},{pageRank:function(options){var _pageRankDefaults=pageRankDefaults(options),dampingFactor=_pageRankDefaults.dampingFactor;options=_pageRankDefaults.precision;var iterations=_pageRankDefaults.iterations,weight=_pageRankDefaults.weight,cy=this._private.cy;_pageRankDefaults=this.byGroup();var nodes=_pageRankDefaults.nodes,edges=_pageRankDefaults.edges;_pageRankDefaults=nodes.length;var numEdges=
edges.length,matrix=Array(_pageRankDefaults*_pageRankDefaults),columnSum=Array(_pageRankDefaults);dampingFactor=(1-dampingFactor)/_pageRankDefaults;for(var i=0;i<_pageRankDefaults;i++){for(var j=0;j<_pageRankDefaults;j++)matrix[i*_pageRankDefaults+j]=0;columnSum[i]=0}for(i=0;i<numEdges;i++){j=edges[i];var srcId=j.data("source"),tgtId=j.data("target");srcId!==tgtId&&(srcId=nodes.indexOfId(srcId),tgtId=nodes.indexOfId(tgtId),j=weight(j),matrix[tgtId*_pageRankDefaults+srcId]+=j,columnSum[srcId]+=j)}weight=
1/_pageRankDefaults+dampingFactor;for(edges=0;edges<_pageRankDefaults;edges++)if(0===columnSum[edges])for(numEdges=0;numEdges<_pageRankDefaults;numEdges++)matrix[numEdges*_pageRankDefaults+edges]=weight;else for(numEdges=0;numEdges<_pageRankDefaults;numEdges++)i=numEdges*_pageRankDefaults+edges,matrix[i]=matrix[i]/columnSum[edges]+dampingFactor;var eigenvector=Array(_pageRankDefaults);columnSum=Array(_pageRankDefaults);for(dampingFactor=0;dampingFactor<_pageRankDefaults;dampingFactor++)eigenvector[dampingFactor]=
1;for(dampingFactor=0;dampingFactor<iterations;dampingFactor++){for(weight=0;weight<_pageRankDefaults;weight++)columnSum[weight]=0;for(weight=0;weight<_pageRankDefaults;weight++)for(edges=0;edges<_pageRankDefaults;edges++)columnSum[weight]+=matrix[weight*_pageRankDefaults+edges]*eigenvector[edges];inPlaceSumNormalize(columnSum);weight=eigenvector;eigenvector=columnSum;columnSum=weight;for(numEdges=edges=0;numEdges<_pageRankDefaults;numEdges++)i=weight[numEdges]-eigenvector[numEdges],edges+=i*i;if(edges<
options)break}return{rank:function(node){node=cy.collection(node)[0];return eigenvector[nodes.indexOf(node)]}}}},elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,{hierholzer:function(options){if(!plainObject(options)){var args=arguments;options={root:args[0],directed:args[1]}}args=hierholzerDefaults(options);var root=args.root,directed=args.directed,dflag=!1,oddIn,oddOut,startVertex;root&&(startVertex=string$jscomp$0(root)?this.filter(root)[0].id():
root[0].id());var nodes={},edges={};directed?this.forEach(function(ele){var id=ele.id();if(ele.isNode()){var ind=ele.indegree(!0),outd=ele.outdegree(!0),d1=ind-outd;ind=outd-ind;if(1==d1)oddIn?dflag=!0:oddIn=id;else if(1==ind)oddOut?dflag=!0:oddOut=id;else if(1<ind||1<d1)dflag=!0;nodes[id]=[];ele.outgoers().forEach(function(e){e.isEdge()&&nodes[id].push(e.id())})}else edges[id]=[void 0,ele.target().id()]}):this.forEach(function(ele){var id=ele.id();ele.isNode()?(ele.degree(!0)%2&&(oddIn?oddOut?dflag=
!0:oddOut=id:oddIn=id),nodes[id]=[],ele.connectedEdges().forEach(function(e){return nodes[id].push(e.id())})):edges[id]=[ele.source().id(),ele.target().id()]});args={found:!1,trail:void 0};if(dflag)return args;if(oddOut&&oddIn)if(directed){if(startVertex&&oddOut!=startVertex)return args;startVertex=oddOut}else{if(startVertex&&oddOut!=startVertex&&oddIn!=startVertex)return args;startVertex||(startVertex=oddOut)}else startVertex||(startVertex=this[0].id());root=function(v){var currentNode=v;v=[v];for(var adj,
adjTail,adjHead;nodes[currentNode].length;)adj=nodes[currentNode].shift(),adjTail=edges[adj][0],adjHead=edges[adj][1],currentNode!=adjHead?(nodes[adjHead]=nodes[adjHead].filter(function(e){return e!=adj}),currentNode=adjHead):directed||currentNode==adjTail||(nodes[adjTail]=nodes[adjTail].filter(function(e){return e!=adj}),currentNode=adjTail),v.unshift(adj),v.unshift(currentNode);return v};var trail=[],subtour=[];for(subtour=root(startVertex);1!=subtour.length;)0==nodes[subtour[0]].length?(trail.unshift(this.getElementById(subtour.shift())),
trail.unshift(this.getElementById(subtour.shift()))):subtour=root(subtour.shift()).concat(subtour);trail.unshift(this.getElementById(subtour.shift()));for(var d in nodes)if(nodes[d].length)return args;args.found=!0;args.trail=this.spawn(trail,!0);return args}},{hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},{tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected}].forEach(function(props){extend(elesfn$j,
props)});var api=function api(executor){if(!(this instanceof api))return new api(executor);this.id="Thenable/1.0.7";this.state=0;this.rejectReason=this.fulfillValue=void 0;this.onFulfilled=[];this.onRejected=[];this.proxy={then:this.then.bind(this)};"function"===typeof executor&&executor.call(this,this.fulfill.bind(this),this.reject.bind(this))};api.prototype={fulfill:function(value){return deliver(this,1,"fulfillValue",value)},reject:function(value){return deliver(this,2,"rejectReason",value)},then:function(onFulfilled,
onRejected){var next=new api;this.onFulfilled.push(resolver(onFulfilled,next,"fulfill"));this.onRejected.push(resolver(onRejected,next,"reject"));execute(this);return next.proxy}};var deliver=function(curr,state,name,value){0===curr.state&&(curr.state=state,curr[name]=value,execute(curr));return curr},execute=function(curr){1===curr.state?execute_handlers(curr,"onFulfilled",curr.fulfillValue):2===curr.state&&execute_handlers(curr,"onRejected",curr.rejectReason)},execute_handlers=function(curr,name,
value){if(0!==curr[name].length){var handlers=curr[name];curr[name]=[];curr=function(){for(var i=0;i<handlers.length;i++)handlers[i](value)};"function"===typeof setImmediate?setImmediate(curr):setTimeout(curr,0)}},resolver=function(cb,next,method){return function(value){if("function"!==typeof cb)next[method].call(next,value);else{try{var result=cb(value)}catch(e){next.reject(e);return}resolve(next,result)}}},resolve=function resolve(promise,x){if(promise===x||promise.proxy===x)promise.reject(new TypeError("cannot resolve promise with itself"));
else{if("object"===_typeof(x)&&null!==x||"function"===typeof x)try{var then=x.then}catch(e){promise.reject(e);return}if("function"===typeof then){var resolved=!1;try{then.call(x,function(y){resolved||(resolved=!0,y===x?promise.reject(new TypeError("circular thenable chain")):resolve(promise,y))},function(r){resolved||(resolved=!0,promise.reject(r))})}catch(e){resolved||promise.reject(e)}}else promise.fulfill(x)}};api.all=function(ps){return new api(function(resolveAll,rejectAll){for(var vals=Array(ps.length),
doneCount=0,i$jscomp$0=0;i$jscomp$0<ps.length;i$jscomp$0++)(function(i){var p=ps[i];null!=p&&null!=p.then?p.then(function(val){vals[i]=val;doneCount++;doneCount===ps.length&&resolveAll(vals)},function(err){rejectAll(err)}):(vals[i]=p,doneCount++,doneCount===ps.length&&resolveAll(vals))})(i$jscomp$0)})};api.resolve=function(val){return new api(function(resolve,reject){resolve(val)})};api.reject=function(val){return new api(function(resolve,reject){reject(val)})};var Promise$1="undefined"!==typeof Promise?
Promise:api,Animation=function(target,opts,opts2){var isCore="core"===instanceStr(target),isEle=!isCore;opts=this._private=extend({duration:1E3},opts,opts2);opts.target=target;opts.style=opts.style||opts.css;opts.started=!1;opts.playing=!1;opts.hooked=!1;opts.applying=!1;opts.progress=0;opts.completes=[];opts.frames=[];opts.complete&&fn$6(opts.complete)&&opts.completes.push(opts.complete);isEle&&(isEle=target.position(),opts.startPosition=opts.startPosition||{x:isEle.x,y:isEle.y},opts.startStyle=
opts.startStyle||target.cy().style().getAnimationStartStyle(target,opts.style));isCore&&(isCore=target.pan(),opts.startPan={x:isCore.x,y:isCore.y},opts.startZoom=target.zoom());this.length=1;this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var _p=this._private;if(!_p.hooked){var tAni=_p.target._private.animation;(_p.queue?tAni.queue:tAni.current).push(this);elementOrCollection(_p.target)&&_p.target.cy().addToAnimationPool(_p.target);
_p.hooked=!0}return this},play:function(){var _p=this._private;1===_p.progress&&(_p.progress=0);_p.playing=!0;_p.started=!1;_p.stopped=!1;this.hook();return this},playing:function(){return this._private.playing},apply:function(){var _p=this._private;_p.applying=!0;_p.started=!1;_p.stopped=!1;this.hook();return this},applying:function(){return this._private.applying},pause:function(){var _p=this._private;_p.playing=!1;_p.started=!1;return this},stop:function(){var _p=this._private;_p.playing=!1;_p.started=
!1;_p.stopped=!0;return this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var _p=this._private;return void 0===t?_p.progress*_p.duration:this.progress(t/_p.duration)},progress:function(p){var _p=this._private,wasPlaying=_p.playing;if(void 0===p)return _p.progress;wasPlaying&&this.pause();_p.progress=p;_p.started=!1;wasPlaying&&this.play();return this},completed:function(){return 1===this._private.progress},reverse:function(){var _p=this._private,
wasPlaying=_p.playing;wasPlaying&&this.pause();_p.progress=1-_p.progress;_p.started=!1;var swap=function(a,b){var _pa=_p[a];null!=_pa&&(_p[a]=_p[b],_p[b]=_pa)};swap("zoom","startZoom");swap("pan","startPan");swap("position","startPosition");if(_p.style)for(swap=0;swap<_p.style.length;swap++){var prop=_p.style[swap],name=prop.name,startStyleProp=_p.startStyle[name];_p.startStyle[name]=prop;_p.style[swap]=startStyleProp}wasPlaying&&this.play();return this},promise:function(type){var _p=this._private;
switch(type){case "frame":var arr=_p.frames;break;default:case "complete":case "completed":arr=_p.completes}return new Promise$1(function(resolve,reject){arr.push(function(){resolve()})})}});anifn.complete=anifn.completed;anifn.run=anifn.play;anifn.running=anifn.playing;var define={};[{animated:function(){return function(){var all=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;if(all=all[0])return 0<all._private.animation.current.length}},clearQueue:function(){return function(){var all=
void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var i=0;i<all.length;i++)all[i]._private.animation.queue=[];return this}},delay:function(){return function(time,complete){return(this._private.cy||this).styleEnabled()?this.animate({delay:time,duration:time,complete}):this}},delayAnimation:function(){return function(time,complete){return(this._private.cy||this).styleEnabled()?this.animation({delay:time,duration:time,complete}):this}},animation:function(){return function(properties,
params){var selfIsArrayLike=void 0!==this.length,all=selfIsArrayLike?this:[this],cy=this._private.cy||this;selfIsArrayLike=!selfIsArrayLike;var isEles=!selfIsArrayLike;if(!cy.styleEnabled())return this;var style=cy.style();properties=extend({},properties,params);if(0===Object.keys(properties).length)return new Animation(all[0],properties);void 0===properties.duration&&(properties.duration=400);switch(properties.duration){case "slow":properties.duration=600;break;case "fast":properties.duration=200}isEles&&
(properties.style=style.getPropsList(properties.style||properties.css),properties.css=void 0);isEles&&null!=properties.renderedPosition&&(params=properties.renderedPosition,isEles=cy.pan(),style=cy.zoom(),properties.position={x:(params.x-isEles.x)/style,y:(params.y-isEles.y)/style});selfIsArrayLike&&null!=properties.panBy&&(params=properties.panBy,isEles=cy.pan(),properties.pan={x:isEles.x+params.x,y:isEles.y+params.y});params=properties.center||properties.centre;selfIsArrayLike&&null!=params&&(params=
cy.getCenterPan(params.eles,properties.zoom),null!=params&&(properties.pan=params));selfIsArrayLike&&null!=properties.fit&&(params=properties.fit,params=cy.getFitViewport(params.eles||params.boundingBox,params.padding),null!=params&&(properties.pan=params.pan,properties.zoom=params.zoom));selfIsArrayLike&&plainObject(properties.zoom)&&(cy=cy.getZoomedViewport(properties.zoom),null!=cy?(cy.zoomed&&(properties.zoom=cy.zoom),cy.panned&&(properties.pan=cy.pan)):properties.zoom=null);return new Animation(all[0],
properties)}},animate:function(){return function(properties,params){var all=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;params&&(properties=extend({},properties,params));for(params=0;params<all.length;params++){var ele=all[params],queue=ele.animated()&&(void 0===properties.queue||properties.queue);ele.animation(properties,queue?{queue:!0}:void 0).play()}return this}},stop:function(){return function(clearQueue,jumpToEnd){var all=void 0!==this.length?this:
[this],cy=this._private.cy||this;if(!cy.styleEnabled())return this;for(var i=0;i<all.length;i++){for(var _p=all[i]._private,anis=_p.animation.current,j=0;j<anis.length;j++){var ani_p=anis[j]._private;jumpToEnd&&(ani_p.duration=0)}clearQueue&&(_p.animation.queue=[]);jumpToEnd||(_p.animation.current=[])}cy.notify("draw");return this}}},{data:function(params){params=extend({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,
triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(self){},beforeSet:function(self,obj){},onSet:function(self){},canSet:function(self){return!0}},params);return function(name,value){var p=params,selfIsArrayLike=void 0!==this.length,all=selfIsArrayLike?this:[this];selfIsArrayLike=selfIsArrayLike?this[0]:this;if(string$jscomp$0(name)){var path=-1!==name.indexOf(".")&&toPath__default["default"](name);if(p.allowGetting&&void 0===value){if(selfIsArrayLike){p.beforeGet(selfIsArrayLike);
var ret=path&&void 0===selfIsArrayLike._private[p.field][name]?get__default["default"](selfIsArrayLike._private[p.field],path):selfIsArrayLike._private[p.field][name]}return ret}if(p.allowSetting&&void 0!==value&&!p.immutableKeys[name]){ret=_defineProperty({},name,value);p.beforeSet(this,ret);ret=0;for(var l=all.length;ret<l;ret++){var ele=all[ret];if(p.canSet(ele))if(path&&void 0===selfIsArrayLike._private[p.field][name])set__default["default"](ele._private[p.field],path,value);else ele._private[p.field][name]=
value}p.updateStyle&&this.updateStyle();p.onSet(this);if(p.settingTriggersEvent)this[p.triggerFnName](p.settingEvent)}}else if(p.allowSetting&&plainObject(name)){path=Object.keys(name);p.beforeSet(this,name);for(ret=0;ret<path.length;ret++)if(value=path[ret],selfIsArrayLike=name[value],!p.immutableKeys[value])for(l=0;l<all.length;l++)ele=all[l],p.canSet(ele)&&(ele._private[p.field][value]=selfIsArrayLike);p.updateStyle&&this.updateStyle();p.onSet(this);if(p.settingTriggersEvent)this[p.triggerFnName](p.settingEvent)}else if(p.allowBinding&&
fn$6(name))this.on(p.bindingEvent,name);else if(p.allowGetting&&void 0===name)return selfIsArrayLike&&(p.beforeGet(selfIsArrayLike),path=selfIsArrayLike._private[p.field]),path;return this}},removeData:function(params){params=extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},params);return function(names){var p=params,all=void 0!==this.length?this:[this];if(string$jscomp$0(names)){names=names.split(/\s+/);for(var l=names.length,i=0;i<l;i++){var key=names[i];
if(!emptyString(key)&&!p.immutableKeys[key])for(var i_a=0,l_a=all.length;i_a<l_a;i_a++)all[i_a]._private[p.field][key]=void 0}if(p.triggerEvent)this[p.triggerFnName](p.event)}else if(void 0===names){names=0;for(l=all.length;names<l;names++)for(i=all[names]._private[p.field],key=Object.keys(i),i_a=0;i_a<key.length;i_a++)l_a=key[i_a],p.immutableKeys[l_a]||(i[l_a]=void 0);if(p.triggerEvent)this[p.triggerFnName](p.event)}return this}}},{eventAliasesOn:function(proto){proto.addListener=proto.listen=proto.bind=
proto.on;proto.unlisten=proto.unbind=proto.off=proto.removeListener;proto.trigger=proto.emit;proto.pon=proto.promiseOn=function(events,selector){var self=this,args=Array.prototype.slice.call(arguments,0);return new Promise$1(function(resolve,reject){reject=args.concat([function(e){self.off.apply(self,offArgs);resolve(e)}]);var offArgs=reject.concat([]);self.on.apply(self,reject)})}}}].forEach(function(m){extend(define,m)});var elesfn$i={animate:define.animate(),animation:define.animation(),animated:define.animated(),
clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop()},elesfn$h={classes:function(_classes){if(void 0===_classes){var ret=[];this[0]._private.classes.forEach(function(cls){return ret.push(cls)});return ret}array$jscomp$0(_classes)||(_classes=(_classes||"").match(/\S+/g)||[]);for(var changed=[],classesSet=new Set$1(_classes),j=0;j<this.length;j++){for(var ele=this[j],_p=ele._private,eleClasses=_p.classes,changedEle=!1,i=0;i<_classes.length;i++)if(!eleClasses.has(_classes[i])){changedEle=
!0;break}changedEle||(changedEle=eleClasses.size!==_classes.length);changedEle&&(_p.classes=classesSet,changed.push(ele))}0<changed.length&&this.spawn(changed).updateStyle().emit("class");return this},addClass:function(classes){return this.toggleClass(classes,!0)},hasClass:function(className){var ele=this[0];return null!=ele&&ele._private.classes.has(className)},toggleClass:function(classes,toggle){array$jscomp$0(classes)||(classes=classes.match(/\S+/g)||[]);for(var toggleUndefd=void 0===toggle,changed=
[],i=0,il=this.length;i<il;i++)for(var ele=this[i],eleClasses=ele._private.classes,changedEle=!1,j=0;j<classes.length;j++){var cls=classes[j],hasClass=eleClasses.has(cls),changedNow=!1;if(toggle||toggleUndefd&&!hasClass)eleClasses.add(cls),changedNow=!0;else if(!toggle||toggleUndefd&&hasClass)eleClasses["delete"](cls),changedNow=!0;!changedEle&&changedNow&&(changed.push(ele),changedEle=!0)}0<changed.length&&this.spawn(changed).updateStyle().emit("class");return this},removeClass:function(classes){return this.toggleClass(classes,
!1)},flashClass:function(classes,duration){var self=this;if(null==duration)duration=250;else if(0===duration)return self;self.addClass(classes);setTimeout(function(){self.removeClass(classes)},duration);return self}};elesfn$h.className=elesfn$h.classNames=elesfn$h.classes;var JSCompiler_object_inline_comparatorOp_702="\x3d|\\!\x3d|\x3e|\x3e\x3d|\x3c|\x3c\x3d|\\$\x3d|\\^\x3d|\\*\x3d";(function(){var i;var ops=JSCompiler_object_inline_comparatorOp_702.split("|");for(i=0;i<ops.length;i++){var op=ops[i];
JSCompiler_object_inline_comparatorOp_702+="|@"+op}ops=JSCompiler_object_inline_comparatorOp_702.split("|");for(i=0;i<ops.length;i++)op=ops[i],0<=op.indexOf("!")||"\x3d"!==op&&(JSCompiler_object_inline_comparatorOp_702+="|\\!"+op)})();var newQuery=function(){return{checks:[]}},stateSelectors=[{selector:":selected",matches:function(ele){return ele.selected()}},{selector:":unselected",matches:function(ele){return!ele.selected()}},{selector:":selectable",matches:function(ele){return ele.selectable()}},
{selector:":unselectable",matches:function(ele){return!ele.selectable()}},{selector:":locked",matches:function(ele){return ele.locked()}},{selector:":unlocked",matches:function(ele){return!ele.locked()}},{selector:":visible",matches:function(ele){return ele.visible()}},{selector:":hidden",matches:function(ele){return!ele.visible()}},{selector:":transparent",matches:function(ele){return ele.transparent()}},{selector:":grabbed",matches:function(ele){return ele.grabbed()}},{selector:":free",matches:function(ele){return!ele.grabbed()}},
{selector:":removed",matches:function(ele){return ele.removed()}},{selector:":inside",matches:function(ele){return!ele.removed()}},{selector:":grabbable",matches:function(ele){return ele.grabbable()}},{selector:":ungrabbable",matches:function(ele){return!ele.grabbable()}},{selector:":animated",matches:function(ele){return ele.animated()}},{selector:":unanimated",matches:function(ele){return!ele.animated()}},{selector:":parent",matches:function(ele){return ele.isParent()}},{selector:":childless",matches:function(ele){return ele.isChildless()}},
{selector:":child",matches:function(ele){return ele.isChild()}},{selector:":orphan",matches:function(ele){return ele.isOrphan()}},{selector:":nonorphan",matches:function(ele){return ele.isChild()}},{selector:":compound",matches:function(ele){return ele.isNode()?ele.isParent():ele.source().isParent()||ele.target().isParent()}},{selector:":loop",matches:function(ele){return ele.isLoop()}},{selector:":simple",matches:function(ele){return ele.isSimple()}},{selector:":active",matches:function(ele){return ele.active()}},
{selector:":inactive",matches:function(ele){return!ele.active()}},{selector:":backgrounding",matches:function(ele){return ele.backgrounding()}},{selector:":nonbackgrounding",matches:function(ele){return!ele.backgrounding()}}].sort(function(a,b){a=a.selector;b=b.selector;return-1*(a<b?-1:a>b?1:0)}),lookup=function(){for(var selToFn={},s,i=0;i<stateSelectors.length;i++)s=stateSelectors[i],selToFn[s.selector]=s.matches;return selToFn}(),cleanMetaChars=function(str){return str.replace(RegExp("\\\\([\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~])",
"g"),function(match,$1){return $1})},exprs=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(selector,query,_ref){selector=_slicedToArray(_ref,1)[0];query.checks.push({type:0,value:"*"===selector?selector:selector+"s"})}},{name:"state",query:!0,regex:"("+stateSelectors.map(function(s){return s.selector}).join("|")+")",populate:function(selector,query,_ref3){selector=_slicedToArray(_ref3,1)[0];query.checks.push({type:7,value:selector})}},{name:"id",query:!0,regex:"\\#((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)",
populate:function(selector,query,_ref5){selector=_slicedToArray(_ref5,1)[0];query.checks.push({type:8,value:cleanMetaChars(selector)})}},{name:"className",query:!0,regex:"\\.((?:[\\w-]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)",populate:function(selector,query,_ref7){selector=_slicedToArray(_ref7,1)[0];query.checks.push({type:9,value:cleanMetaChars(selector)})}},{name:"dataExists",query:!0,regex:"\\[\\s*((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)\\s*\\]",
populate:function(selector,query,_ref9){selector=_slicedToArray(_ref9,1)[0];query.checks.push({type:4,field:cleanMetaChars(selector)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)\\s*("+JSCompiler_object_inline_comparatorOp_702+")\\s*(\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\]",populate:function(selector,query,_ref11){var _ref12=
_slicedToArray(_ref11,3);selector=_ref12[0];_ref11=_ref12[1];_ref12=_ref12[2];_ref12=null!=RegExp("^\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'$").exec(_ref12)?_ref12.substring(1,_ref12.length-1):parseFloat(_ref12);query.checks.push({type:3,field:cleanMetaChars(selector),operator:_ref11,value:_ref12})}},{name:"dataBool",query:!0,regex:"\\[\\s*(\\?|\\!|\\^)\\s*((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)\\s*\\]",populate:function(selector,
query,_ref13){selector=_slicedToArray(_ref13,2);_ref13=selector[0];query.checks.push({type:5,field:cleanMetaChars(selector[1]),operator:_ref13})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*(degree|indegree|outdegree)\\s*("+JSCompiler_object_inline_comparatorOp_702+")\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\]\\]",populate:function(selector,query,_ref15){selector=_slicedToArray(_ref15,3);_ref15=selector[1];var number=selector[2];query.checks.push({type:6,field:cleanMetaChars(selector[0]),
operator:_ref15,value:parseFloat(number)})}},{name:"nextQuery",separator:!0,regex:"\\s*,\\s*",populate:function(selector,query){query=selector.currentSubject;var edgeCount=selector.edgeCount,compoundCount=selector.compoundCount,lastQ=selector[selector.length-1];null!=query&&(lastQ.subject=query,selector.currentSubject=null);lastQ.edgeCount=edgeCount;lastQ.compoundCount=compoundCount;selector.edgeCount=0;selector.compoundCount=0;return selector[selector.length++]=newQuery()}},{name:"directedEdge",
separator:!0,regex:"\\s+-\x3e\\s+",populate:function(selector,query){if(null==selector.currentSubject){var edgeQuery=newQuery(),target=newQuery();edgeQuery.checks.push({type:11,source:query,target});selector[selector.length-1]=edgeQuery;selector.edgeCount++;return target}edgeQuery=newQuery();target=newQuery();edgeQuery.checks.push({type:12,source:query,target});selector[selector.length-1]=edgeQuery;selector.edgeCount++;return target}},{name:"undirectedEdge",separator:!0,regex:"\\s+\x3c-\x3e\\s+",
populate:function(selector,query){if(null==selector.currentSubject){var edgeQuery=newQuery(),target=newQuery();edgeQuery.checks.push({type:10,nodes:[query,target]});selector[selector.length-1]=edgeQuery;selector.edgeCount++;return target}edgeQuery=newQuery();target=newQuery();edgeQuery.checks.push({type:14,node:query,neighbor:target});selector[selector.length-1]=edgeQuery;return target}},{name:"child",separator:!0,regex:"\\s+\x3e\\s+",populate:function(selector,query){if(null==selector.currentSubject){query=
newQuery();var child=newQuery();query.checks.push({type:15,parent:selector[selector.length-1],child});selector[selector.length-1]=query;selector.compoundCount++;return child}if(selector.currentSubject===query){child=newQuery();var left=selector[selector.length-1],right=newQuery(),subject=newQuery(),_child=newQuery(),_parent=newQuery();child.checks.push({type:19,left,right,subject});subject.checks=query.checks;query.checks=[{type:20}];_parent.checks.push({type:20});right.checks.push({type:17,parent:_parent,
child:_child});selector[selector.length-1]=child;selector.currentSubject=subject;selector.compoundCount++;return _child}child=newQuery();left=newQuery();right=[{type:17,parent:child,child:left}];child.checks=query.checks;query.checks=right;selector.compoundCount++;return left}},{name:"descendant",separator:!0,regex:"\\s+",populate:function(selector,query){if(null==selector.currentSubject){query=newQuery();var descendant=newQuery();query.checks.push({type:16,ancestor:selector[selector.length-1],descendant});
selector[selector.length-1]=query;selector.compoundCount++;return descendant}if(selector.currentSubject===query){descendant=newQuery();var left=selector[selector.length-1],right=newQuery(),subject=newQuery(),_descendant=newQuery(),_ancestor=newQuery();descendant.checks.push({type:19,left,right,subject});subject.checks=query.checks;query.checks=[{type:20}];_ancestor.checks.push({type:20});right.checks.push({type:18,ancestor:_ancestor,descendant:_descendant});selector[selector.length-1]=descendant;
selector.currentSubject=subject;selector.compoundCount++;return _descendant}descendant=newQuery();left=newQuery();right=[{type:18,ancestor:descendant,descendant:left}];descendant.checks=query.checks;query.checks=right;selector.compoundCount++;return left}},{name:"subject",modifier:!0,regex:"\\$",populate:function(selector,query){if(null!=selector.currentSubject&&selector.currentSubject!==query)return warn("Redefinition of subject in selector `"+selector.toString()+"`"),!1;selector.currentSubject=
query;selector=selector[selector.length-1].checks[0];query=null==selector?null:selector.type;11===query?selector.type=13:10===query&&(selector.type=14,selector.node=selector.nodes[1],selector.neighbor=selector.nodes[0],selector.nodes=null)}}];exprs.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var valCmp=function(fieldVal,operator,value){var isFieldStr=string$jscomp$0(fieldVal),isFieldNum=number$1(fieldVal),isValStr=string$jscomp$0(value),caseInsensitive=!1,notExpr=!1,isIneqCmp=
!1;0<=operator.indexOf("!")&&(operator=operator.replace("!",""),notExpr=!0);0<=operator.indexOf("@")&&(operator=operator.replace("@",""),caseInsensitive=!0);if(isFieldStr||isValStr||caseInsensitive){var fieldStr=isFieldStr||isFieldNum?""+fieldVal:"";var valStr=""+value}caseInsensitive&&(fieldVal=fieldStr=fieldStr.toLowerCase(),value=valStr=valStr.toLowerCase());switch(operator){case "*\x3d":operator=0<=fieldStr.indexOf(valStr);break;case "$\x3d":operator=0<=fieldStr.indexOf(valStr,fieldStr.length-
valStr.length);break;case "^\x3d":operator=0===fieldStr.indexOf(valStr);break;case "\x3d":operator=fieldVal===value;break;case "\x3e":isIneqCmp=!0;operator=fieldVal>value;break;case "\x3e\x3d":isIneqCmp=!0;operator=fieldVal>=value;break;case "\x3c":isIneqCmp=!0;operator=fieldVal<value;break;case "\x3c\x3d":isIneqCmp=!0;operator=fieldVal<=value;break;default:operator=!1}!notExpr||null==fieldVal&&isIneqCmp||(operator=!operator);return operator},match$jscomp$0=[],matches$1=function(query,ele){return query.checks.every(function(chk){return match$jscomp$0[chk.type](chk,
ele)})};match$jscomp$0[0]=function(check,ele){check=check.value;return"*"===check||check===ele.group()};match$jscomp$0[7]=function(check,ele){return lookup[check.value](ele)};match$jscomp$0[8]=function(check,ele){check=check.value;return ele.id()===check};match$jscomp$0[9]=function(check,ele){return ele.hasClass(check.value)};match$jscomp$0[6]=function(check,ele){var operator=check.operator,value=check.value;return valCmp(ele[check.field](),operator,value)};match$jscomp$0[3]=function(check,ele){var operator=
check.operator,value=check.value;return valCmp(ele.data(check.field),operator,value)};match$jscomp$0[5]=function(check,ele){var operator=check.operator;a:{check=ele.data(check.field);switch(operator){case "?":operator=check?!0:!1;break a;case "!":operator=check?!1:!0;break a;case "^":operator=void 0===check;break a}operator=void 0}return operator};match$jscomp$0[4]=function(check,ele){var field=check.field;check.operator;return void 0!==ele.data(field)};match$jscomp$0[10]=function(check,ele){var qA=
check.nodes[0];check=check.nodes[1];var src=ele.source();ele=ele.target();return matches$1(qA,src)&&matches$1(check,ele)||matches$1(check,src)&&matches$1(qA,ele)};match$jscomp$0[14]=function(check,ele){return matches$1(check.node,ele)&&ele.neighborhood().some(function(n){return n.isNode()&&matches$1(check.neighbor,n)})};match$jscomp$0[11]=function(check,ele){return matches$1(check.source,ele.source())&&matches$1(check.target,ele.target())};match$jscomp$0[12]=function(check,ele){return matches$1(check.source,
ele)&&ele.outgoers().some(function(n){return n.isNode()&&matches$1(check.target,n)})};match$jscomp$0[13]=function(check,ele){return matches$1(check.target,ele)&&ele.incomers().some(function(n){return n.isNode()&&matches$1(check.source,n)})};match$jscomp$0[15]=function(check,ele){return matches$1(check.child,ele)&&matches$1(check.parent,ele.parent())};match$jscomp$0[17]=function(check,ele){return matches$1(check.parent,ele)&&ele.children().some(function(c){return matches$1(check.child,c)})};match$jscomp$0[16]=
function(check,ele){return matches$1(check.descendant,ele)&&ele.ancestors().some(function(a){return matches$1(check.ancestor,a)})};match$jscomp$0[18]=function(check,ele){return matches$1(check.ancestor,ele)&&ele.descendants().some(function(d){return matches$1(check.descendant,d)})};match$jscomp$0[19]=function(check,ele){return matches$1(check.subject,ele)&&matches$1(check.left,ele)&&matches$1(check.right,ele)};match$jscomp$0[20]=function(){return!0};match$jscomp$0[1]=function(check,ele){return check.value.has(ele)};
match$jscomp$0[2]=function(check,ele){check=check.value;return check(ele)};var Selector=function(selector){this.inputText=selector;this.currentSubject=null;this.length=this.edgeCount=this.compoundCount=0;null==selector||string$jscomp$0(selector)&&selector.match(/^\s*$/)||(elementOrCollection(selector)?this.addQuery({checks:[{type:1,value:selector.collection()}]}):fn$6(selector)?this.addQuery({checks:[{type:2,value:selector}]}):string$jscomp$0(selector)?this.parse(selector)||(this.invalid=!0):error("A selector must be created from a string; found "))},
selfn=Selector.prototype;[{parse:function(selector){var JSCompiler_object_inline_match_633,remaining=this.inputText=selector,currentQuery=this[0]=newQuery();this.length=1;var JSCompiler_object_inline_remaining_635=remaining;(remaining=JSCompiler_object_inline_remaining_635.match(/^\s+/))&&(JSCompiler_object_inline_remaining_635=JSCompiler_object_inline_remaining_635.substring(remaining[0].length));for(remaining=JSCompiler_object_inline_remaining_635;;){var JSCompiler_object_inline_expr_632=JSCompiler_object_inline_remaining_635=
void 0;for(JSCompiler_object_inline_match_633=0;JSCompiler_object_inline_match_633<exprs.length;JSCompiler_object_inline_match_633++){var e=exprs[JSCompiler_object_inline_match_633],m=remaining.match(e.regexObj);if(null!=m){JSCompiler_object_inline_remaining_635=m;JSCompiler_object_inline_expr_632=e;remaining=remaining.substring(m[0].length);break}}JSCompiler_object_inline_match_633=JSCompiler_object_inline_remaining_635;JSCompiler_object_inline_remaining_635=remaining;if(null==JSCompiler_object_inline_expr_632)return warn("The selector `"+
selector+"`is invalid"),!1;remaining=JSCompiler_object_inline_match_633.slice(1);remaining=JSCompiler_object_inline_expr_632.populate(this,currentQuery,remaining);if(!1===remaining)return!1;null!=remaining&&(currentQuery=remaining);remaining=JSCompiler_object_inline_remaining_635;if(remaining.match(/^\s*$/))break}currentQuery=this[this.length-1];null!=this.currentSubject&&(currentQuery.subject=this.currentSubject);currentQuery.edgeCount=this.edgeCount;currentQuery.compoundCount=this.compoundCount;
for(currentQuery=0;currentQuery<this.length;currentQuery++){JSCompiler_object_inline_remaining_635=this[currentQuery];if(0<JSCompiler_object_inline_remaining_635.compoundCount&&0<JSCompiler_object_inline_remaining_635.edgeCount)return warn("The selector `"+selector+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(1<JSCompiler_object_inline_remaining_635.edgeCount)return warn("The selector `"+selector+"` is invalid because it uses multiple edge selectors"),!1;1===
JSCompiler_object_inline_remaining_635.edgeCount&&warn("The selector `"+selector+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var clean=function(obj){return null==obj?"":obj},
cleanVal=function(val){return string$jscomp$0(val)?'"'+val+'"':clean(val)},checkToString=function(check,subject){var value=check.value;switch(check.type){case 0:return check=clean(value),check.substring(0,check.length-1);case 3:return"["+check.field+(" "+clean(check.operator)+" ")+cleanVal(value)+"]";case 5:return subject=check.field,"["+clean(check.operator)+subject+"]";case 4:return"["+check.field+"]";case 6:return"[["+check.field+(" "+clean(check.operator)+" ")+cleanVal(value)+"]]";case 7:return value;
case 8:return"#"+value;case 9:return"."+value;case 17:case 15:return queryToString(check.parent,subject)+" \x3e "+queryToString(check.child,subject);case 18:case 16:return queryToString(check.ancestor,subject)+" "+queryToString(check.descendant,subject);case 19:value=queryToString(check.left,subject);var sub=queryToString(check.subject,subject);check=queryToString(check.right,subject);return value+(0<value.length?" ":"")+sub+check;case 20:return""}},queryToString=function(query,subject){return query.checks.reduce(function(str,
chk,i){return str+(subject===query&&0===i?"$":"")+checkToString(chk,subject)},"")},str$jscomp$0="",i$jscomp$0=0;i$jscomp$0<this.length;i$jscomp$0++){var query$jscomp$0=this[i$jscomp$0];str$jscomp$0+=queryToString(query$jscomp$0,query$jscomp$0.subject);1<this.length&&i$jscomp$0<this.length-1&&(str$jscomp$0+=", ")}return this.toStringCache=str$jscomp$0}},{matches:function(ele){for(var j=0;j<this.length;j++)if(matches$1(this[j],ele))return!0;return!1},filter:function(collection){var self=this;if(1===
self.length&&1===self[0].checks.length&&8===self[0].checks[0].type)return collection.getElementById(self[0].checks[0].value).collection();var selectorFunction=function(element){for(var j=0;j<self.length;j++)if(matches$1(self[j],element))return!0;return!1};null==self.text()&&(selectorFunction=function(){return!0});return collection.filter(selectorFunction)}}].forEach(function(p){return extend(selfn,p)});selfn.text=function(){return this.inputText};selfn.size=function(){return this.length};selfn.eq=
function(i){return this[i]};selfn.sameText=function(otherSel){return!this.invalid&&!otherSel.invalid&&this.text()===otherSel.text()};selfn.addQuery=function(q){this[this.length++]=q};selfn.selector=selfn.toString;var elesfn$g={allAre:function(selector){var selObj=new Selector(selector);return this.every(function(ele){return selObj.matches(ele)})},is:function(selector){var selObj=new Selector(selector);return this.some(function(ele){return selObj.matches(ele)})},some:function(fn,thisArg){for(var i=
0;i<this.length;i++)if(thisArg?fn.apply(thisArg,[this[i],i,this]):fn(this[i],i,this))return!0;return!1},every:function(fn,thisArg){for(var i=0;i<this.length;i++)if(thisArg?!fn.apply(thisArg,[this[i],i,this]):!fn(this[i],i,this))return!1;return!0},same:function(collection){if(this===collection)return!0;collection=this.cy().collection(collection);var thisLength=this.length;return thisLength!==collection.length?!1:1===thisLength?this[0]===collection[0]:this.every(function(ele){return collection.hasElementWithId(ele.id())})},
anySame:function(collection){collection=this.cy().collection(collection);return this.some(function(ele){return collection.hasElementWithId(ele.id())})},allAreNeighbors:function(collection){collection=this.cy().collection(collection);var nhood=this.neighborhood();return collection.every(function(ele){return nhood.hasElementWithId(ele.id())})},contains:function(collection){collection=this.cy().collection(collection);var self=this;return collection.every(function(ele){return self.hasElementWithId(ele.id())})}};
elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors;elesfn$g.has=elesfn$g.contains;elesfn$g.equal=elesfn$g.equals=elesfn$g.same;var cache$jscomp$0=function(fn,name){return function(arg1,arg2,arg3,arg4){var key;null==arg1?key="":elementOrCollection(arg1)&&1===arg1.length&&(key=arg1.id());if(1===this.length&&key){var _p=this[0]._private;_p=_p.traversalCache=_p.traversalCache||{};_p=_p[name]=_p[name]||[];key=hashString(key);var cacheHit=_p[key];return cacheHit?cacheHit:_p[key]=fn.call(this,arg1,arg2,
arg3,arg4)}return fn.call(this,arg1,arg2,arg3,arg4)}},elesfn$f={parent:function(selector){var parents=[];if(1===this.length){var parent=this[0]._private.parent;if(parent)return parent}for(parent=0;parent<this.length;parent++){var _parent=this[parent]._private.parent;_parent&&parents.push(_parent)}return this.spawn(parents,!0).filter(selector)},parents:function(selector){for(var parents=[],eles=this.parent();eles.nonempty();){for(var i=0;i<eles.length;i++)parents.push(eles[i]);eles=eles.parent()}return this.spawn(parents,
!0).filter(selector)},commonAncestors:function(selector){for(var ancestors,i=0;i<this.length;i++){var parents=this[i].parents();ancestors=ancestors||parents;ancestors=ancestors.intersect(parents)}return ancestors.filter(selector)},orphans:function(selector){return this.stdFilter(function(ele){return ele.isOrphan()}).filter(selector)},nonorphans:function(selector){return this.stdFilter(function(ele){return ele.isChild()}).filter(selector)},children:cache$jscomp$0(function(selector){for(var children=
[],i=0;i<this.length;i++)for(var eleChildren=this[i]._private.children,j=0;j<eleChildren.length;j++)children.push(eleChildren[j]);return this.spawn(children,!0).filter(selector)},"children"),siblings:function(selector){return this.parent().children().not(this).filter(selector)},isParent:function(){var ele=this[0];if(ele)return ele.isNode()&&0!==ele._private.children.length},isChildless:function(){var ele=this[0];if(ele)return ele.isNode()&&0===ele._private.children.length},isChild:function(){var ele=
this[0];if(ele)return ele.isNode()&&null!=ele._private.parent},isOrphan:function(){var ele=this[0];if(ele)return ele.isNode()&&null==ele._private.parent},descendants:function(selector){function add(eles){for(var i=0;i<eles.length;i++){var ele=eles[i];elements.push(ele);ele.children().nonempty()&&add(ele.children())}}var elements=[];add(this.children());return this.spawn(elements,!0).filter(selector)},forEachDown:function(fn){return forEachCompound(this,fn,1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!0,addChildren)},forEachUp:function(fn){return forEachCompound(this,fn,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,addParent)},forEachUpAndDown:function(fn){return forEachCompound(this,fn,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,addParentAndChildren)}};elesfn$f.ancestors=elesfn$f.parents;var elesfn$e;var fn$5=elesfn$e={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",
allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",
triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var ele=this[0];if(ele)return ele._private.data.id}};fn$5.attr=fn$5.data;fn$5.removeAttr=fn$5.removeData;var elesfn$d={};extend(elesfn$d,{degree:defineDegreeFunction(function(node,edge){return edge.source().same(edge.target())?2:1}),indegree:defineDegreeFunction(function(node,
edge){return edge.target().same(node)?1:0}),outdegree:defineDegreeFunction(function(node,edge){return edge.source().same(node)?1:0})});extend(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",function(degree,min){return degree<min}),maxDegree:defineDegreeBoundsFunction("degree",function(degree,max){return degree>max}),minIndegree:defineDegreeBoundsFunction("indegree",function(degree,min){return degree<min}),maxIndegree:defineDegreeBoundsFunction("indegree",function(degree,max){return degree>
max}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(degree,min){return degree<min}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(degree,max){return degree>max})});extend(elesfn$d,{totalDegree:function(includeLoops){for(var total=0,nodes=this.nodes(),i=0;i<nodes.length;i++)total+=nodes[i].degree(includeLoops);return total}});var elesfn$c,beforePositionSet=function(eles,newPos,silent){for(var i=0;i<eles.length;i++){var ele=eles[i];if(!ele.locked()){var oldPos=ele._private.position;
oldPos={x:null!=newPos.x?newPos.x-oldPos.x:0,y:null!=newPos.y?newPos.y-oldPos.y:0};!ele.isParent()||0===oldPos.x&&0===oldPos.y||ele.children().shift(oldPos,silent);ele.dirtyBoundingBoxCache()}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(ele){ele.updateCompoundBounds()},beforeSet:function(eles,newPos){beforePositionSet(eles,
newPos,!1)},onSet:function(eles){eles.dirtyCompoundBoundsCache()},canSet:function(ele){return!ele.locked()}};var fn$4=elesfn$c={position:define.data(positionDef),silentPosition:define.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(eles,newPos){beforePositionSet(eles,newPos,!0)},onSet:function(eles){eles.dirtyCompoundBoundsCache()}})),positions:function(pos,silent){if(plainObject(pos))silent?this.silentPosition(pos):this.position(pos);
else if(fn$6(pos)){var cy=this.cy();cy.startBatch();for(var i=0;i<this.length;i++){var ele=this[i],_pos;if(_pos=pos(ele,i))silent?ele.silentPosition(_pos):ele.position(_pos)}cy.endBatch()}return this},silentPositions:function(pos){return this.positions(pos,!0)},shift:function(dim,val,silent){if(plainObject(dim)){var delta={x:number$1(dim.x)?dim.x:0,y:number$1(dim.y)?dim.y:0};silent=val}else string$jscomp$0(dim)&&number$1(val)&&(delta={x:0,y:0},delta[dim]=val);if(null!=delta){dim=this.cy();dim.startBatch();
for(val=0;val<this.length;val++){var ele=this[val];if(!(dim.hasCompoundNodes()&&ele.isChild()&&ele.ancestors().anySame(this))){var pos=ele.position();pos={x:pos.x+delta.x,y:pos.y+delta.y};silent?ele.silentPosition(pos):ele.position(pos)}}dim.endBatch()}return this},silentShift:function(dim,val){plainObject(dim)?this.shift(dim,!0):string$jscomp$0(dim)&&number$1(val)&&this.shift(dim,val,!0);return this},renderedPosition:function(dim,val){var ele=this[0],cy=this.cy(),zoom=cy.zoom();cy=cy.pan();var rpos=
plainObject(dim)?dim:void 0,setting=void 0!==rpos||void 0!==val&&string$jscomp$0(dim);if(ele&&ele.isNode())if(setting)for(ele=0;ele<this.length;ele++)setting=this[ele],void 0!==val?setting.position(dim,(val-cy[dim])/zoom):void 0!==rpos&&setting.position({x:(rpos.x-cy.x)/zoom,y:(rpos.y-cy.y)/zoom});else return val=ele.position(),rpos=modelToRenderedPosition(val,zoom,cy),void 0===dim?rpos:rpos[dim];else if(!setting)return;return this},relativePosition:function(dim,val){var ele=this[0],cy=this.cy(),
ppos=plainObject(dim)?dim:void 0,setting=void 0!==ppos||void 0!==val&&string$jscomp$0(dim);cy=cy.hasCompoundNodes();if(ele&&ele.isNode())if(setting)for(ele=0;ele<this.length;ele++){setting=this[ele];var parent=cy?setting.parent():null,hasParent=parent&&0<parent.length,relativeToParent=hasParent;hasParent&&(parent=parent[0]);parent=relativeToParent?parent.position():{x:0,y:0};void 0!==val?setting.position(dim,val+parent[dim]):void 0!==ppos&&setting.position({x:ppos.x+parent.x,y:ppos.y+parent.y})}else return val=
ele.position(),(cy=(ppos=cy?ele.parent():null)&&0<ppos.length)&&(ppos=ppos[0]),ppos=cy?ppos.position():{x:0,y:0},ppos={x:val.x-ppos.x,y:val.y-ppos.y},void 0===dim?ppos:ppos[dim];else if(!setting)return;return this}};fn$4.modelPosition=fn$4.point=fn$4.position;fn$4.modelPositions=fn$4.points=fn$4.positions;fn$4.renderedPoint=fn$4.renderedPosition;fn$4.relativePoint=fn$4.relativePosition;var elesfn$b;var fn$3=elesfn$b={};elesfn$b.renderedBoundingBox=function(options){options=this.boundingBox(options);
var cy=this.cy(),zoom=cy.zoom(),pan=cy.pan();cy=options.x1*zoom+pan.x;var x2=options.x2*zoom+pan.x,y1=options.y1*zoom+pan.y;options=options.y2*zoom+pan.y;return{x1:cy,x2,y1,y2:options,w:x2-cy,h:options-y1}};elesfn$b.dirtyCompoundBoundsCache=function(){var silent=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,cy=this.cy();if(!cy.styleEnabled()||!cy.hasCompoundNodes())return this;this.forEachUp(function(ele){if(ele.isParent()){var _p=ele._private;_p.compoundBoundsClean=!1;_p.bbCache=null;
silent||ele.emitAndNotify("bounds")}});return this};elesfn$b.updateCompoundBounds=function(){function update(parent){function computeBiasValues(propDiff,propBias,propBiasComplement){var biasDiff=0,biasComplementDiff=0,biasTotal=propBias+propBiasComplement;0<propDiff&&0<biasTotal&&(biasDiff=propBias/biasTotal*propDiff,biasComplementDiff=propBiasComplement/biasTotal*propDiff);return{biasDiff,biasComplementDiff}}if(parent.isParent()){var _p=parent._private,children=parent.children(),includeLabels="include"===
parent.pstyle("compound-sizing-wrt-labels").value,JSCompiler_object_inline_val_904=parent.pstyle("min-width").pfValue,JSCompiler_object_inline_left_905=parent.pstyle("min-width-bias-left"),JSCompiler_object_inline_right_906=parent.pstyle("min-width-bias-right"),JSCompiler_object_inline_val_907=parent.pstyle("min-height").pfValue,JSCompiler_object_inline_top_908=parent.pstyle("min-height-bias-top"),JSCompiler_object_inline_bottom_909=parent.pstyle("min-height-bias-bottom");children=children.boundingBox({includeLabels,
includeOverlays:!1,useCache:!1});includeLabels=_p.position;if(0===children.w||0===children.h)children={w:parent.pstyle("width").pfValue,h:parent.pstyle("height").pfValue},children.x1=includeLabels.x-children.w/2,children.x2=includeLabels.x+children.w/2,children.y1=includeLabels.y-children.h/2,children.y2=includeLabels.y+children.h/2;var leftVal=JSCompiler_object_inline_left_905.value;"px"===JSCompiler_object_inline_left_905.units&&0<JSCompiler_object_inline_val_904&&(leftVal=100*leftVal/JSCompiler_object_inline_val_904);
JSCompiler_object_inline_left_905=JSCompiler_object_inline_right_906.value;"px"===JSCompiler_object_inline_right_906.units&&0<JSCompiler_object_inline_val_904&&(JSCompiler_object_inline_left_905=100*JSCompiler_object_inline_left_905/JSCompiler_object_inline_val_904);JSCompiler_object_inline_right_906=JSCompiler_object_inline_top_908.value;"px"===JSCompiler_object_inline_top_908.units&&0<JSCompiler_object_inline_val_907&&(JSCompiler_object_inline_right_906=100*JSCompiler_object_inline_right_906/JSCompiler_object_inline_val_907);
JSCompiler_object_inline_top_908=JSCompiler_object_inline_bottom_909.value;"px"===JSCompiler_object_inline_bottom_909.units&&0<JSCompiler_object_inline_val_907&&(JSCompiler_object_inline_top_908=100*JSCompiler_object_inline_top_908/JSCompiler_object_inline_val_907);leftVal=computeBiasValues(JSCompiler_object_inline_val_904-children.w,leftVal,JSCompiler_object_inline_left_905);JSCompiler_object_inline_bottom_909=leftVal.biasDiff;leftVal=leftVal.biasComplementDiff;JSCompiler_object_inline_right_906=
computeBiasValues(JSCompiler_object_inline_val_907-children.h,JSCompiler_object_inline_right_906,JSCompiler_object_inline_top_908);JSCompiler_object_inline_top_908=JSCompiler_object_inline_right_906.biasDiff;JSCompiler_object_inline_right_906=JSCompiler_object_inline_right_906.biasComplementDiff;_p.autoPadding=function(width,height,paddingObject,relativeTo){if("%"===paddingObject.units)switch(relativeTo){case "width":return 0<width?paddingObject.pfValue*width:0;case "height":return 0<height?paddingObject.pfValue*
height:0;case "average":return 0<width&&0<height?paddingObject.pfValue*(width+height)/2:0;case "min":return 0<width&&0<height?width>height?paddingObject.pfValue*height:paddingObject.pfValue*width:0;case "max":return 0<width&&0<height?width>height?paddingObject.pfValue*width:paddingObject.pfValue*height:0;default:return 0}else return"px"===paddingObject.units?paddingObject.pfValue:0}(children.w,children.h,parent.pstyle("padding"),parent.pstyle("padding-relative-to").value);_p.autoWidth=Math.max(children.w,
JSCompiler_object_inline_val_904);includeLabels.x=(-JSCompiler_object_inline_bottom_909+children.x1+children.x2+leftVal)/2;_p.autoHeight=Math.max(children.h,JSCompiler_object_inline_val_907);includeLabels.y=(-JSCompiler_object_inline_top_908+children.y1+children.y2+JSCompiler_object_inline_right_906)/2}}var force=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,cy=this.cy();if(!cy.styleEnabled()||!cy.hasCompoundNodes()||!force&&cy.batching())return this;for(var i=0;i<this.length;i++){var ele=
this[i],_p$jscomp$0=ele._private;if(!_p$jscomp$0.compoundBoundsClean||force)update(ele),cy.batching()||(_p$jscomp$0.compoundBoundsClean=!0)}return this};var noninf=function(x){return Infinity===x||-Infinity===x?0:x},updateBounds=function(b,x1,y1,x2,y2){0!==x2-x1&&0!==y2-y1&&null!=x1&&null!=y1&&null!=x2&&null!=y2&&(b.x1=x1<b.x1?x1:b.x1,b.x2=x2>b.x2?x2:b.x2,b.y1=y1<b.y1?y1:b.y1,b.y2=y2>b.y2?y2:b.y2,b.w=b.x2-b.x1,b.h=b.y2-b.y1)},updateBoundsFromBox=function(b,b2){return null==b2?b:updateBounds(b,b2.x1,
b2.y1,b2.x2,b2.y2)},updateBoundsFromArrow=function(bounds,ele,prefix){if(!ele.cy().headless()){var _p=ele._private,rstyle=_p.rstyle,halfArW=rstyle.arrowWidth/2;"none"!==ele.pstyle(prefix+"-arrow-shape").value&&("source"===prefix?(ele=rstyle.srcX,rstyle=rstyle.srcY):"target"===prefix?(ele=rstyle.tgtX,rstyle=rstyle.tgtY):(ele=rstyle.midX,rstyle=rstyle.midY),_p=_p.arrowBounds=_p.arrowBounds||{},prefix=_p[prefix]=_p[prefix]||{},prefix.x1=ele-halfArW,prefix.y1=rstyle-halfArW,prefix.x2=ele+halfArW,prefix.y2=
rstyle+halfArW,prefix.w=prefix.x2-prefix.x1,prefix.h=prefix.y2-prefix.y1,expandBoundingBox(prefix,1),updateBounds(bounds,prefix.x1,prefix.y1,prefix.x2,prefix.y2))}},updateBoundsFromLabel=function(bounds,ele,prefix){if(!ele.cy().headless()){var prefixDash=prefix?prefix+"-":"";var _p=ele._private,rstyle=_p.rstyle;if(ele.pstyle(prefixDash+"label").strValue){var halign=ele.pstyle("text-halign"),valign=ele.pstyle("text-valign"),labelWidth=getPrefixedProperty(rstyle,"labelWidth",prefix),labelHeight=getPrefixedProperty(rstyle,
"labelHeight",prefix),labelX=getPrefixedProperty(rstyle,"labelX",prefix),labelY=getPrefixedProperty(rstyle,"labelY",prefix),marginX=ele.pstyle(prefixDash+"text-margin-x").pfValue,marginY=ele.pstyle(prefixDash+"text-margin-y").pfValue;rstyle=ele.isEdge();prefixDash=ele.pstyle(prefixDash+"text-rotation");var outlineWidth=ele.pstyle("text-outline-width").pfValue,halfBorderWidth=ele.pstyle("text-border-width").pfValue/2;ele=ele.pstyle("text-background-padding").pfValue;var lw_2=labelWidth/2,lh_2=labelHeight/
2;if(rstyle){var lx1=labelX-lw_2;var lx2=labelX+lw_2;var ly1=labelY-lh_2;var ly2=labelY+lh_2}else{switch(halign.value){case "left":lx1=labelX-labelWidth;lx2=labelX;break;case "center":lx1=labelX-lw_2;lx2=labelX+lw_2;break;case "right":lx1=labelX,lx2=labelX+labelWidth}switch(valign.value){case "top":ly1=labelY-labelHeight;ly2=labelY;break;case "center":ly1=labelY-lh_2;ly2=labelY+lh_2;break;case "bottom":ly1=labelY,ly2=labelY+labelHeight}}lx1+=marginX-Math.max(outlineWidth,halfBorderWidth)-ele-2;lx2+=
marginX+Math.max(outlineWidth,halfBorderWidth)+ele+2;ly1+=marginY-Math.max(outlineWidth,halfBorderWidth)-ele-2;ly2+=marginY+Math.max(outlineWidth,halfBorderWidth)+ele+2;labelHeight=prefix||"main";labelWidth=_p.labelBounds;labelX=labelWidth[labelHeight]=labelWidth[labelHeight]||{};labelX.x1=lx1;labelX.y1=ly1;labelX.x2=lx2;labelX.y2=ly2;labelX.w=lx2-lx1;labelX.h=ly2-ly1;labelX=rstyle&&"autorotate"===prefixDash.strValue;labelY=null!=prefixDash.pfValue&&0!==prefixDash.pfValue;if(labelX||labelY){prefix=
labelX?getPrefixedProperty(_p.rstyle,"labelAngle",prefix):prefixDash.pfValue;var cos=Math.cos(prefix),sin=Math.sin(prefix),xo=(lx1+lx2)/2,yo=(ly1+ly2)/2;if(!rstyle){switch(halign.value){case "left":xo=lx2;break;case "right":xo=lx1}switch(valign.value){case "top":yo=ly2;break;case "bottom":yo=ly1}}rstyle=function(x,y){x-=xo;y-=yo;return{x:x*cos-y*sin+xo,y:x*sin+y*cos+yo}};halign=rstyle(lx1,ly1);valign=rstyle(lx1,ly2);prefix=rstyle(lx2,ly1);ly2=rstyle(lx2,ly2);lx1=Math.min(halign.x,valign.x,prefix.x,
ly2.x);lx2=Math.max(halign.x,valign.x,prefix.x,ly2.x);ly1=Math.min(halign.y,valign.y,prefix.y,ly2.y);ly2=Math.max(halign.y,valign.y,prefix.y,ly2.y)}halign=labelHeight+"Rot";halign=labelWidth[halign]=labelWidth[halign]||{};halign.x1=lx1;halign.y1=ly1;halign.x2=lx2;halign.y2=ly2;halign.w=lx2-lx1;halign.h=ly2-ly1;updateBounds(bounds,lx1,ly1,lx2,ly2);updateBounds(_p.labelBounds.all,lx1,ly1,lx2,ly2)}return bounds}},boundingBoxImpl=function(ele$jscomp$0,options){var cy=ele$jscomp$0._private.cy,styleEnabled=
cy.styleEnabled(),headless=cy.headless();cy=makeBoundingBox();var _p=ele$jscomp$0._private,isNode=ele$jscomp$0.isNode(),isEdge=ele$jscomp$0.isEdge(),x,rstyle=_p.rstyle,manualExpansion=isNode&&styleEnabled?ele$jscomp$0.pstyle("bounds-expansion").pfValue:[0],isDisplayed=function(ele){return"none"!==ele.pstyle("display").value};if(isDisplayed=!styleEnabled||isDisplayed(ele$jscomp$0)&&(!isEdge||isDisplayed(ele$jscomp$0.source())&&isDisplayed(ele$jscomp$0.target()))){var overlayPadding=x=0;styleEnabled&&
options.includeOverlays&&(x=ele$jscomp$0.pstyle("overlay-opacity").value,0!==x&&(overlayPadding=ele$jscomp$0.pstyle("overlay-padding").value));var ey1=x=0;styleEnabled&&options.includeUnderlays&&(x=ele$jscomp$0.pstyle("underlay-opacity").value,0!==x&&(ey1=ele$jscomp$0.pstyle("underlay-padding").value));overlayPadding=Math.max(overlayPadding,ey1);x=x=0;styleEnabled&&(x=ele$jscomp$0.pstyle("width").pfValue,x/=2);if(isNode&&options.includeNodes){var y=ele$jscomp$0.position();x=y.x;y=y.y;headless=ele$jscomp$0.outerWidth()/
2;isNode=ele$jscomp$0.outerHeight()/2;updateBounds(cy,x-headless,y-isNode,x+headless,y+isNode)}else if(isEdge&&options.includeEdges)if(styleEnabled&&!headless){var curveStyle=ele$jscomp$0.pstyle("curve-style").strValue;headless=Math.min(rstyle.srcX,rstyle.midX,rstyle.tgtX);isNode=Math.max(rstyle.srcX,rstyle.midX,rstyle.tgtX);ey1=Math.min(rstyle.srcY,rstyle.midY,rstyle.tgtY);var ey2=Math.max(rstyle.srcY,rstyle.midY,rstyle.tgtY);updateBounds(cy,headless-x,ey1-x,isNode+x,ey2+x);if("haystack"===curveStyle)(y=
rstyle.haystackPts)&&2===y.length&&(headless=y[0].x,ey1=y[0].y,isNode=y[1].x,ey2=y[1].y,headless>isNode&&(y=headless,headless=isNode,isNode=y),ey1>ey2&&(y=ey1,ey1=ey2,ey2=y),updateBounds(cy,headless-x,ey1-x,isNode+x,ey2+x));else if("bezier"===curveStyle||"unbundled-bezier"===curveStyle||"segments"===curveStyle||"taxi"===curveStyle){switch(curveStyle){case "bezier":case "unbundled-bezier":y=rstyle.bezierPts;break;case "segments":case "taxi":y=rstyle.linePts}if(null!=y)for(rstyle=0;rstyle<y.length;rstyle++)ey2=
y[rstyle],headless=ey2.x-x,isNode=ey2.x+x,ey1=ey2.y-x,ey2=ey2.y+x,updateBounds(cy,headless,ey1,isNode,ey2)}}else ey1=ele$jscomp$0.source().position(),y=ele$jscomp$0.target().position(),headless=ey1.x,isNode=y.x,ey1=ey1.y,ey2=y.y,headless>isNode&&(y=headless,headless=isNode,isNode=y),ey1>ey2&&(y=ey1,ey1=ey2,ey2=y),updateBounds(cy,headless-x,ey1-x,isNode+x,ey2+x);styleEnabled&&options.includeEdges&&isEdge&&(updateBoundsFromArrow(cy,ele$jscomp$0,"mid-source"),updateBoundsFromArrow(cy,ele$jscomp$0,"mid-target"),
updateBoundsFromArrow(cy,ele$jscomp$0,"source"),updateBoundsFromArrow(cy,ele$jscomp$0,"target"));styleEnabled&&"yes"===ele$jscomp$0.pstyle("ghost").value&&(x=ele$jscomp$0.pstyle("ghost-offset-x").pfValue,y=ele$jscomp$0.pstyle("ghost-offset-y").pfValue,updateBounds(cy,cy.x1+x,cy.y1+y,cy.x2+x,cy.y2+y));x=_p.bodyBounds=_p.bodyBounds||{};assignBoundingBox(x,cy);expandBoundingBoxSides(x,manualExpansion);expandBoundingBox(x,1);styleEnabled&&(headless=cy.x1,isNode=cy.x2,ey1=cy.y1,ey2=cy.y2,updateBounds(cy,
headless-overlayPadding,ey1-overlayPadding,isNode+overlayPadding,ey2+overlayPadding));overlayPadding=_p.overlayBounds=_p.overlayBounds||{};assignBoundingBox(overlayPadding,cy);expandBoundingBoxSides(overlayPadding,manualExpansion);expandBoundingBox(overlayPadding,1);_p=_p.labelBounds=_p.labelBounds||{};null!=_p.all?clearBoundingBox(_p.all):_p.all=makeBoundingBox();styleEnabled&&options.includeLabels&&(options.includeMainLabels&&updateBoundsFromLabel(cy,ele$jscomp$0,null),isEdge&&(options.includeSourceLabels&&
updateBoundsFromLabel(cy,ele$jscomp$0,"source"),options.includeTargetLabels&&updateBoundsFromLabel(cy,ele$jscomp$0,"target")))}cy.x1=noninf(cy.x1);cy.y1=noninf(cy.y1);cy.x2=noninf(cy.x2);cy.y2=noninf(cy.y2);cy.w=noninf(cy.x2-cy.x1);cy.h=noninf(cy.y2-cy.y1);0<cy.w&&0<cy.h&&isDisplayed&&(expandBoundingBoxSides(cy,manualExpansion),expandBoundingBox(cy,1));return cy},getKey=function(opts){var i=0,tf=function(val){return(val?1:0)<<i++};var key=0+tf(opts.incudeNodes);key+=tf(opts.includeEdges);key+=tf(opts.includeLabels);
key+=tf(opts.includeMainLabels);key+=tf(opts.includeSourceLabels);key+=tf(opts.includeTargetLabels);return key+=tf(opts.includeOverlays)},getBoundingBoxPosKey=function(ele){if(ele.isEdge()){var p1=ele.source().position();ele=ele.target().position();return hashIntsArray([Math.round(p1.x),Math.round(p1.y),Math.round(ele.x),Math.round(ele.y)])}return 0},cachedBoundingBoxImpl=function(ele$jscomp$0,opts){var _p=ele$jscomp$0._private,isEdge=ele$jscomp$0.isEdge(),usingDefOpts=(null==opts?defBbOptsKey:getKey(opts))===
defBbOptsKey,currPosKey=getBoundingBoxPosKey(ele$jscomp$0);var bb=_p.bbCachePosKey===currPosKey;var useCache=opts.useCache&&bb,isDirty=function(ele){return null==ele._private.bbCache||ele._private.styleDirty};!useCache||isDirty(ele$jscomp$0)||isEdge&&isDirty(ele$jscomp$0.source())||isDirty(ele$jscomp$0.target())?(bb||ele$jscomp$0.recalculateRenderedStyle(useCache),bb=boundingBoxImpl(ele$jscomp$0,defBbOpts),_p.bbCache=bb,_p.bbCachePosKey=currPosKey):bb=_p.bbCache;if(!usingDefOpts){ele$jscomp$0=ele$jscomp$0.isNode();
bb=makeBoundingBox();if(opts.includeNodes&&ele$jscomp$0||opts.includeEdges&&!ele$jscomp$0)opts.includeOverlays?updateBoundsFromBox(bb,_p.overlayBounds):updateBoundsFromBox(bb,_p.bodyBounds);opts.includeLabels&&(opts.includeMainLabels&&(!isEdge||opts.includeSourceLabels&&opts.includeTargetLabels)?updateBoundsFromBox(bb,_p.labelBounds.all):(opts.includeMainLabels&&updateBoundsFromBox(bb,_p.labelBounds.mainRot),opts.includeSourceLabels&&updateBoundsFromBox(bb,_p.labelBounds.sourceRot),opts.includeTargetLabels&&
updateBoundsFromBox(bb,_p.labelBounds.targetRot)));bb.w=bb.x2-bb.x1;bb.h=bb.y2-bb.y1}return bb},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults$g(defBbOpts);elesfn$b.boundingBox=function(options){if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==options&&void 0!==options.useCache&&
!0!==options.useCache){var bounds=makeBoundingBox();options=options||defBbOpts;var opts=filledBbOpts(options);if(this.cy().styleEnabled())for(var i=0;i<this.length;i++){var ele=this[i],_p=ele._private,currPosKey=getBoundingBoxPosKey(ele);currPosKey=_p.bbCachePosKey===currPosKey;ele.recalculateRenderedStyle(opts.useCache&&currPosKey&&!_p.styleDirty)}this.updateCompoundBounds(!options.useCache);for(options=0;options<this.length;options++)updateBoundsFromBox(bounds,cachedBoundingBoxImpl(this[options],
opts))}else options=void 0===options?defBbOpts:filledBbOpts(options),bounds=cachedBoundingBoxImpl(this[0],options);bounds.x1=noninf(bounds.x1);bounds.y1=noninf(bounds.y1);bounds.x2=noninf(bounds.x2);bounds.y2=noninf(bounds.y2);bounds.w=noninf(bounds.x2-bounds.x1);bounds.h=noninf(bounds.y2-bounds.y1);return bounds};elesfn$b.dirtyBoundingBoxCache=function(){for(var i=0;i<this.length;i++){var _p=this[i]._private;_p.bbCache=null;_p.bbCachePosKey=null;_p.bodyBounds=null;_p.overlayBounds=null;_p.labelBounds.all=
null;_p.labelBounds.source=null;_p.labelBounds.target=null;_p.labelBounds.main=null;_p.labelBounds.sourceRot=null;_p.labelBounds.targetRot=null;_p.labelBounds.mainRot=null;_p.arrowBounds.source=null;_p.arrowBounds.target=null;_p.arrowBounds["mid-source"]=null;_p.arrowBounds["mid-target"]=null}this.emitAndNotify("bounds");return this};elesfn$b.boundingBoxAt=function(fn){var nodes=this.nodes(),cy=this.cy(),hasCompoundNodes=cy.hasCompoundNodes(),parents=cy.collection();hasCompoundNodes&&(parents=nodes.filter(function(node){return node.isParent()}),
nodes=nodes.not(parents));if(plainObject(fn)){var obj=fn;fn=function(){return obj}}cy.startBatch();nodes.forEach(function(node,i){return node._private.bbAtOldPos=fn(node,i)}).silentPositions(fn);hasCompoundNodes&&(parents.dirtyCompoundBoundsCache(),parents.dirtyBoundingBoxCache(),parents.updateCompoundBounds(!0));var bb=copyBoundingBox(this.boundingBox({useCache:!1}));nodes.silentPositions(function(node){return node._private.bbAtOldPos});hasCompoundNodes&&(parents.dirtyCompoundBoundsCache(),parents.dirtyBoundingBoxCache(),
parents.updateCompoundBounds(!0));cy.endBatch();return bb};fn$3.boundingbox=fn$3.bb=fn$3.boundingBox;fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var elesfn$a;var fn$2=elesfn$a={};var defineDimFns=function(opts){opts.uppercaseName=capitalize(opts.name);opts.autoName="auto"+opts.uppercaseName;opts.labelName="label"+opts.uppercaseName;opts.outerName="outer"+opts.uppercaseName;opts.uppercaseOuterName=capitalize(opts.outerName);fn$2[opts.name]=function(){var ele=this[0],_p=ele._private,styleEnabled=
_p.cy._private.styleEnabled;if(ele)if(styleEnabled){if(ele.isParent())return ele.updateCompoundBounds(),_p[opts.autoName]||0;styleEnabled=ele.pstyle(opts.name);switch(styleEnabled.strValue){case "label":return ele.recalculateRenderedStyle(),_p.rstyle[opts.labelName]||0;default:return styleEnabled.pfValue}}else return 1};fn$2["outer"+opts.uppercaseName]=function(){var ele=this[0],styleEnabled=ele._private.cy._private.styleEnabled;if(ele){if(styleEnabled){styleEnabled=ele[opts.name]();var border=ele.pstyle("border-width").pfValue;
ele=2*ele.padding();return styleEnabled+border+ele}return 1}};fn$2["rendered"+opts.uppercaseName]=function(){var ele=this[0];if(ele)return ele[opts.name]()*this.cy().zoom()};fn$2["rendered"+opts.uppercaseOuterName]=function(){var ele=this[0];if(ele)return ele[opts.outerName]()*this.cy().zoom()}};defineDimFns({name:"width"});defineDimFns({name:"height"});elesfn$a.padding=function(){var ele=this[0],_p=ele._private;return ele.isParent()?(ele.updateCompoundBounds(),void 0!==_p.autoPadding?_p.autoPadding:
ele.pstyle("padding").pfValue):ele.pstyle("padding").pfValue};elesfn$a.paddedHeight=function(){var ele=this[0];return ele.height()+2*ele.padding()};elesfn$a.paddedWidth=function(){var ele=this[0];return ele.width()+2*ele.padding()};var ifEdgeRenderedPositions=function(ele,getPoints){if(ele.isEdge()){var cy=ele.cy(),pan=cy.pan(),zoom=cy.zoom();return getPoints(ele).map(function(p){return modelToRenderedPosition(p,zoom,pan)})}},pts={controlPoints:{get:function(ele){return ele.renderer().getControlPoints(ele)},
mult:!0},segmentPoints:{get:function(ele){return ele.renderer().getSegmentPoints(ele)},mult:!0},sourceEndpoint:{get:function(ele){return ele.renderer().getSourceEndpoint(ele)}},targetEndpoint:{get:function(ele){return ele.renderer().getTargetEndpoint(ele)}},midpoint:{get:function(ele){return ele.renderer().getEdgeMidpoint(ele)}}},renderedName=function(name){return"rendered"+name[0].toUpperCase()+name.substr(1)},edgePoints=Object.keys(pts).reduce(function(obj,name){var spec=pts[name],rName=renderedName(name);
obj[name]=function(){var JSCompiler_inline_result=spec.get;JSCompiler_inline_result=this.isEdge()?JSCompiler_inline_result(this):void 0;return JSCompiler_inline_result};obj[rName]=spec.mult?function(){return ifEdgeRenderedPositions(this,spec.get)}:function(){var JSCompiler_inline_result=spec.get;if(this.isEdge()){var cy=this.cy();JSCompiler_inline_result=modelToRenderedPosition(JSCompiler_inline_result(this),cy.zoom(),cy.pan())}else JSCompiler_inline_result=void 0;return JSCompiler_inline_result};
return obj},{}),dimensions=extend({},elesfn$c,elesfn$b,elesfn$a,edgePoints),Event=function(src,props){this.recycle(src,props)};Event.prototype={instanceString:function(){return"event"},recycle:function(src,props){this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse;null!=src&&src.preventDefault?(this.type=src.type,this.isDefaultPrevented=src.defaultPrevented?returnTrue:returnFalse):null!=src&&src.type?props=src:this.type=src;null!=props&&(this.originalEvent=
props.originalEvent,this.type=null!=props.type?props.type:this.type,this.cy=props.cy,this.target=props.target,this.position=props.position,this.renderedPosition=props.renderedPosition,this.namespace=props.namespace,this.layout=props.layout);if(null!=this.cy&&null!=this.position&&null==this.renderedPosition){props=this.position;var zoom=this.cy.zoom(),pan=this.cy.pan();this.renderedPosition={x:props.x*zoom+pan.x,y:props.y*zoom+pan.y}}this.timeStamp=src&&src.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=
returnTrue;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,defaults$8={qualifierCompare:function(q1,
q2){return q1===q2},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(context){return context},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={},p=Emitter.prototype,forEachEvent=function(self,handler,events,qualifier,callback,conf,confOverrides){fn$6(qualifier)&&(callback=qualifier,qualifier=null);confOverrides&&(conf=null==conf?confOverrides:
extend({},conf,confOverrides));events=array$jscomp$0(events)?events:events.split(/\s+/);for(confOverrides=0;confOverrides<events.length;confOverrides++){var evt=events[confOverrides];if(!emptyString(evt)){var match=evt.match(eventRegex);if(match&&!1===handler(self,evt,match[1],match[2]?match[2]:null,qualifier,callback,conf))break}}},makeEventObj=function(self,obj){self.addEventFields(self.context,obj);return new Event(obj.type,obj)},forEachEventObj=function(self,handler,events){if("event"===instanceStr(events))handler(self,
events);else if(plainObject(events))handler(self,makeEventObj(self,events));else{events=array$jscomp$0(events)?events:events.split(/\s+/);for(var i=0;i<events.length;i++){var evt=events[i];!emptyString(evt)&&(evt=evt.match(eventRegex))&&(evt=makeEventObj(self,{type:evt[1],namespace:evt[2]?evt[2]:null,target:self.context}),handler(self,evt))}}};p.on=p.addListener=function(events,qualifier$jscomp$0,callback$jscomp$0,conf$jscomp$0,confOverrides){forEachEvent(this,function(self,event,type,namespace,qualifier,
callback,conf){fn$6(callback)&&self.listeners.push({event,callback,type,namespace,qualifier,conf})},events,qualifier$jscomp$0,callback$jscomp$0,conf$jscomp$0,confOverrides);return this};p.one=function(events,qualifier,callback,conf){return this.on(events,qualifier,callback,conf,{one:!0})};p.removeListener=p.off=function(events,qualifier$jscomp$0,callback$jscomp$0,conf){var _this=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var listeners=this.listeners,_loop=function(i){var listener=
listeners[i];forEachEvent(_this,function(self,event,type,namespace,qualifier,callback){if(!(listener.type!==type&&"*"!==events||(namespace||".*"===listener.namespace)&&listener.namespace!==namespace||qualifier&&!self.qualifierCompare(listener.qualifier,qualifier)||callback&&listener.callback!==callback))return listeners.splice(i,1),!1},events,qualifier$jscomp$0,callback$jscomp$0,conf)},i$jscomp$0=listeners.length-1;0<=i$jscomp$0;i$jscomp$0--)_loop(i$jscomp$0);return this};p.removeAllListeners=function(){return this.removeListener("*")};
p.emit=p.trigger=function(events,extraParams,manualCallback){var listeners=this.listeners,numListenersBeforeEmit=listeners.length;this.emitting++;array$jscomp$0(extraParams)||(extraParams=[extraParams]);forEachEventObj(this,function(self,eventObj){null!=manualCallback&&(listeners=[{event:eventObj.event,type:eventObj.type,namespace:eventObj.namespace,callback:manualCallback}],numListenersBeforeEmit=listeners.length);for(var _loop2=function(i){var listener=listeners[i];if(listener.type===eventObj.type&&
(!listener.namespace||listener.namespace===eventObj.namespace||".*"===listener.namespace)&&self.eventMatches(self.context,listener,eventObj)){i=[eventObj];null!=extraParams&&push(i,extraParams);self.beforeEmit(self.context,listener,eventObj);listener.conf&&listener.conf.one&&(self.listeners=self.listeners.filter(function(l){return l!==listener}));var context=self.callbackContext(self.context,listener,eventObj);i=listener.callback.apply(context,i);self.afterEmit(self.context,listener,eventObj);!1===
i&&(eventObj.stopPropagation(),eventObj.preventDefault())}},i$jscomp$0=0;i$jscomp$0<numListenersBeforeEmit;i$jscomp$0++)_loop2(i$jscomp$0);self.bubble(self.context)&&!eventObj.isPropagationStopped()&&self.parent(self.context).emit(eventObj,extraParams)},events);this.emitting--;return this};var emitterOptions$1={qualifierCompare:function(selector1,selector2){return null==selector1||null==selector2?null==selector1&&null==selector2:selector1.sameText(selector2)},eventMatches:function(ele,listener,eventObj){listener=
listener.qualifier;return null!=listener?ele!==eventObj.target&&element$jscomp$0(eventObj.target)&&listener.matches(eventObj.target):!0},addEventFields:function(ele,evt){evt.cy=ele.cy();evt.target=ele},callbackContext:function(ele,listener,eventObj){return null!=listener.qualifier?eventObj.target:ele},beforeEmit:function(context,listener){listener.conf&&listener.conf.once&&listener.conf.onceCollection.removeListener(listener.event,listener.qualifier,listener.callback)},bubble:function(){return!0},
parent:function(ele){return ele.isChild()?ele.parent():ele.cy()}},argSelector$1=function(arg){return string$jscomp$0(arg)?new Selector(arg):arg},elesfn$9={createEmitter:function(){for(var i=0;i<this.length;i++){var ele=this[i],_p=ele._private;_p.emitter||(_p.emitter=new Emitter(emitterOptions$1,ele))}return this},emitter:function(){return this._private.emitter},on:function(events,selector,callback){selector=argSelector$1(selector);for(var i=0;i<this.length;i++)this[i].emitter().on(events,selector,
callback);return this},removeListener:function(events,selector,callback){selector=argSelector$1(selector);for(var i=0;i<this.length;i++)this[i].emitter().removeListener(events,selector,callback);return this},removeAllListeners:function(){for(var i=0;i<this.length;i++)this[i].emitter().removeAllListeners();return this},one:function(events,selector,callback){selector=argSelector$1(selector);for(var i=0;i<this.length;i++)this[i].emitter().one(events,selector,callback);return this},once:function(events,
selector,callback){selector=argSelector$1(selector);for(var i=0;i<this.length;i++)this[i].emitter().on(events,selector,callback,{once:!0,onceCollection:this})},emit:function(events,extraParams){for(var i=0;i<this.length;i++)this[i].emitter().emit(events,extraParams);return this},emitAndNotify:function(event,extraParams){if(0!==this.length)return this.cy().notify(event,this),this.emit(event,extraParams),this}};define.eventAliasesOn(elesfn$9);var elesfn$8={nodes:function(selector){return this.filter(function(ele){return ele.isNode()}).filter(selector)},
edges:function(selector){return this.filter(function(ele){return ele.isEdge()}).filter(selector)},byGroup:function(){for(var nodes=this.spawn(),edges=this.spawn(),i=0;i<this.length;i++){var ele=this[i];ele.isNode()?nodes.push(ele):edges.push(ele)}return{nodes,edges}},filter:function(_filter,thisArg){if(void 0===_filter)return this;if(string$jscomp$0(_filter)||elementOrCollection(_filter))return(new Selector(_filter)).filter(this);if(fn$6(_filter)){for(var filterEles=this.spawn(),i=0;i<this.length;i++){var ele=
this[i];(thisArg?_filter.apply(thisArg,[ele,i,this]):_filter(ele,i,this))&&filterEles.push(ele)}return filterEles}return this.spawn()},not:function(toRemove){if(toRemove){string$jscomp$0(toRemove)&&(toRemove=this.filter(toRemove));for(var elements=this.spawn(),i=0;i<this.length;i++){var element=this[i];toRemove.has(element)||elements.push(element)}return elements}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(other){if(string$jscomp$0(other))return this.filter(other);
var elements=this.spawn(),col1Smaller=this.length<other.length,colS=col1Smaller?this:other;other=col1Smaller?other:this;for(col1Smaller=0;col1Smaller<colS.length;col1Smaller++){var ele=colS[col1Smaller];other.has(ele)&&elements.push(ele)}return elements},xor:function(other$jscomp$0){var cy=this._private.cy;string$jscomp$0(other$jscomp$0)&&(other$jscomp$0=cy.$(other$jscomp$0));var elements=this.spawn();cy=function(col,other){for(var i=0;i<col.length;i++){var ele=col[i];other.hasElementWithId(ele._private.data.id)||
elements.push(ele)}};cy(this,other$jscomp$0);cy(other$jscomp$0,this);return elements},diff:function(other$jscomp$0){var cy=this._private.cy;string$jscomp$0(other$jscomp$0)&&(other$jscomp$0=cy.$(other$jscomp$0));cy=this.spawn();var right=this.spawn(),both=this.spawn(),add=function(col,other,retEles){for(var i=0;i<col.length;i++){var ele=col[i];other.hasElementWithId(ele._private.data.id)?both.merge(ele):retEles.push(ele)}};add(this,other$jscomp$0,cy);add(other$jscomp$0,this,right);return{left:cy,right,
both}},add:function(toAdd){var cy=this._private.cy;if(!toAdd)return this;string$jscomp$0(toAdd)&&(toAdd=cy.mutableElements().filter(toAdd));cy=this.spawnSelf();for(var i=0;i<toAdd.length;i++){var ele=toAdd[i];this.has(ele)||cy.push(ele)}return cy},merge:function(toAdd){var _p=this._private,cy=_p.cy;if(!toAdd)return this;toAdd&&string$jscomp$0(toAdd)&&(toAdd=cy.mutableElements().filter(toAdd));_p=_p.map;for(cy=0;cy<toAdd.length;cy++){var toAddEle=toAdd[cy],id=toAddEle._private.data.id;if(!_p.has(id)){var index=
this.length++;this[index]=toAddEle;_p.set(id,{ele:toAddEle,index})}}return this},unmergeAt:function(i){var id=this[i].id(),map=this._private.map;this[i]=void 0;map["delete"](id);id=i===this.length-1;if(1<this.length&&!id){id=this.length-1;var lastEle=this[id],lastEleId=lastEle._private.data.id;this[id]=void 0;this[i]=lastEle;map.set(lastEleId,{ele:lastEle,index:i})}this.length--;return this},unmergeOne:function(ele){ele=ele[0];ele=this._private.map.get(ele._private.data.id);if(!ele)return this;this.unmergeAt(ele.index);
return this},unmerge:function(toRemove){var cy=this._private.cy;if(!toRemove)return this;toRemove&&string$jscomp$0(toRemove)&&(toRemove=cy.mutableElements().filter(toRemove));for(cy=0;cy<toRemove.length;cy++)this.unmergeOne(toRemove[cy]);return this},unmergeBy:function(toRmFn){for(var i=this.length-1;0<=i;i--)toRmFn(this[i])&&this.unmergeAt(i);return this},map:function(mapFn,thisArg){for(var arr=[],i=0;i<this.length;i++){var ele=this[i];ele=thisArg?mapFn.apply(thisArg,[ele,i,this]):mapFn(ele,i,this);
arr.push(ele)}return arr},reduce:function(fn,initialValue){for(var i=0;i<this.length;i++)initialValue=fn(initialValue,this[i],i,this);return initialValue},max:function(valFn,thisArg){for(var max=-Infinity,maxEle,i=0;i<this.length;i++){var ele=this[i],val=thisArg?valFn.apply(thisArg,[ele,i,this]):valFn(ele,i,this);val>max&&(max=val,maxEle=ele)}return{value:max,ele:maxEle}},min:function(valFn,thisArg){for(var min=Infinity,minEle,i=0;i<this.length;i++){var ele=this[i],val=thisArg?valFn.apply(thisArg,
[ele,i,this]):valFn(ele,i,this);val<min&&(min=val,minEle=ele)}return{value:min,ele:minEle}}};elesfn$8.u=elesfn$8["|"]=elesfn$8["+"]=elesfn$8.union=elesfn$8.or=elesfn$8.add;elesfn$8["\\"]=elesfn$8["!"]=elesfn$8["-"]=elesfn$8.difference=elesfn$8.relativeComplement=elesfn$8.subtract=elesfn$8.not;elesfn$8.n=elesfn$8["\x26"]=elesfn$8["."]=elesfn$8.and=elesfn$8.intersection=elesfn$8.intersect;elesfn$8["^"]=elesfn$8["(+)"]=elesfn$8["(-)"]=elesfn$8.symmetricDifference=elesfn$8.symdiff=elesfn$8.xor;elesfn$8.fnFilter=
elesfn$8.filterFn=elesfn$8.stdFilter=elesfn$8.filter;elesfn$8.complement=elesfn$8.abscomp=elesfn$8.absoluteComplement;var zIndexSort=function(a,b){function getDepth(ele){var style=ele.pstyle("z-compound-depth");return"auto"===style.value?hasCompoundNodes?ele.zDepth():0:"bottom"===style.value?-1:"top"===style.value?MAX_INT$1:0}function getEleDepth(ele){return"auto"===ele.pstyle("z-index-compare").value?ele.isNode()?1:0:0}var hasCompoundNodes=a.cy().hasCompoundNodes(),depthDiff=getDepth(a)-getDepth(b);
if(0!==depthDiff)return depthDiff;depthDiff=getEleDepth(a)-getEleDepth(b);if(0!==depthDiff)return depthDiff;depthDiff=a.pstyle("z-index").value-b.pstyle("z-index").value;return 0!==depthDiff?depthDiff:a.poolIndex()-b.poolIndex()},elesfn$6={forEach:function(fn,thisArg){if(fn$6(fn))for(var N=this.length,i=0;i<N;i++){var ele=this[i];if(!1===(thisArg?fn.apply(thisArg,[ele,i,this]):fn(ele,i,this)))break}return this},toArray:function(){for(var array=[],i=0;i<this.length;i++)array.push(this[i]);return array},
slice:function(start,end){var array=[],thisSize=this.length;null==end&&(end=thisSize);null==start&&(start=0);0>start&&(start=thisSize+start);for(0>end&&(end=thisSize+end);0<=start&&start<end&&start<thisSize;start++)array.push(this[start]);return this.spawn(array)},size:function(){return this.length},eq:function(i){return this[i]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},
sort:function(sortFn){if(!fn$6(sortFn))return this;sortFn=this.toArray().sort(sortFn);return this.spawn(sortFn)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var ele=this[0];if(ele){var _p=ele._private;if("nodes"===_p.group)return _p=_p.data.parent?ele.parents().size():0,ele.isParent()?_p:MAX_INT$1-1;ele=_p.target;_p=_p.source.zDepth();ele=ele.zDepth();return Math.max(_p,ele,0)}}};elesfn$6.each=elesfn$6.forEach;(function(){"undefined"!=("undefined"===typeof Symbol?"undefined":
_typeof(Symbol))&&"undefined"!=_typeof(Symbol.iterator)&&(elesfn$6[Symbol.iterator]=function(){var _this=this,entry={value:void 0,done:!1},i=0,length=this.length;return _defineProperty({next:function(){i<length?entry.value=_this[i++]:(entry.value=void 0,entry.done=!0);return entry}},Symbol.iterator,function(){return this})})})();var getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:function(options){options=getLayoutDimensionOptions(options);this.takesUpSpace()?
options.nodeDimensionsIncludeLabels?(options=this.boundingBox(),options={w:options.w,h:options.h}):options={w:this.outerWidth(),h:this.outerHeight()}:options={w:0,h:0};if(0===options.w||0===options.h)options.w=options.h=1;return options},layoutPositions:function(layout,options,fn){var nodes=this.nodes().filter(function(n){return!n.isParent()}),cy=this.cy(),layoutEles=options.eles,getMemoizeKey=function(node){return node.id()},fnMem=memoize(fn,getMemoizeKey);layout.emit({type:"layoutstart",layout});
layout.animations=[];var useSpacingFactor=options.spacingFactor&&1!==options.spacingFactor,bb$jscomp$1=function(){if(!useSpacingFactor)return null;for(var bb=makeBoundingBox(),i=0;i<nodes.length;i++){var pos=fnMem(nodes[i],i),bb$jscomp$0=bb,x=pos.x;pos=pos.y;bb$jscomp$0.x1=Math.min(bb$jscomp$0.x1,x);bb$jscomp$0.x2=Math.max(bb$jscomp$0.x2,x);bb$jscomp$0.w=bb$jscomp$0.x2-bb$jscomp$0.x1;bb$jscomp$0.y1=Math.min(bb$jscomp$0.y1,pos);bb$jscomp$0.y2=Math.max(bb$jscomp$0.y2,pos);bb$jscomp$0.h=bb$jscomp$0.y2-
bb$jscomp$0.y1}return bb}();fn=memoize(function(node,i){i=fnMem(node,i);if(useSpacingFactor){var spacing=Math.abs(options.spacingFactor),JSCompiler_object_inline_x_638=bb$jscomp$1.x1+bb$jscomp$1.w/2,JSCompiler_object_inline_y_639=bb$jscomp$1.y1+bb$jscomp$1.h/2;i={x:JSCompiler_object_inline_x_638+(i.x-JSCompiler_object_inline_x_638)*spacing,y:JSCompiler_object_inline_y_639+(i.y-JSCompiler_object_inline_y_639)*spacing}}null!=options.transform&&(i=options.transform(node,i));return i},getMemoizeKey);
if(options.animate){for(getMemoizeKey=0;getMemoizeKey<nodes.length;getMemoizeKey++){var node$jscomp$0=nodes[getMemoizeKey],newPos=fn(node$jscomp$0,getMemoizeKey);null==options.animateFilter||options.animateFilter(node$jscomp$0,getMemoizeKey)?(node$jscomp$0=node$jscomp$0.animation({position:newPos,duration:options.animationDuration,easing:options.animationEasing}),layout.animations.push(node$jscomp$0)):node$jscomp$0.position(newPos)}options.fit?(cy=cy.animation({fit:{boundingBox:layoutEles.boundingBoxAt(fn),
padding:options.padding},duration:options.animationDuration,easing:options.animationEasing}),layout.animations.push(cy)):void 0!==options.zoom&&void 0!==options.pan&&(cy=cy.animation({zoom:options.zoom,pan:options.pan,duration:options.animationDuration,easing:options.animationEasing}),layout.animations.push(cy));layout.animations.forEach(function(ani){return ani.play()});layout.one("layoutready",options.ready);layout.emit({type:"layoutready",layout});Promise$1.all(layout.animations.map(function(ani){return ani.promise()})).then(function(){layout.one("layoutstop",
options.stop);layout.emit({type:"layoutstop",layout})})}else nodes.positions(fn),options.fit&&cy.fit(options.eles,options.padding),null!=options.zoom&&cy.zoom(options.zoom),options.pan&&cy.pan(options.pan),layout.one("layoutready",options.ready),layout.emit({type:"layoutready",layout}),layout.one("layoutstop",options.stop),layout.emit({type:"layoutstop",layout});return this},layout:function(options){return this.cy().makeLayout(extend({},options,{eles:this}))}};elesfn$5.createLayout=elesfn$5.makeLayout=
elesfn$5.layout;var elesfn$4={recalculateRenderedStyle:function(useCache){var cy=this.cy(),renderer=cy.renderer();cy=cy.styleEnabled();renderer&&cy&&renderer.recalculateRenderedStyle(this,useCache);return this},dirtyStyleCache:function(){var dirty=function(ele){return ele._private.styleCache=null};if(this.cy().hasCompoundNodes()){var eles=this.spawnSelf().merge(this.descendants()).merge(this.parents());eles.merge(eles.connectedEdges());eles.forEach(dirty)}else this.forEach(function(ele){dirty(ele);
ele.connectedEdges().forEach(dirty)});return this},updateStyle:function(notifyRenderer){var cy=this._private.cy;if(!cy.styleEnabled())return this;if(cy.batching())return cy._private.batchStyleEles.merge(this),this;var hasCompounds=cy.hasCompoundNodes();cy=this;notifyRenderer=notifyRenderer||void 0===notifyRenderer?!0:!1;hasCompounds&&(cy=this.spawnSelf().merge(this.descendants()).merge(this.parents()));hasCompounds=cy;notifyRenderer?hasCompounds.emitAndNotify("style"):hasCompounds.emit("style");cy.forEach(function(ele){return ele._private.styleDirty=
!0});return this},cleanStyle:function(){var cy=this.cy();if(cy.styleEnabled())for(var i=0;i<this.length;i++){var ele=this[i];ele._private.styleDirty&&(ele._private.styleDirty=!1,cy.style().apply(ele))}},parsedStyle:function(property){var includeNonDefault=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,ele=this[0],cy=ele.cy();if(cy.styleEnabled()&&ele)return this.cleanStyle(),ele=ele._private.style[property],null!=ele?ele:includeNonDefault?cy.style().getDefaultProperty(property):null},numericStyle:function(property){var ele=
this[0];if(ele.cy().styleEnabled()&&ele)return property=ele.pstyle(property),void 0!==property.pfValue?property.pfValue:property.value},numericStyleUnits:function(property){var ele=this[0];if(ele.cy().styleEnabled()&&ele)return ele.pstyle(property).units},renderedStyle:function(property){var cy=this.cy();if(!cy.styleEnabled())return this;var ele=this[0];if(ele)return cy.style().getRenderedStyle(ele,property)},style:function(name,value){var cy=this.cy();if(!cy.styleEnabled())return this;cy=cy.style();
if(plainObject(name))cy.applyBypass(this,name,!1),this.emitAndNotify("style");else if(string$jscomp$0(name)){if(void 0===value){if(value=this[0])return cy.getStylePropertyValue(value,name);return}cy.applyBypass(this,name,value,!1);this.emitAndNotify("style")}else if(void 0===name){if(name=this[0])return cy.getRawStyle(name);return}return this},removeStyle:function(names){var cy=this.cy();if(!cy.styleEnabled())return this;cy=cy.style();if(void 0===names)for(names=0;names<this.length;names++)cy.removeAllBypasses(this[names],
!1);else{names=names.split(/\s+/);for(var _i=0;_i<this.length;_i++)cy.removeBypasses(this[_i],names,!1)}this.emitAndNotify("style");return this},show:function(){this.css("display","element");return this},hide:function(){this.css("display","none");return this},effectiveOpacity:function(){var cy=this.cy();if(!cy.styleEnabled())return 1;var hasCompoundNodes=cy.hasCompoundNodes(),ele=this[0];if(ele){var _p=ele._private;cy=ele.pstyle("opacity").value;if(!hasCompoundNodes)return cy;if(hasCompoundNodes=
_p.data.parent?ele.parents():null)for(ele=0;ele<hasCompoundNodes.length;ele++)cy*=hasCompoundNodes[ele].pstyle("opacity").value;return cy}},transparent:function(){if(!this.cy().styleEnabled())return!1;var ele=this[0],hasCompoundNodes=ele.cy().hasCompoundNodes();if(ele)return hasCompoundNodes?0===ele.effectiveOpacity():0===ele.pstyle("opacity").value},backgrounding:function(){return this.cy().styleEnabled()?this[0]._private.backgrounding?!0:!1:!1}},eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",
function(ele){return"element"===ele.pstyle("display").value&&0!==ele.width()&&(ele.isNode()?0!==ele.height():!0)});elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",function(ele){return"yes"===ele.pstyle("events").value&&"visible"===ele.pstyle("visibility").value&&eleTakesUpSpace(ele)}),parentInteractive=cacheStyleFunction("parentInteractive",function(parent){return"visible"===parent.pstyle("visibility").value&&
eleTakesUpSpace(parent)});elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace}));elesfn$4.noninteractive=function(){var ele=this[0];if(ele)return!ele.interactive()};var eleVisible=cacheStyleFunction("eleVisible",function(ele){return"visible"===ele.pstyle("visibility").value&&0!==ele.pstyle("opacity").pfValue&&eleTakesUpSpace(ele)});elesfn$4.visible=cachePrototypeStyleFunction("visible",
defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:eleTakesUpSpace}));elesfn$4.hidden=function(){var ele=this[0];if(ele)return!ele.visible()};elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace():!1});elesfn$4.bypass=elesfn$4.css=elesfn$4.style;elesfn$4.renderedCss=elesfn$4.renderedStyle;elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle;elesfn$4.pstyle=
elesfn$4.parsedStyle;var elesfn$3={};defineSwitchSet({field:"locked",overrideField:function(ele){return ele.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});defineSwitchSet({field:"grabbable",overrideField:function(ele){return ele.cy().autoungrabify()||ele.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(ele){return ele.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});defineSwitchSet({field:"selectable",
overrideField:function(ele){return ele.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});elesfn$3.deselect=elesfn$3.unselect;elesfn$3.grabbed=function(){var ele=this[0];if(ele)return ele._private.grabbed};defineSwitchSet({field:"active",on:"activate",off:"unactivate"});defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"});elesfn$3.inactive=function(){var ele=this[0];if(ele)return!ele._private.active};var elesfn$2={},defineDagExtremity=function(params){return function(selector){for(var ret=
[],i=0;i<this.length;i++){var ele=this[i];if(ele.isNode()){for(var disqualified=!1,edges=ele.connectedEdges(),j=0;j<edges.length;j++){var edge=edges[j],src=edge.source();edge=edge.target();if(params.noIncomingEdges&&edge===ele&&src!==ele||params.noOutgoingEdges&&src===ele&&edge!==ele){disqualified=!0;break}}disqualified||ret.push(ele)}}return this.spawn(ret,!0).filter(selector)}},defineDagOneHop=function(params){return function(selector){for(var oEles=[],i=0;i<this.length;i++){var ele=this[i];if(ele.isNode())for(var edges=
ele.connectedEdges(),j=0;j<edges.length;j++){var edge=edges[j],src=edge.source(),tgt=edge.target();params.outgoing&&src===ele?(oEles.push(edge),oEles.push(tgt)):params.incoming&&tgt===ele&&(oEles.push(edge),oEles.push(src))}}return this.spawn(oEles,!0).filter(selector)}},defineDagAllHops=function(params){return function(selector){for(var eles=this,sEles=[],sElesIds={};;){eles=params.outgoing?eles.outgoers():eles.incomers();if(0===eles.length)break;for(var newNext=!1,i=0;i<eles.length;i++){var n=eles[i],
nid=n.id();sElesIds[nid]||(sElesIds[nid]=!0,sEles.push(n),newNext=!0)}if(!newNext)break}return this.spawn(sEles,!0).filter(selector)}};elesfn$2.clearTraversalCache=function(){for(var i=0;i<this.length;i++)this[i]._private.traversalCache=null};extend(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache$jscomp$0(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache$jscomp$0(defineDagOneHop({incoming:!0}),
"incomers"),predecessors:defineDagAllHops({incoming:!0})});extend(elesfn$2,{neighborhood:cache$jscomp$0(function(selector){for(var elements=[],nodes=this.nodes(),i=0;i<nodes.length;i++)for(var node=nodes[i],connectedEdges=node.connectedEdges(),j=0;j<connectedEdges.length;j++){var edge=connectedEdges[j],src=edge.source(),tgt=edge.target();src=node===src?tgt:src;0<src.length&&elements.push(src[0]);elements.push(edge[0])}return this.spawn(elements,!0).filter(selector)},"neighborhood"),closedNeighborhood:function(selector){return this.neighborhood().add(this).filter(selector)},
openNeighborhood:function(selector){return this.neighborhood(selector)}});elesfn$2.neighbourhood=elesfn$2.neighborhood;elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood;elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood;extend(elesfn$2,{source:cache$jscomp$0(function(selector){var ele=this[0],src;ele&&(src=ele._private.source||ele.cy().collection());return src&&selector?src.filter(selector):src},"source"),target:cache$jscomp$0(function(selector){var ele=this[0],tgt;ele&&(tgt=ele._private.target||
ele.cy().collection());return tgt&&selector?tgt.filter(selector):tgt},"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})});extend(elesfn$2,{edgesWith:cache$jscomp$0(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache$jscomp$0(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")});extend(elesfn$2,{connectedEdges:cache$jscomp$0(function(selector){for(var retEles=[],i=0;i<this.length;i++){var node=this[i];if(node.isNode()){node=node._private.edges;for(var j=
0;j<node.length;j++)retEles.push(node[j])}}return this.spawn(retEles,!0).filter(selector)},"connectedEdges"),connectedNodes:cache$jscomp$0(function(selector){for(var retEles=[],i=0;i<this.length;i++){var edge=this[i];edge.isEdge()&&(retEles.push(edge.source()[0]),retEles.push(edge.target()[0]))}return this.spawn(retEles,!0).filter(selector)},"connectedNodes"),parallelEdges:cache$jscomp$0(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache$jscomp$0(defineParallelEdgesFunction({codirected:!0}),
"codirectedEdges")});extend(elesfn$2,{components:function(root$jscomp$0){var self=this,cy=self.cy(),visited=cy.collection(),unvisited=null==root$jscomp$0?self.nodes():root$jscomp$0.nodes(),components=[];null!=root$jscomp$0&&unvisited.empty()&&(unvisited=root$jscomp$0.sources());var visitInComponent=function(node,component){visited.merge(node);unvisited.unmerge(node);component.merge(node)};if(unvisited.empty())return self.spawn();root$jscomp$0=function(){var cmpt=cy.collection();components.push(cmpt);
var root=unvisited[0];visitInComponent(root,cmpt);self.bfs({directed:!1,roots:root,visit:function(v){return visitInComponent(v,cmpt)}});cmpt.forEach(function(node){node.connectedEdges().forEach(function(e){self.has(e)&&cmpt.has(e.source())&&cmpt.has(e.target())&&cmpt.merge(e)})})};do root$jscomp$0();while(0<unvisited.length);return components},component:function(){var ele=this[0];return ele.cy().mutableElements().components(ele)[0]}});elesfn$2.componentsOf=elesfn$2.components;var Collection=function(cy,
elements){var unique=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,removed=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(void 0===cy)error("A collection must have a reference to the core");else{var map=new Map$1,createdElements=!1;if(!elements)elements=[];else if(0<elements.length&&plainObject(elements[0])&&!element$jscomp$0(elements[0])){createdElements=!0;for(var eles$jscomp$0=[],elesIds=new Set$1,i=0,l=elements.length;i<l;i++){var json=elements[i];null==json.data&&(json.data=
{});var _data=json.data;if(null==_data.id)_data.id=uuid();else if(cy.hasElementWithId(_data.id)||elesIds.has(_data.id))continue;json=new Element(cy,json,!1);eles$jscomp$0.push(json);elesIds.add(_data.id)}elements=eles$jscomp$0}eles$jscomp$0=this.length=0;for(elesIds=elements.length;eles$jscomp$0<elesIds;eles$jscomp$0++)i=elements[eles$jscomp$0][0],null!=i&&(l=i._private.data.id,unique&&map.has(l)||(unique&&map.set(l,{index:this.length,ele:i}),this[this.length]=i,this.length++));this._private={eles:this,
cy,get map(){null==this.lazyMap&&this.rebuildMap();return this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var m=this.lazyMap=new Map$1,eles=this.eles,_i2=0;_i2<eles.length;_i2++){var _ele=eles[_i2];m.set(_ele.id(),{index:_i2,ele:_ele})}}};unique&&(this._private.map=map);createdElements&&!removed&&this.restore()}},elesfn$1=Element.prototype=Collection.prototype=Object.create(Array.prototype);elesfn$1.instanceString=function(){return"collection"};elesfn$1.spawn=function(eles,unique){return new Collection(this.cy(),
eles,unique)};elesfn$1.spawnSelf=function(){return this.spawn(this)};elesfn$1.cy=function(){return this._private.cy};elesfn$1.renderer=function(){return this._private.cy.renderer()};elesfn$1.element=function(){return this[0]};elesfn$1.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])};elesfn$1.unique=function(){return new Collection(this._private.cy,this,!0)};elesfn$1.hasElementWithId=function(id){return this._private.map.has(""+id)};elesfn$1.getElementById=
function(id){var cy=this._private.cy;return(id=this._private.map.get(""+id))?id.ele:new Collection(cy)};elesfn$1.$id=elesfn$1.getElementById;elesfn$1.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index};elesfn$1.indexOf=function(ele){return this._private.map.get(ele[0]._private.data.id).index};elesfn$1.indexOfId=function(id){return this._private.map.get(""+id).index};elesfn$1.json=function(obj){var ele=this.element(),cy=this.cy();if(null==
ele&&obj)return this;if(null!=ele){var p=ele._private;if(plainObject(obj)){cy.startBatch();if(obj.data){ele.data(obj.data);var _data2=p.data;if(ele.isEdge()){var move=!1,spec={},src=obj.data.source,tgt=obj.data.target;null!=src&&src!=_data2.source&&(spec.source=""+src,move=!0);null!=tgt&&tgt!=_data2.target&&(spec.target=""+tgt,move=!0);move&&(ele=ele.move(spec))}else move=obj.data.parent,"parent"in obj.data&&(null!=move||null!=_data2.parent)&&move!=_data2.parent&&(void 0===move&&(move=null),null!=
move&&(move=""+move),ele=ele.move({parent:move}))}obj.position&&ele.position(obj.position);_data2=function(k,trueFnName,falseFnName){var obj_k=obj[k];if(null!=obj_k&&obj_k!==p[k])if(obj_k)ele[trueFnName]();else ele[falseFnName]()};_data2("removed","remove","restore");_data2("selected","select","unselect");_data2("selectable","selectify","unselectify");_data2("locked","lock","unlock");_data2("grabbable","grabify","ungrabify");_data2("pannable","panify","unpanify");null!=obj.classes&&ele.classes(obj.classes);
cy.endBatch();return this}if(void 0===obj){var json={data:copy(p.data),position:copy(p.position),group:p.group,removed:p.removed,selected:p.selected,selectable:p.selectable,locked:p.locked,grabbable:p.grabbable,pannable:p.pannable,classes:""},i=0;p.classes.forEach(function(cls){return json.classes+=0===i++?cls:" "+cls});return json}}};elesfn$1.jsons=function(){for(var jsons=[],i=0;i<this.length;i++){var json=this[i].json();jsons.push(json)}return jsons};elesfn$1.clone=function(){for(var cy=this.cy(),
elesArr=[],i=0;i<this.length;i++){var json=this[i].json();json=new Element(cy,json,!1);elesArr.push(json)}return new Collection(cy,elesArr)};elesfn$1.copy=elesfn$1.clone;elesfn$1.restore=function(){for(var notifyRenderer=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,addToPool=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,cy=this.cy(),cy_p=cy._private,nodes=[],edges=[],elements,_i3=0,l=this.length;_i3<l;_i3++){var ele=this[_i3];if(!addToPool||ele.removed())ele.isNode()?nodes.push(ele):
edges.push(ele)}elements=nodes.concat(edges);var i;edges=function(){elements.splice(i,1);i--};for(i=0;i<elements.length;i++){_i3=elements[i];l=_i3._private;var _data3=l.data;_i3.clearTraversalCache();if(addToPool||l.removed)if(void 0===_data3.id)_data3.id=uuid();else if(number$1(_data3.id))_data3.id=""+_data3.id;else if(emptyString(_data3.id)||!string$jscomp$0(_data3.id)){error("Can not create element with invalid string ID `"+_data3.id+"`");edges();continue}else if(cy.hasElementWithId(_data3.id)){error("Can not create second element with ID `"+
_data3.id+"`");edges();continue}ele=_data3.id;if(_i3.isNode()){var pos=l.position;null==pos.x&&(pos.x=0);null==pos.y&&(pos.y=0)}if(_i3.isEdge()){pos=_i3;for(var fields=["source","target"],fieldsLength=fields.length,badSourceOrTarget=!1,j=0;j<fieldsLength;j++){var field=fields[j],val=_data3[field];number$1(val)&&(val=_data3[field]=""+_data3[field]);null==val||""===val?(error("Can not create edge `"+ele+"` with unspecified "+field),badSourceOrTarget=!0):cy.hasElementWithId(val)||(error("Can not create edge `"+
ele+"` with nonexistant "+field+" `"+val+"`"),badSourceOrTarget=!0)}if(badSourceOrTarget){edges();continue}fields=cy.getElementById(_data3.source);_data3=cy.getElementById(_data3.target);fields.same(_data3)?fields._private.edges.push(pos):(fields._private.edges.push(pos),_data3._private.edges.push(pos));pos._private.source=fields;pos._private.target=_data3}l.map=new Map$1;l.map.set(ele,{ele:_i3,index:0});l.removed=!1;addToPool&&cy.addToPool(_i3)}for(edges=0;edges<nodes.length;edges++)if(_i3=nodes[edges],
l=_i3._private.data,number$1(l.parent)&&(l.parent=""+l.parent),ele=l.parent,null!=ele||_i3._private.parent)if(ele=_i3._private.parent?cy.collection().merge(_i3._private.parent):cy.getElementById(ele),ele.empty())l.parent=void 0;else if(ele[0].removed())warn("Node added with missing parent, reference to parent removed"),l.parent=void 0,_i3._private.parent=null;else{_data3=!1;for(pos=ele;!pos.empty();){if(_i3.same(pos)){_data3=!0;l.parent=void 0;break}pos=pos.parent()}_data3||(ele[0]._private.children.push(_i3),
_i3._private.parent=ele[0],cy_p.hasCompoundNodes=!0)}if(0<elements.length){nodes=elements.length===this.length?this:new Collection(cy,elements);for(edges=0;edges<nodes.length;edges++)_i3=nodes[edges],_i3.isNode()||(_i3.parallelEdges().clearTraversalCache(),_i3.source().clearTraversalCache(),_i3.target().clearTraversalCache());(cy_p.hasCompoundNodes?cy.collection().merge(nodes).merge(nodes.connectedNodes()).merge(nodes.parent()):nodes).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(notifyRenderer);
notifyRenderer?nodes.emitAndNotify("add"):addToPool&&nodes.emit("add")}return this};elesfn$1.removed=function(){var ele=this[0];return ele&&ele._private.removed};elesfn$1.inside=function(){var ele=this[0];return ele&&!ele._private.removed};elesfn$1.remove=function(){function add(ele){var alreadyAdded=elesToRemoveIds[ele.id()];if(!(removeFromPool&&ele.removed()||alreadyAdded))if(elesToRemoveIds[ele.id()]=!0,ele.isNode()){elesToRemove.push(ele);alreadyAdded=ele._private.edges;for(var i=0;i<alreadyAdded.length;i++)add(alreadyAdded[i]);
ele=ele._private.children;for(alreadyAdded=0;alreadyAdded<ele.length;alreadyAdded++)add(ele[alreadyAdded])}else elesToRemove.unshift(ele)}function removeEdgeRef(node,edge){removeFromArray(node._private.edges,edge);node.clearTraversalCache()}function removeChildRef(parent,ele){ele=ele[0];parent=parent[0];var children=parent._private.children,pid=parent.id();removeFromArray(children,ele);ele._private.parent=null;alteredParents.ids[pid]||(alteredParents.ids[pid]=!0,alteredParents.push(parent))}for(var notifyRenderer=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,removeFromPool=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,elesToRemove=[],elesToRemoveIds={},cy=this._private.cy,i$jscomp$0=0,l=this.length;i$jscomp$0<l;i$jscomp$0++)add(this[i$jscomp$0]);var alteredParents=[];alteredParents.ids={};this.dirtyCompoundBoundsCache();removeFromPool&&cy.removeFromPool(elesToRemove);for(i$jscomp$0=0;i$jscomp$0<elesToRemove.length;i$jscomp$0++){l=elesToRemove[i$jscomp$0];if(l.isEdge()){var src=l.source()[0],
tgt=l.target()[0];removeEdgeRef(src,l);removeEdgeRef(tgt,l);src=l.parallelEdges();for(tgt=0;tgt<src.length;tgt++){var pllEdge=src[tgt];pllEdge.clearTraversalCache();pllEdge.isBundledBezier()&&pllEdge.dirtyBoundingBoxCache()}}else src=l.parent(),0!==src.length&&removeChildRef(src,l);removeFromPool&&(l._private.removed=!0)}i$jscomp$0=cy._private.elements;cy._private.hasCompoundNodes=!1;for(l=0;l<i$jscomp$0.length;l++)if(i$jscomp$0[l].isParent()){cy._private.hasCompoundNodes=!0;break}cy=new Collection(this.cy(),
elesToRemove);0<cy.size()&&(notifyRenderer?cy.emitAndNotify("remove"):removeFromPool&&cy.emit("remove"));for(notifyRenderer=0;notifyRenderer<alteredParents.length;notifyRenderer++)i$jscomp$0=alteredParents[notifyRenderer],removeFromPool&&i$jscomp$0.removed()||i$jscomp$0.updateStyle();return cy};elesfn$1.move=function(struct){var cy=this._private.cy,eles=this,toString=function(id){return null==id?id:""+id};if(void 0!==struct.source||void 0!==struct.target){var srcId=toString(struct.source),tgtId=toString(struct.target),
srcExists=null!=srcId&&cy.hasElementWithId(srcId),tgtExists=null!=tgtId&&cy.hasElementWithId(tgtId);if(srcExists||tgtExists)cy.batch(function(){eles.remove(!1,!1);eles.emitAndNotify("moveout");for(var i=0;i<eles.length;i++){var ele=eles[i],_data5=ele._private.data;ele.isEdge()&&(srcExists&&(_data5.source=srcId),tgtExists&&(_data5.target=tgtId))}eles.restore(!1,!1)}),eles.emitAndNotify("move")}else if(void 0!==struct.parent&&(struct=toString(struct.parent),null===struct||cy.hasElementWithId(struct))){var pidToAssign=
null===struct?void 0:struct;cy.batch(function(){var updated=eles.remove(!1,!1);updated.emitAndNotify("moveout");for(var i=0;i<eles.length;i++){var ele=eles[i],_data6=ele._private.data;ele.isNode()&&(_data6.parent=pidToAssign)}updated.restore(!1,!1)});eles.emitAndNotify("move")}return this};[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,elesfn$e,elesfn$d,dimensions,elesfn$9,elesfn$8,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&
this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var ele=this[0];if(ele)return ele._private.group}},elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach(function(props){extend(elesfn$1,props)});var generateSpringRK4=function(){function springEvaluateStateWithDerivative(initialState,dt,derivative){var JSCompiler_object_inline_v_643=initialState.v+derivative.dv*dt;return{dx:JSCompiler_object_inline_v_643,dv:-initialState.tension*
(initialState.x+derivative.dx*dt)-initialState.friction*JSCompiler_object_inline_v_643}}function springIntegrateState(state,dt){var a={dx:state.v,dv:-state.tension*state.x-state.friction*state.v},b=springEvaluateStateWithDerivative(state,.5*dt,a),c=springEvaluateStateWithDerivative(state,.5*dt,b),d=springEvaluateStateWithDerivative(state,dt,c),dvdt=1/6*(a.dv+2*(b.dv+c.dv)+d.dv);state.x+=1/6*(a.dx+2*(b.dx+c.dx)+d.dx)*dt;state.v+=dvdt*dt;return state}return function springRK4Factory(tension,friction,
duration){var initState={x:-1,v:0,tension:null,friction:null},path=[0],time_lapsed=0,have_duration;tension=parseFloat(tension)||500;friction=parseFloat(friction)||20;duration=duration||null;initState.tension=tension;initState.friction=friction;(have_duration=null!==duration)?(time_lapsed=springRK4Factory(tension,friction),tension=time_lapsed/duration*.016):tension=.016;for(;;){var last_state=springIntegrateState(last_state||initState,tension);path.push(1+last_state.x);time_lapsed+=16;if(!(1E-4<Math.abs(last_state.x)&&
1E-4<Math.abs(last_state.v)))break}return have_duration?function(percentComplete){return path[percentComplete*(path.length-1)|0]}:time_lapsed}}(),cubicBezier=function(t1,p1,t2,p2){var bezier=generateCubicBezier(t1,p1,t2,p2);return function(start,end,percent){return start+(end-start)*bezier(percent)}},easings={linear:function(start,end,percent){return start+(end-start)*percent},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,
0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,
.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(tension,friction,duration){if(0===
duration)return easings.linear;var spring=generateSpringRK4(tension,friction,duration);return function(start,end,percent){return start+(end-start)*spring(percent)}},"cubic-bezier":cubicBezier},corefn$8={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop(),addToAnimationPool:function(eles){this.styleEnabled()&&this._private.aniEles.merge(eles)},stopAnimationLoop:function(){this._private.animationsRunning=
!1},startAnimationLoop:function(){function headlessStep(){cy._private.animationsRunning&&raf(function(now){stepAll(now,cy);headlessStep()})}var cy=this;cy._private.animationsRunning=!0;if(cy.styleEnabled()){var renderer=cy.renderer();renderer&&renderer.beforeRender?renderer.beforeRender(function(willDraw,now){stepAll(now,cy)},renderer.beforeRenderPriorities.animations):headlessStep()}}},emitterOptions={qualifierCompare:function(selector1,selector2){return null==selector1||null==selector2?null==selector1&&
null==selector2:selector1.sameText(selector2)},eventMatches:function(cy,listener,eventObj){listener=listener.qualifier;return null!=listener?cy!==eventObj.target&&element$jscomp$0(eventObj.target)&&listener.matches(eventObj.target):!0},addEventFields:function(cy,evt){evt.cy=cy;evt.target=cy},callbackContext:function(cy,listener,eventObj){return null!=listener.qualifier?eventObj.target:cy}},argSelector=function(arg){return string$jscomp$0(arg)?new Selector(arg):arg},elesfn={createEmitter:function(){var _p=
this._private;_p.emitter||(_p.emitter=new Emitter(emitterOptions,this));return this},emitter:function(){return this._private.emitter},on:function(events,selector,callback){this.emitter().on(events,argSelector(selector),callback);return this},removeListener:function(events,selector,callback){this.emitter().removeListener(events,argSelector(selector),callback);return this},removeAllListeners:function(){this.emitter().removeAllListeners();return this},one:function(events,selector,callback){this.emitter().one(events,
argSelector(selector),callback);return this},once:function(events,selector,callback){this.emitter().one(events,argSelector(selector),callback);return this},emit:function(events,extraParams){this.emitter().emit(events,extraParams);return this},emitAndNotify:function(event,eles){this.emit(event);this.notify(event,eles);return this}};define.eventAliasesOn(elesfn);var corefn$7={png:function(options){var renderer=this._private.renderer;options=options||{};return renderer.png(options)},jpg:function(options){var renderer=
this._private.renderer;options=options||{};options.bg=options.bg||"#fff";return renderer.jpg(options)}};corefn$7.jpeg=corefn$7.jpg;var corefn$6={layout:function(options){if(null==options)error("Layout options must be specified to make a layout");else if(null==options.name)error("A `name` must be specified to make a layout");else{var name=options.name,Layout=this.extension("layout",name);if(null==Layout)error("No such layout `"+name+"` found.  Did you forget to import it and `cytoscape.use()` it?");
else return name=string$jscomp$0(options.eles)?this.$(options.eles):null!=options.eles?options.eles:this.$(),new Layout(extend({},options,{cy:this,eles:name}))}}};corefn$6.createLayout=corefn$6.makeLayout=corefn$6.layout;var rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),corefn$4={renderTo:function(context,zoom,pan,pxRatio){this._private.renderer.renderTo(context,
zoom,pan,pxRatio);return this},renderer:function(){return this._private.renderer},forceRender:function(){this.notify("draw");return this},resize:function(){this.invalidateSize();this.emitAndNotify("resize");return this},initRenderer:function(options){var RendererProto=this.extension("renderer",options.name);null==RendererProto?error("Can not initialise: No such renderer `".concat(options.name,"` found. Did you forget to import it and `cytoscape.use()` it?")):(void 0!==options.wheelSensitivity&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine."),
options=rendererDefaults(options),options.cy=this,this._private.renderer=new RendererProto(options),this.notify("init"))},destroyRenderer:function(){this.notify("destroy");var domEle=this.container();if(domEle)for(domEle._cyreg=null;0<domEle.childNodes.length;)domEle.removeChild(domEle.childNodes[0]);this._private.renderer=null;this.mutableElements().forEach(function(ele){ele=ele._private;ele.rscratch={};ele.rstyle={};ele.animation.current=[];ele.animation.queue=[]})},onRender:function(fn){return this.on("render",
fn)},offRender:function(fn){return this.off("render",fn)}};corefn$4.invalidateDimensions=corefn$4.resize;var corefn$3={collection:function(eles,opts){return string$jscomp$0(eles)?this.$(eles):elementOrCollection(eles)?eles.collection():array$jscomp$0(eles)?(opts||(opts={}),new Collection(this,eles,opts.unique,opts.removed)):new Collection(this)},nodes:function(selector){var nodes=this.$(function(ele){return ele.isNode()});return selector?nodes.filter(selector):nodes},edges:function(selector){var edges=
this.$(function(ele){return ele.isEdge()});return selector?edges.filter(selector):edges},$:function(selector){var eles=this._private.elements;return selector?eles.filter(selector):eles.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$3.elements=corefn$3.filter=corefn$3.$;var styfn$5={getRenderedStyle:function(ele,prop){return prop?this.getStylePropertyValue(ele,prop,!0):this.getRawStyle(ele,!0)},getRawStyle:function(ele,isRenderedVal){if(ele=ele[0]){for(var rstyle={},
i=0;i<this.properties.length;i++){var prop=this.properties[i],val=this.getStylePropertyValue(ele,prop.name,isRenderedVal);null!=val&&(rstyle[prop.name]=val,rstyle[dash2camel(prop.name)]=val)}return rstyle}},getIndexedStyle:function(ele,property,subproperty,index){index=ele.pstyle(property)[subproperty][index];return null!=index?index:ele.cy().style().getDefaultProperty(property)[subproperty][0]},getStylePropertyValue:function(ele,propName,isRenderedVal){if(ele=ele[0]){var prop=this.properties[propName];
prop.alias&&(prop=prop.pointsTo);propName=prop.type;var styleProp=ele.pstyle(prop.name);if(styleProp){prop=styleProp.value;var units=styleProp.units;styleProp=styleProp.strValue;if(isRenderedVal&&propName.number&&null!=prop&&number$1(prop)){var zoom=ele.cy().zoom();return((ele=array$jscomp$0(prop))?units.every(function(u){return null!=u}):null!=units)?ele?prop.map(function(v,i){return v*zoom+units[i]}).join(" "):prop*zoom+units:ele?prop.map(function(v){return string$jscomp$0(v)?v:""+v*zoom}).join(" "):
""+prop*zoom}if(null!=styleProp)return styleProp}return null}},getAnimationStartStyle:function(ele,aniProps){for(var rstyle={},i=0;i<aniProps.length;i++){var name=aniProps[i].name,styleProp=ele.pstyle(name);void 0!==styleProp&&(styleProp=plainObject(styleProp)?this.parse(name,styleProp.strValue):this.parse(name,styleProp));styleProp&&(rstyle[name]=styleProp)}return rstyle},getPropsList:function(propsObj){var rstyle=[],props=this.properties;if(propsObj)for(var names=Object.keys(propsObj),i=0;i<names.length;i++){var name=
names[i],val=propsObj[name];name=props[name]||props[camel2dash(name)];(val=this.parse(name.name,val))&&rstyle.push(val)}return rstyle},getNonDefaultPropertiesHash:function(ele,propNames,seed){seed=seed.slice();var i,j;for(i=0;i<propNames.length;i++){var name=propNames[i];name=ele.pstyle(name,!1);if(null!=name)if(null!=name.pfValue)seed[0]=hashInt(chVal,seed[0]),seed[1]=hashIntAlt(chVal,seed[1]);else for(name=name.strValue,j=0;j<name.length;j++){var chVal=name.charCodeAt(j);seed[0]=hashInt(chVal,seed[0]);
seed[1]=hashIntAlt(chVal,seed[1])}}return seed}};styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash;var styfn$2={};(function(){var data=function(prefix){return"^"+prefix+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},mapData=function(prefix){return"^"+prefix+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6})\\s*\\,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6})\\)$"},
urlRegexes=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},
position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:"horizontal leftward rightward vertical upward downward auto".split(" ")},
paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside",
"over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:"bezier unbundled-bezier haystack segments straight straight-triangle taxi".split(" ")},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},
fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:"rectangle roundrectangle round-rectangle cutrectangle cut-rectangle bottomroundrectangle bottom-round-rectangle barrel ellipse triangle round-triangle square pentagon round-pentagon hexagon round-hexagon concavehexagon concave-hexagon heptagon round-heptagon octagon round-octagon tag round-tag star diamond round-diamond vee rhomboid right-rhomboid polygon".split(" ")},
overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:"tee triangle triangle-tee circle-triangle triangle-cross triangle-backcurve vee square circle diamond chevron none".split(" ")},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center",
"bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:data("data")},layoutData:{mapping:!0,regex:data("layoutData")},scratch:{mapping:!0,regex:data("scratch")},mapData:{mapping:!0,regex:mapData("mapData")},mapLayoutData:{mapping:!0,regex:mapData("mapLayoutData")},mapScratch:{mapping:!0,regex:mapData("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:urlRegexes,singleRegexMatchValue:!0},urls:{regexes:urlRegexes,
singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line",
"outside-to-line-or-label"],singleEnum:!0,validate:function(valArr,unitsArr){switch(valArr.length){case 2:return"deg"!==unitsArr[0]&&"rad"!==unitsArr[0]&&"deg"!==unitsArr[1]&&"rad"!==unitsArr[1];case 1:return string$jscomp$0(valArr[0])||"deg"===unitsArr[0]||"rad"===unitsArr[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\)$"],
enums:"linear ease ease-in ease-out ease-in-out ease-in-sine ease-out-sine ease-in-out-sine ease-in-quad ease-out-quad ease-in-out-quad ease-in-cubic ease-out-cubic ease-in-out-cubic ease-in-quart ease-out-quart ease-in-out-quart ease-in-quint ease-out-quint ease-in-out-quint ease-in-expo ease-out-expo ease-in-out-expo ease-in-circ ease-out-circ ease-in-out-circ".split(" ")},gradientDirection:{enums:"to-bottom to-top to-left to-right to-bottom-right to-bottom-left to-top-right to-top-left to-right-bottom to-left-bottom to-right-top to-left-top".split(" ")},
boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(valArr){valArr=valArr.length;return 1===valArr||2===valArr||4===valArr}}};var JSCompiler_object_inline_zeroNonZero_646=function(val1,val2){return null!=val1&&null!=val2||val1===val2?0==val1&&0!=val2?!0:0!=val1&&0==val2?!0:!1:!0};data=function(val1,val2){return val1!=val2};var t=styfn$2.types;mapData=[{name:"label",type:t.text,triggersBounds:data,triggersZOrder:function(str1,str2){str1=emptyString(str1);str2=emptyString(str2);return str1&&
!str2||!str1&&str2}},{name:"text-rotation",type:t.textRotation,triggersBounds:data},{name:"text-margin-x",type:t.bidirectionalSize,triggersBounds:data},{name:"text-margin-y",type:t.bidirectionalSize,triggersBounds:data}];urlRegexes=[{name:"source-label",type:t.text,triggersBounds:data},{name:"source-text-rotation",type:t.textRotation,triggersBounds:data},{name:"source-text-margin-x",type:t.bidirectionalSize,triggersBounds:data},{name:"source-text-margin-y",type:t.bidirectionalSize,triggersBounds:data},
{name:"source-text-offset",type:t.size,triggersBounds:data}];var targetLabel=[{name:"target-label",type:t.text,triggersBounds:data},{name:"target-text-rotation",type:t.textRotation,triggersBounds:data},{name:"target-text-margin-x",type:t.bidirectionalSize,triggersBounds:data},{name:"target-text-margin-y",type:t.bidirectionalSize,triggersBounds:data},{name:"target-text-offset",type:t.size,triggersBounds:data}],labelDimensions=[{name:"font-family",type:t.fontFamily,triggersBounds:data},{name:"font-style",
type:t.fontStyle,triggersBounds:data},{name:"font-weight",type:t.fontWeight,triggersBounds:data},{name:"font-size",type:t.size,triggersBounds:data},{name:"text-transform",type:t.textTransform,triggersBounds:data},{name:"text-wrap",type:t.textWrap,triggersBounds:data},{name:"text-overflow-wrap",type:t.textOverflowWrap,triggersBounds:data},{name:"text-max-width",type:t.size,triggersBounds:data},{name:"text-outline-width",type:t.size,triggersBounds:data},{name:"line-height",type:t.positiveNumber,triggersBounds:data}],
commonLabel=[{name:"text-valign",type:t.valign,triggersBounds:data},{name:"text-halign",type:t.halign,triggersBounds:data},{name:"color",type:t.color},{name:"text-outline-color",type:t.color},{name:"text-outline-opacity",type:t.zeroOneNumber},{name:"text-background-color",type:t.color},{name:"text-background-opacity",type:t.zeroOneNumber},{name:"text-background-padding",type:t.size,triggersBounds:data},{name:"text-border-opacity",type:t.zeroOneNumber},{name:"text-border-color",type:t.color},{name:"text-border-width",
type:t.size,triggersBounds:data},{name:"text-border-style",type:t.borderStyle,triggersBounds:data},{name:"text-background-shape",type:t.textBackgroundShape,triggersBounds:data},{name:"text-justification",type:t.justification}],behavior=[{name:"events",type:t.bool},{name:"text-events",type:t.bool}],visibility=[{name:"display",type:t.display,triggersZOrder:data,triggersBounds:data,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:t.visibility,triggersZOrder:data},{name:"opacity",type:t.zeroOneNumber,
triggersZOrder:JSCompiler_object_inline_zeroNonZero_646},{name:"text-opacity",type:t.zeroOneNumber},{name:"min-zoomed-font-size",type:t.size},{name:"z-compound-depth",type:t.zCompoundDepth,triggersZOrder:data},{name:"z-index-compare",type:t.zIndexCompare,triggersZOrder:data},{name:"z-index",type:t.nonNegativeInt,triggersZOrder:data}],overlay=[{name:"overlay-padding",type:t.size,triggersBounds:data},{name:"overlay-color",type:t.color},{name:"overlay-opacity",type:t.zeroOneNumber,triggersBounds:JSCompiler_object_inline_zeroNonZero_646},
{name:"overlay-shape",type:t.overlayShape,triggersBounds:data}];JSCompiler_object_inline_zeroNonZero_646=[{name:"underlay-padding",type:t.size,triggersBounds:data},{name:"underlay-color",type:t.color},{name:"underlay-opacity",type:t.zeroOneNumber,triggersBounds:JSCompiler_object_inline_zeroNonZero_646},{name:"underlay-shape",type:t.overlayShape,triggersBounds:data}];var transition=[{name:"transition-property",type:t.propList},{name:"transition-duration",type:t.time},{name:"transition-delay",type:t.time},
{name:"transition-timing-function",type:t.easing}],nodeSizeHashOverride=function(ele,parsedProp){return"label"===parsedProp.value?-ele.poolIndex():parsedProp.pfValue};nodeSizeHashOverride=[{name:"height",type:t.nodeSize,triggersBounds:data,hashOverride:nodeSizeHashOverride},{name:"width",type:t.nodeSize,triggersBounds:data,hashOverride:nodeSizeHashOverride},{name:"shape",type:t.nodeShape,triggersBounds:data},{name:"shape-polygon-points",type:t.polygonPointList,triggersBounds:data},{name:"background-color",
type:t.color},{name:"background-fill",type:t.fill},{name:"background-opacity",type:t.zeroOneNumber},{name:"background-blacken",type:t.nOneOneNumber},{name:"background-gradient-stop-colors",type:t.colors},{name:"background-gradient-stop-positions",type:t.percentages},{name:"background-gradient-direction",type:t.gradientDirection},{name:"padding",type:t.sizeMaybePercent,triggersBounds:data},{name:"padding-relative-to",type:t.paddingRelativeTo,triggersBounds:data},{name:"bounds-expansion",type:t.boundsExpansion,
triggersBounds:data}];var nodeBorder=[{name:"border-color",type:t.color},{name:"border-opacity",type:t.zeroOneNumber},{name:"border-width",type:t.size,triggersBounds:data},{name:"border-style",type:t.borderStyle}],backgroundImage=[{name:"background-image",type:t.urls},{name:"background-image-crossorigin",type:t.bgCrossOrigin},{name:"background-image-opacity",type:t.zeroOneNumbers},{name:"background-image-containment",type:t.bgContainment},{name:"background-image-smoothing",type:t.bools},{name:"background-position-x",
type:t.bgPos},{name:"background-position-y",type:t.bgPos},{name:"background-width-relative-to",type:t.bgRelativeTo},{name:"background-height-relative-to",type:t.bgRelativeTo},{name:"background-repeat",type:t.bgRepeat},{name:"background-fit",type:t.bgFit},{name:"background-clip",type:t.bgClip},{name:"background-width",type:t.bgWH},{name:"background-height",type:t.bgWH},{name:"background-offset-x",type:t.bgPos},{name:"background-offset-y",type:t.bgPos}],compound=[{name:"position",type:t.position,triggersBounds:data},
{name:"compound-sizing-wrt-labels",type:t.compoundIncludeLabels,triggersBounds:data},{name:"min-width",type:t.size,triggersBounds:data},{name:"min-width-bias-left",type:t.sizeMaybePercent,triggersBounds:data},{name:"min-width-bias-right",type:t.sizeMaybePercent,triggersBounds:data},{name:"min-height",type:t.size,triggersBounds:data},{name:"min-height-bias-top",type:t.sizeMaybePercent,triggersBounds:data},{name:"min-height-bias-bottom",type:t.sizeMaybePercent,triggersBounds:data}],edgeLine=[{name:"line-style",
type:t.lineStyle},{name:"line-color",type:t.color},{name:"line-fill",type:t.fill},{name:"line-cap",type:t.lineCap},{name:"line-opacity",type:t.zeroOneNumber},{name:"line-dash-pattern",type:t.numbers},{name:"line-dash-offset",type:t.number},{name:"line-gradient-stop-colors",type:t.colors},{name:"line-gradient-stop-positions",type:t.percentages},{name:"curve-style",type:t.curveStyle,triggersBounds:data,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:t.zeroOneNumber,triggersBounds:data},
{name:"source-endpoint",type:t.edgeEndpoint,triggersBounds:data},{name:"target-endpoint",type:t.edgeEndpoint,triggersBounds:data},{name:"control-point-step-size",type:t.size,triggersBounds:data},{name:"control-point-distances",type:t.bidirectionalSizes,triggersBounds:data},{name:"control-point-weights",type:t.numbers,triggersBounds:data},{name:"segment-distances",type:t.bidirectionalSizes,triggersBounds:data},{name:"segment-weights",type:t.numbers,triggersBounds:data},{name:"taxi-turn",type:t.bidirectionalSizeMaybePercent,
triggersBounds:data},{name:"taxi-turn-min-distance",type:t.size,triggersBounds:data},{name:"taxi-direction",type:t.axisDirection,triggersBounds:data},{name:"edge-distances",type:t.edgeDistances,triggersBounds:data},{name:"arrow-scale",type:t.positiveNumber,triggersBounds:data},{name:"loop-direction",type:t.angle,triggersBounds:data},{name:"loop-sweep",type:t.angle,triggersBounds:data},{name:"source-distance-from-node",type:t.size,triggersBounds:data},{name:"target-distance-from-node",type:t.size,
triggersBounds:data}],ghost=[{name:"ghost",type:t.bool,triggersBounds:data},{name:"ghost-offset-x",type:t.bidirectionalSize,triggersBounds:data},{name:"ghost-offset-y",type:t.bidirectionalSize,triggersBounds:data},{name:"ghost-opacity",type:t.zeroOneNumber}],core=[{name:"selection-box-color",type:t.color},{name:"selection-box-opacity",type:t.zeroOneNumber},{name:"selection-box-border-color",type:t.color},{name:"selection-box-border-width",type:t.size},{name:"active-bg-color",type:t.color},{name:"active-bg-opacity",
type:t.zeroOneNumber},{name:"active-bg-size",type:t.size},{name:"outside-texture-bg-color",type:t.color},{name:"outside-texture-bg-opacity",type:t.zeroOneNumber}],pie=[];styfn$2.pieBackgroundN=16;pie.push({name:"pie-size",type:t.sizeMaybePercent});for(var i=1;i<=styfn$2.pieBackgroundN;i++)pie.push({name:"pie-"+i+"-background-color",type:t.color}),pie.push({name:"pie-"+i+"-background-size",type:t.percent}),pie.push({name:"pie-"+i+"-background-opacity",type:t.zeroOneNumber});var edgeArrow=[],arrowPrefixes=
styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:t.arrowShape,triggersBounds:data},{name:"arrow-color",type:t.color},{name:"arrow-fill",type:t.arrowFill}].forEach(function(prop){arrowPrefixes.forEach(function(prefix){edgeArrow.push({name:prefix+"-"+prop.name,type:prop.type,triggersBounds:prop.triggersBounds})})},{});data=styfn$2.properties=[].concat(behavior,transition,visibility,overlay,JSCompiler_object_inline_zeroNonZero_646,ghost,commonLabel,labelDimensions,
mapData,urlRegexes,targetLabel,nodeSizeHashOverride,nodeBorder,backgroundImage,pie,compound,edgeLine,edgeArrow,core);var propGroups=styfn$2.propertyGroups={behavior,transition,visibility,overlay,underlay:JSCompiler_object_inline_zeroNonZero_646,ghost,commonLabel,labelDimensions,mainLabel:mapData,sourceLabel:urlRegexes,targetLabel,nodeBody:nodeSizeHashOverride,nodeBorder,backgroundImage,pie,compound,edgeLine,edgeArrow,core},propGroupNames=styfn$2.propertyGroupNames={};(styfn$2.propertyGroupKeys=Object.keys(propGroups)).forEach(function(key){propGroupNames[key]=
propGroups[key].map(function(prop){return prop.name});propGroups[key].forEach(function(prop){return prop.groupKey=key})});mapData=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",
pointsTo:"padding"}];styfn$2.propertyNames=data.map(function(p){return p.name});for(urlRegexes=0;urlRegexes<data.length;urlRegexes++)targetLabel=data[urlRegexes],data[targetLabel.name]=targetLabel;for(urlRegexes=0;urlRegexes<mapData.length;urlRegexes++)targetLabel=mapData[urlRegexes],labelDimensions={name:targetLabel.name,alias:!0,pointsTo:data[targetLabel.pointsTo]},data.push(labelDimensions),data[targetLabel.name]=labelDimensions})();styfn$2.getDefaultProperty=function(name){return this.getDefaultProperties()[name]};
styfn$2.getDefaultProperties=function(){var _p=this._private;if(null!=_p.defaultProperties)return _p.defaultProperties;for(var rawProps=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto",
"line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif",
"font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,
"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,
"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,
width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},
{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(css,prop){for(var i=1;i<=styfn$2.pieBackgroundN;i++){var name=prop.name.replace("{{i}}",i);css[name]=prop.value}return css},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,
"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",
value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(css,prop){styfn$2.arrowPrefixes.forEach(function(prefix){css[prefix+"-"+prop.name]=prop.value});return css},{})),parsedProps={},i$jscomp$0=0;i$jscomp$0<this.properties.length;i$jscomp$0++){var prop$jscomp$0=this.properties[i$jscomp$0];if(!prop$jscomp$0.pointsTo){prop$jscomp$0=prop$jscomp$0.name;var parsedProp=this.parse(prop$jscomp$0,rawProps[prop$jscomp$0]);parsedProps[prop$jscomp$0]=parsedProp}}_p.defaultProperties=parsedProps;return _p.defaultProperties};
styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9",
"mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25});this.defaultLength=this.length};var Style=function Style(cy){if(!(this instanceof Style))return new Style(cy);"core"!==instanceStr(cy)?error("A style must have a core reference"):(this._private={cy,coreStyle:{}},this.length=0,this.resetToDefault())},
styfn=Style.prototype;styfn.instanceString=function(){return"style"};styfn.clear=function(){for(var _p=this._private,eles=_p.cy.elements(),i=0;i<this.length;i++)this[i]=void 0;this.length=0;_p.contextStyles={};_p.propDiffs={};this.cleanElements(eles,!0);eles.forEach(function(ele){ele=ele[0]._private;ele.styleDirty=!0;ele.appliedInitStyle=!1});return this};styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};styfn.core=function(propName){return this._private.coreStyle[propName]||
this.getDefaultProperty(propName)};styfn.selector=function(selectorStr){selectorStr="core"===selectorStr?null:new Selector(selectorStr);var i=this.length++;this[i]={selector:selectorStr,properties:[],mappedProperties:[],index:i};return this};styfn.css=function(){var args=arguments;if(1===args.length){args=args[0];for(var i=0;i<this.properties.length;i++){var prop=this.properties[i],mapVal=args[prop.name];void 0===mapVal&&(mapVal=args[dash2camel(prop.name)]);void 0!==mapVal&&this.cssRule(prop.name,
mapVal)}}else 2===args.length&&this.cssRule(args[0],args[1]);return this};styfn.style=styfn.css;styfn.cssRule=function(name,value){if(name=this.parse(name,value))value=this.length-1,this[value].properties.push(name),this[value].properties[name.name]=name,name.name.match(/pie-(\d+)-background-size/)&&name.value&&(this._private.hasPie=!0),name.mapped&&this[value].mappedProperties.push(name),this[value].selector||(this._private.coreStyle[name.name]=name);return this};styfn.append=function(style){"stylesheet"===
instanceStr(style)?style.appendToStyle(this):array$jscomp$0(style)?this.appendFromJson(style):string$jscomp$0(style)&&this.appendFromString(style);return this};Style.fromJson=function(cy,json){cy=new Style(cy);cy.fromJson(json);return cy};Style.fromString=function(cy,string){return(new Style(cy)).fromString(string)};[{apply:function(eles){for(var updatedEles=this._private.cy.collection(),ie=0;ie<eles.length;ie++){var ele=eles[ie],cxtMeta=this.getContextMeta(ele);if(!cxtMeta.empty){var cxtStyle=this.getContextStyle(cxtMeta);
cxtMeta=this.applyContextStyle(cxtMeta,cxtStyle,ele);ele._private.appliedInitStyle?this.updateTransitions(ele,cxtMeta.diffProps):ele._private.appliedInitStyle=!0;this.updateStyleHints(ele)&&updatedEles.push(ele)}}return updatedEles},getPropertiesDiff:function(oldCxtKey,newCxtKey){var cache=this._private.propDiffs=this._private.propDiffs||{},dualCxtKey=oldCxtKey+"-"+newCxtKey,cachedVal=cache[dualCxtKey];if(cachedVal)return cachedVal;cachedVal=[];for(var addedProp={},i=0;i<this.length;i++){var cxt=
this[i],newHasCxt="t"===newCxtKey[i],cxtHasDiffed="t"===oldCxtKey[i]!==newHasCxt,cxtHasMappedProps=0<cxt.mappedProperties.length;if(cxtHasDiffed||newHasCxt&&cxtHasMappedProps)for(newHasCxt=void 0,cxtHasDiffed&&cxtHasMappedProps?newHasCxt=cxt.properties:cxtHasDiffed?newHasCxt=cxt.properties:cxtHasMappedProps&&(newHasCxt=cxt.mappedProperties),cxt=0;cxt<newHasCxt.length;cxt++){cxtHasDiffed=newHasCxt[cxt];cxtHasMappedProps=cxtHasDiffed.name;for(var laterCxtOverrides=!1,k=i+1;k<this.length&&("t"!==newCxtKey[k]||
!(laterCxtOverrides=null!=this[k].properties[cxtHasDiffed.name]));k++);addedProp[cxtHasMappedProps]||laterCxtOverrides||(addedProp[cxtHasMappedProps]=!0,cachedVal.push(cxtHasMappedProps))}}return cache[dualCxtKey]=cachedVal},getContextMeta:function(ele){var cxtKey="";var diffProps=ele._private.styleCxtKey||"";for(var i=0;i<this.length;i++){var context=this[i];cxtKey=context.selector&&context.selector.matches(ele)?cxtKey+"t":cxtKey+"f"}diffProps=this.getPropertiesDiff(diffProps,cxtKey);ele._private.styleCxtKey=
cxtKey;return{key:cxtKey,diffPropNames:diffProps,empty:0===diffProps.length}},getContextStyle:function(cxtMeta){cxtMeta=cxtMeta.key;var cxtStyles=this._private.contextStyles=this._private.contextStyles||{};if(cxtStyles[cxtMeta])return cxtStyles[cxtMeta];for(var style={_private:{key:cxtMeta}},i=0;i<this.length;i++){var cxt=this[i];if("t"===cxtMeta[i])for(var j=0;j<cxt.properties.length;j++){var prop=cxt.properties[j];style[prop.name]=prop}}return cxtStyles[cxtMeta]=style},applyContextStyle:function(cxtMeta,
cxtStyle,ele){cxtMeta=cxtMeta.diffPropNames;for(var retDiffProps={},types=this.types,i=0;i<cxtMeta.length;i++){var diffPropName=cxtMeta[i],cxtProp=cxtStyle[diffPropName],eleProp=ele.pstyle(diffPropName);if(!cxtProp)if(eleProp)cxtProp=eleProp.bypass?{name:diffPropName,deleteBypassed:!0}:{name:diffPropName,"delete":!0};else continue;if(eleProp!==cxtProp){if(cxtProp.mapped===types.fn&&null!=eleProp&&null!=eleProp.mapping&&eleProp.mapping.value===cxtProp.value){var mapping=eleProp.mapping;if((mapping.fnValue=
cxtProp.value(ele))===mapping.prevFnValue)continue}eleProp=retDiffProps[diffPropName]={prev:eleProp};this.applyParsedProperty(ele,cxtProp);eleProp.next=ele.pstyle(diffPropName);eleProp.next&&eleProp.next.bypass&&(eleProp.next=eleProp.next.bypassed)}}return{diffProps:retDiffProps}},updateStyleHints:function(ele$jscomp$0){var _p=ele$jscomp$0._private,self=this,propNames=self.propertyGroupNames,propGrKeys=self.propertyGroupKeys,propHash=function(ele,propNames,seedKey){return self.getPropertiesHash(ele,
propNames,seedKey)},oldStyleKey=_p.styleKey;if(ele$jscomp$0.removed())return!1;var isNode="nodes"===_p.group,overriddenStyles=ele$jscomp$0._private.style;propNames=Object.keys(overriddenStyles);for(var i=0;i<propGrKeys.length;i++)_p.styleKeys[propGrKeys[i]]=[9261,5381];i=function(val,grKey){_p.styleKeys[grKey][0]=hashInt(val,_p.styleKeys[grKey][0]);_p.styleKeys[grKey][1]=hashIntAlt(val,_p.styleKeys[grKey][1])};for(var updateGrKeyWStr=function(strVal,grKey){for(var j=0;j<strVal.length;j++){var ch=
strVal.charCodeAt(j);_p.styleKeys[grKey][0]=hashInt(ch,_p.styleKeys[grKey][0]);_p.styleKeys[grKey][1]=hashIntAlt(ch,_p.styleKeys[grKey][1])}},_i=0;_i<propNames.length;_i++){var name=propNames[_i],parsedProp=overriddenStyles[name];if(null!=parsedProp){var propInfo=this.properties[name],type=propInfo.type;name=propInfo.groupKey;var normalizedNumberVal=void 0;null!=propInfo.hashOverride?normalizedNumberVal=propInfo.hashOverride(ele$jscomp$0,parsedProp):null!=parsedProp.pfValue&&(normalizedNumberVal=
parsedProp.pfValue);var numberVal=null==propInfo.enums?parsedProp.value:null;propInfo=null!=normalizedNumberVal;var haveUnitedNum=null!=numberVal,haveNum=propInfo||haveUnitedNum;haveUnitedNum=parsedProp.units;type.number&&haveNum&&!type.multiple?(parsedProp=propInfo?normalizedNumberVal:numberVal,i(-128<parsedProp&&128>parsedProp&&Math.floor(parsedProp)!==parsedProp?2E9-(1024*parsedProp|0):parsedProp,name),propInfo||null==haveUnitedNum||updateGrKeyWStr(haveUnitedNum,name)):updateGrKeyWStr(parsedProp.strValue,
name)}}propNames=[9261,5381];for(overriddenStyles=0;overriddenStyles<propGrKeys.length;overriddenStyles++)i=_p.styleKeys[propGrKeys[overriddenStyles]],propNames[0]=hashInt(i[0],propNames[0]),propNames[1]=hashIntAlt(i[1],propNames[1]);_p.styleKey=2097152*propNames[0]+propNames[1];propGrKeys=_p.styleKeys;_p.labelDimsKey=combineHashesArray(propGrKeys.labelDimensions);propNames=propHash(ele$jscomp$0,["label"],propGrKeys.labelDimensions);_p.labelKey=combineHashesArray(propNames);_p.labelStyleKey=combineHashesArray(hashArrays(propGrKeys.commonLabel,
propNames));isNode||(propNames=propHash(ele$jscomp$0,["source-label"],propGrKeys.labelDimensions),_p.sourceLabelKey=combineHashesArray(propNames),_p.sourceLabelStyleKey=combineHashesArray(hashArrays(propGrKeys.commonLabel,propNames)),ele$jscomp$0=propHash(ele$jscomp$0,["target-label"],propGrKeys.labelDimensions),_p.targetLabelKey=combineHashesArray(ele$jscomp$0),_p.targetLabelStyleKey=combineHashesArray(hashArrays(propGrKeys.commonLabel,ele$jscomp$0)));isNode&&(ele$jscomp$0=_p.styleKeys,isNode=ele$jscomp$0.pie,
ele$jscomp$0=[ele$jscomp$0.nodeBody,ele$jscomp$0.nodeBorder,ele$jscomp$0.backgroundImage,ele$jscomp$0.compound,isNode].filter(function(k){return null!=k}).reduce(hashArrays,[9261,5381]),_p.nodeKey=combineHashesArray(ele$jscomp$0),_p.hasPie=null!=isNode&&9261!==isNode[0]&&5381!==isNode[1]);return oldStyleKey!==_p.styleKey},clearStyleHints:function(ele){ele=ele._private;ele.styleCxtKey="";ele.styleKeys={};ele.styleKey=null;ele.labelKey=null;ele.labelStyleKey=null;ele.sourceLabelKey=null;ele.sourceLabelStyleKey=
null;ele.targetLabelKey=null;ele.targetLabelStyleKey=null;ele.nodeKey=null;ele.hasPie=null},applyParsedProperty:function(ele,parsedProp){var self=this,prop=parsedProp,style=ele._private.style,types=self.types,type=self.properties[prop.name].type,propIsBypass=prop.bypass,origProp=style[prop.name],origPropIsBypass=origProp&&origProp.bypass,_p=ele._private,checkTriggers=function(){self.checkTriggers(ele,prop.name,null==origProp?null:null!=origProp.pfValue?origProp.pfValue:origProp.value,null==prop?null:
null!=prop.pfValue?prop.pfValue:prop.value)};prop&&"pie"===prop.name.substr(0,3)&&warn("The pie style properties are deprecated.  Create charts using background images instead.");"curve-style"===parsedProp.name&&ele.isEdge()&&("bezier"!==parsedProp.value&&ele.isLoop()||"haystack"===parsedProp.value&&(ele.source().isParent()||ele.target().isParent()))&&(prop=parsedProp=this.parse(parsedProp.name,"bezier",propIsBypass));if(prop["delete"])return style[prop.name]=void 0,checkTriggers(),!0;if(prop.deleteBypassed){if(origProp)return origProp.bypass?
(origProp.bypassed=void 0,checkTriggers(),!0):!1;checkTriggers();return!0}if(prop.deleteBypass){if(origProp)return origProp.bypass?(style[prop.name]=origProp.bypassed,checkTriggers(),!0):!1;checkTriggers();return!0}parsedProp=function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+ele.id()+"` has no mapping for property `"+prop.name+"` with data field `"+prop.field+"`); try a `["+prop.field+"]` selector to limit scope to elements with `"+prop.field+"` defined")};
switch(prop.mapped){case types.mapData:var flatProp=prop.field.split(".");_p=_p.data;for(types=0;types<flatProp.length&&_p;types++)_p=_p[flatProp[types]];if(null==_p)return parsedProp(),!1;if(number$1(_p))flatProp=prop.fieldMax-prop.fieldMin,flatProp=0===flatProp?0:(_p-prop.fieldMin)/flatProp;else return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+prop.field+": "+_p+"` for `"+ele.id()+"` is non-numeric)"),!1;0>flatProp?flatProp=0:1<flatProp&&(flatProp=1);if(type.color){type=
prop.valueMin[0];_p=prop.valueMin[1];types=prop.valueMin[2];var a1=null==prop.valueMin[3]?1:prop.valueMin[3];type=[Math.round(type+(prop.valueMax[0]-type)*flatProp),Math.round(_p+(prop.valueMax[1]-_p)*flatProp),Math.round(types+(prop.valueMax[2]-types)*flatProp),Math.round(a1+((null==prop.valueMax[3]?1:prop.valueMax[3])-a1)*flatProp)];flatProp={bypass:prop.bypass,name:prop.name,value:type,strValue:"rgb("+type[0]+", "+type[1]+", "+type[2]+")"}}else if(type.number)flatProp=this.parse(prop.name,prop.valueMin+
(prop.valueMax-prop.valueMin)*flatProp,prop.bypass,"mapping");else return!1;if(!flatProp)return parsedProp(),!1;flatProp.mapping=prop;prop=flatProp;break;case types.data:type=prop.field.split(".");_p=_p.data;for(types=0;types<type.length&&_p;types++)_p=_p[type[types]];null!=_p&&(flatProp=this.parse(prop.name,_p,prop.bypass,"mapping"));if(!flatProp)return parsedProp(),!1;flatProp.mapping=prop;prop=flatProp;break;case types.fn:parsedProp=prop.value;parsedProp=null!=prop.fnValue?prop.fnValue:parsedProp(ele);
prop.prevFnValue=parsedProp;if(null==parsedProp)return warn("Custom function mappers may not return null (i.e. `"+prop.name+"` for ele `"+ele.id()+"` is null)"),!1;flatProp=this.parse(prop.name,parsedProp,prop.bypass,"mapping");if(!flatProp)return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+prop.name+"` for ele `"+ele.id()+"` is invalid)"),!1;flatProp.mapping=copy(prop);prop=flatProp;break;case void 0:break;default:return!1}propIsBypass?(prop.bypassed=
origPropIsBypass?origProp.bypassed:origProp,style[prop.name]=prop):origPropIsBypass?origProp.bypassed=prop:style[prop.name]=prop;checkTriggers();return!0},cleanElements:function(eles,keepBypasses){for(var i=0;i<eles.length;i++){var ele=eles[i];this.clearStyleHints(ele);ele.dirtyCompoundBoundsCache();ele.dirtyBoundingBoxCache();if(keepBypasses){ele=ele._private.style;for(var propNames=Object.keys(ele),j=0;j<propNames.length;j++){var propName=propNames[j],eleProp=ele[propName];null!=eleProp&&(eleProp.bypass?
eleProp.bypassed=null:ele[propName]=null)}}else ele._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(ele,diffProps){var self=this,_p=ele._private,props=ele.pstyle("transition-property").value,duration=ele.pstyle("transition-duration").pfValue,delay=ele.pstyle("transition-delay").pfValue;if(0<props.length&&0<duration){for(var style={},anyPrev=!1,i=0;i<props.length;i++){var prop=props[i],styProp=ele.pstyle(prop),diffProp=diffProps[prop];
if(diffProp){var fromProp=diffProp.prev;styProp=null!=diffProp.next?diffProp.next:styProp;diffProp=!1;var initVal=void 0;fromProp&&(number$1(fromProp.pfValue)&&number$1(styProp.pfValue)?(diffProp=styProp.pfValue-fromProp.pfValue,initVal=fromProp.pfValue+1E-6*diffProp):number$1(fromProp.value)&&number$1(styProp.value)?(diffProp=styProp.value-fromProp.value,initVal=fromProp.value+1E-6*diffProp):array$jscomp$0(fromProp.value)&&array$jscomp$0(styProp.value)&&(diffProp=fromProp.value[0]!==styProp.value[0]||
fromProp.value[1]!==styProp.value[1]||fromProp.value[2]!==styProp.value[2],initVal=fromProp.strValue),diffProp&&(style[prop]=styProp.strValue,this.applyBypass(ele,prop,initVal),anyPrev=!0))}}anyPrev&&(_p.transitioning=!0,(new Promise$1(function(resolve){0<delay?ele.delayAnimation(delay).play().promise().then(resolve):resolve()})).then(function(){return ele.animation({style,duration,easing:ele.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){self.removeBypasses(ele,
props);ele.emitAndNotify("style");_p.transitioning=!1}))}else _p.transitioning&&(this.removeBypasses(ele,props),ele.emitAndNotify("style"),_p.transitioning=!1)},checkTrigger:function(ele,name,fromValue,toValue,getTrigger,onTrigger){ele=this.properties[name];getTrigger=getTrigger(ele);null!=getTrigger&&getTrigger(fromValue,toValue)&&onTrigger(ele)},checkZOrderTrigger:function(ele,name,fromValue,toValue){var _this=this;this.checkTrigger(ele,name,fromValue,toValue,function(prop){return prop.triggersZOrder},
function(){_this._private.cy.notify("zorder",ele)})},checkBoundsTrigger:function(ele,name,fromValue,toValue){this.checkTrigger(ele,name,fromValue,toValue,function(prop){return prop.triggersBounds},function(prop){ele.dirtyCompoundBoundsCache();ele.dirtyBoundingBoxCache();!prop.triggersBoundsOfParallelBeziers||("curve-style"!==name||"bezier"!==fromValue&&"bezier"!==toValue)&&("display"!==name||"none"!==fromValue&&"none"!==toValue)||ele.parallelEdges().forEach(function(pllEdge){pllEdge.isBundledBezier()&&
pllEdge.dirtyBoundingBoxCache()})})},checkTriggers:function(ele,name,fromValue,toValue){ele.dirtyStyleCache();this.checkZOrderTrigger(ele,name,fromValue,toValue);this.checkBoundsTrigger(ele,name,fromValue,toValue)}},{applyBypass:function(eles,name,value,updateTransitions){var props=[];if("*"===name||"**"===name){if(void 0!==value)for(name=0;name<this.properties.length;name++){var parsedProp=this.parse(this.properties[name].name,value,!0);parsedProp&&props.push(parsedProp)}}else if(string$jscomp$0(name))(name=
this.parse(name,value,!0))&&props.push(name);else if(plainObject(name))for(updateTransitions=value,value=Object.keys(name),parsedProp=0;parsedProp<value.length;parsedProp++){var _name2=value[parsedProp],_value=name[_name2];void 0===_value&&(_value=name[dash2camel(_name2)]);void 0!==_value&&(_name2=this.parse(_name2,_value,!0))&&props.push(_name2)}else return!1;if(0===props.length)return!1;name=!1;for(value=0;value<eles.length;value++){parsedProp=eles[value];_name2={};var diffProp=void 0;for(_value=
0;_value<props.length;_value++){var _prop=props[_value];updateTransitions&&(diffProp=parsedProp.pstyle(_prop.name),diffProp=_name2[_prop.name]={prev:diffProp});name=this.applyParsedProperty(parsedProp,copy(_prop))||name;updateTransitions&&(diffProp.next=parsedProp.pstyle(_prop.name))}name&&this.updateStyleHints(parsedProp);updateTransitions&&this.updateTransitions(parsedProp,_name2,!0)}return name},overrideBypass:function(eles,name,value){name=camel2dash(name);for(var i=0;i<eles.length;i++){var ele=
eles[i],prop=ele._private.style[name],type=this.properties[name].type,isColor=type.color;type=type.mutiple;var oldValue=prop?null!=prop.pfValue?prop.pfValue:prop.value:null;prop&&prop.bypass?(prop.value=value,null!=prop.pfValue&&(prop.pfValue=value),prop.strValue=isColor?"rgb("+value.join(",")+")":type?value.join(" "):""+value,this.updateStyleHints(ele)):this.applyBypass(ele,name,value);this.checkTriggers(ele,name,oldValue,value)}},removeAllBypasses:function(eles,updateTransitions){return this.removeBypasses(eles,
this.propertyNames,updateTransitions)},removeBypasses:function(eles,props,updateTransitions){for(var j=0;j<eles.length;j++){for(var ele=eles[j],diffProps={},i=0;i<props.length;i++){var name=props[i],prop=this.properties[name],prevProp=ele.pstyle(prop.name);prevProp&&prevProp.bypass&&(name=this.parse(name,"",!0),prevProp=diffProps[prop.name]={prev:prevProp},this.applyParsedProperty(ele,name),prevProp.next=ele.pstyle(prop.name))}this.updateStyleHints(ele);updateTransitions&&this.updateTransitions(ele,
diffProps,!0)}}},{getEmSizeInPixels:function(){var px=this.containerCss("font-size");return null!=px?parseFloat(px):1},containerCss:function(propName){var cy=this._private.cy,domElement=cy.container();if((cy=cy.window())&&domElement&&cy.getComputedStyle)return cy.getComputedStyle(domElement).getPropertyValue(propName)}},styfn$5,{appendFromJson:function(json){for(var i=0;i<json.length;i++){var context=json[i],selector=context.selector;context=context.style||context.css;var names=Object.keys(context);
this.selector(selector);for(selector=0;selector<names.length;selector++){var name=names[selector];this.css(name,context[name])}}return this},fromJson:function(json){this.resetToDefault();this.appendFromJson(json);return this},json:function(){for(var json=[],i=this.defaultLength;i<this.length;i++){var cxt=this[i],selector=cxt.selector;cxt=cxt.properties;for(var css={},j=0;j<cxt.length;j++){var prop=cxt[j];css[prop.name]=prop.strValue}json.push({selector:selector?selector.toString():"core",style:css})}return json}},
{appendFromString:function(string){function removeSelAndBlockFromRemaining(){remaining=remaining.length>selAndBlockStr.length?remaining.substr(selAndBlockStr.length):""}var remaining=""+string;for(remaining=remaining.replace(/[/][*](\s|.)+?[*][/]/g,"");!remaining.match(/^\s*$/);){string=remaining.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!string){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+remaining);break}var selAndBlockStr=
string[0];var selectorStr=string[1];if("core"!==selectorStr&&(new Selector(selectorStr)).invalid)warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+selectorStr);else{var blockStr=string[2],invalidBlock=!1;var blockRem=blockStr;for(string=[];!blockRem.match(/^\s*$/);){var propAndVal=blockRem.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!propAndVal){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+blockStr);invalidBlock=
!0;break}var propAndValStr=propAndVal[0];var propStr=propAndVal[1];propAndVal=propAndVal[2];this.properties[propStr]?this.parse(propStr,propAndVal)?string.push({name:propStr,val:propAndVal}):warn("Skipping property: Invalid property definition in: "+propAndValStr):warn("Skipping property: Invalid property name in: "+propAndValStr);blockRem=blockRem.length>propAndValStr.length?blockRem.substr(propAndValStr.length):""}if(invalidBlock){removeSelAndBlockFromRemaining();break}this.selector(selectorStr);
for(selectorStr=0;selectorStr<string.length;selectorStr++)blockRem=string[selectorStr],this.css(blockRem.name,blockRem.val)}removeSelAndBlockFromRemaining()}return this},fromString:function(string){this.resetToDefault();this.appendFromString(string);return this}},styfn$2,{parse:function(name,value,propIsBypass,propIsFlat){if(fn$6(value))return this.parseImplWarn(name,value,propIsBypass,propIsFlat);var argHash=hashStrings(name,""+value,propIsBypass?"t":"f","mapping"===propIsFlat||!0===propIsFlat||
!1===propIsFlat||null==propIsFlat?"dontcare":propIsFlat),propCache=this.propCache=this.propCache||[],ret;(ret=propCache[argHash])||(ret=propCache[argHash]=this.parseImplWarn(name,value,propIsBypass,propIsFlat));if(propIsBypass||"mapping"===propIsFlat)if(ret=copy(ret))ret.value=copy(ret.value);return ret},parseImplWarn:function(name,value,propIsBypass,propIsFlat){(propIsBypass=this.parseImpl(name,value,propIsBypass,propIsFlat))||null==value||warn("The style property `".concat(name,": ").concat(value,
"` is invalid"));!propIsBypass||"width"!==propIsBypass.name&&"height"!==propIsBypass.name||"label"!==value||warn("The style value of `label` is deprecated for `"+propIsBypass.name+"`");return propIsBypass},parseImpl:function(name,value,propIsBypass,propIsFlat){name=camel2dash(name);var property=this.properties[name],passedValue=value,types=this.types;if(!property||void 0===value)return null;property.alias&&(property=property.pointsTo,name=property.name);var valueIsString=string$jscomp$0(value);valueIsString&&
(value=value.trim());var type=property.type;if(!type)return null;if(propIsBypass&&(""===value||null===value))return{name,value,bypass:!0,deleteBypass:!0};if(fn$6(value))return{name,value,strValue:"fn",mapped:types.fn,bypass:propIsBypass};var data,mapData;if(!(!valueIsString||propIsFlat||7>value.length||"a"!==value[1])){if(7<=value.length&&"d"===value[0]&&(data=(new RegExp(types.data.regex)).exec(value)))return propIsBypass?!1:{name,value:data,strValue:""+value,mapped:types.data,field:data[1],bypass:propIsBypass};
if(10<=value.length&&"m"===value[0]&&(mapData=(new RegExp(types.mapData.regex)).exec(value))){if(propIsBypass||type.multiple)return!1;var _mapped=types.mapData;if(!type.color&&!type.number)return!1;passedValue=this.parse(name,mapData[4]);if(!passedValue||passedValue.mapped)return!1;valueIsString=this.parse(name,mapData[5]);return!valueIsString||valueIsString.mapped?!1:passedValue.pfValue===valueIsString.pfValue||passedValue.strValue===valueIsString.strValue?(warn("`"+name+": "+value+"` is not a valid mapper because the output range is zero; converting to `"+
name+": "+passedValue.strValue+"`"),this.parse(name,passedValue.strValue)):!type.color||(propIsFlat=passedValue.value,property=valueIsString.value,propIsFlat[0]!==property[0]||propIsFlat[1]!==property[1]||propIsFlat[2]!==property[2]||propIsFlat[3]!==property[3]&&(null!=propIsFlat[3]&&1!==propIsFlat[3]||null!=property[3]&&1!==property[3]))?{name,value:mapData,strValue:""+value,mapped:_mapped,field:mapData[1],fieldMin:parseFloat(mapData[2]),fieldMax:parseFloat(mapData[3]),valueMin:passedValue.value,
valueMax:valueIsString.value,bypass:propIsBypass}:!1}}if(type.multiple&&"multiple"!==propIsFlat){mapData=valueIsString?value.split(/\s+/):array$jscomp$0(value)?value:[value];if(type.evenMultiple&&0!==mapData.length%2)return null;_mapped=[];passedValue=[];valueIsString=[];propIsFlat="";property=!1;for(types=0;types<mapData.length;types++)data=this.parse(name,mapData[types],propIsBypass,"multiple"),property=property||string$jscomp$0(data.value),_mapped.push(data.value),valueIsString.push(null!=data.pfValue?
data.pfValue:data.value),passedValue.push(data.units),propIsFlat+=(0<types?" ":"")+data.strValue;return type.validate&&!type.validate(_mapped,passedValue)?null:type.singleEnum&&property?1===_mapped.length&&string$jscomp$0(_mapped[0])?{name,value:_mapped[0],strValue:_mapped[0],bypass:propIsBypass}:null:{name,value:_mapped,pfValue:valueIsString,strValue:propIsFlat,bypass:propIsBypass,units:passedValue}}mapData=function(){for(var _i=0;_i<type.enums.length;_i++)if(type.enums[_i]===value)return{name,value,
strValue:""+value,bypass:propIsBypass};return null};if(type.number){propIsFlat="px";type.units&&(_mapped=type.units);type.implicitUnits&&(propIsFlat=type.implicitUnits);if(!type.unitless)if(valueIsString){if(valueIsString="px|em"+(type.allowPercent?"|\\%":""),_mapped&&(valueIsString=_mapped),valueIsString=value.match("^((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))("+valueIsString+")?$"))value=valueIsString[1],_mapped=valueIsString[2]||propIsFlat}else if(!_mapped||type.implicitUnits)_mapped=
propIsFlat;value=parseFloat(value);if(isNaN(value)&&void 0===type.enums)return null;if(isNaN(value)&&void 0!==type.enums)return value=passedValue,mapData();if(type.integer&&!integer(value)||void 0!==type.min&&(value<type.min||type.strictMin&&value===type.min)||void 0!==type.max&&(value>type.max||type.strictMax&&value===type.max))return null;mapData={name,value,strValue:""+value+(_mapped?_mapped:""),units:_mapped,bypass:propIsBypass};mapData.pfValue=type.unitless||"px"!==_mapped&&"em"!==_mapped?value:
"px"!==_mapped&&_mapped?this.getEmSizeInPixels()*value:value;if("ms"===_mapped||"s"===_mapped)mapData.pfValue="ms"===_mapped?value:1E3*value;if("deg"===_mapped||"rad"===_mapped)mapData.pfValue="rad"===_mapped?value:Math.PI*value/180;"%"===_mapped&&(mapData.pfValue=value/100);return mapData}if(type.propList){mapData=[];_mapped=""+value;if("none"!==_mapped){_mapped=_mapped.split(/\s*,\s*|\s+/);for(passedValue=0;passedValue<_mapped.length;passedValue++)valueIsString=_mapped[passedValue].trim(),this.properties[valueIsString]?
mapData.push(valueIsString):warn("`"+valueIsString+"` is not a valid property name");if(0===mapData.length)return null}return{name,value:mapData,strValue:0===mapData.length?"none":mapData.join(" "),bypass:propIsBypass}}if(type.color)return(mapData=color2tuple(value))?{name,value:mapData,pfValue:mapData,strValue:"rgb("+mapData[0]+","+mapData[1]+","+mapData[2]+")",bypass:propIsBypass}:null;if(type.regex||type.regexes){if(type.enums&&(mapData=mapData()))return mapData;mapData=type.regexes?type.regexes:
[type.regex];for(_mapped=0;_mapped<mapData.length;_mapped++)if(passedValue=(new RegExp(mapData[_mapped])).exec(value))return{name,value:type.singleRegexMatchValue?passedValue[1]:passedValue,strValue:""+value,bypass:propIsBypass};return null}return type.string?{name,value:""+value,strValue:""+value,bypass:propIsBypass}:type.enums?mapData():null}}].forEach(function(props){extend(styfn,props)});Style.types=styfn.types;Style.properties=styfn.properties;Style.propertyGroups=styfn.propertyGroups;Style.propertyGroupNames=
styfn.propertyGroupNames;Style.propertyGroupKeys=styfn.propertyGroupKeys;var corefn$1={autolock:function(bool){if(void 0!==bool)this._private.autolock=bool?!0:!1;else return this._private.autolock;return this},autoungrabify:function(bool){if(void 0!==bool)this._private.autoungrabify=bool?!0:!1;else return this._private.autoungrabify;return this},autounselectify:function(bool){if(void 0!==bool)this._private.autounselectify=bool?!0:!1;else return this._private.autounselectify;return this},selectionType:function(selType){var _p=
this._private;null==_p.selectionType&&(_p.selectionType="single");if(void 0!==selType){if("additive"===selType||"single"===selType)_p.selectionType=selType}else return _p.selectionType;return this},panningEnabled:function(bool){if(void 0!==bool)this._private.panningEnabled=bool?!0:!1;else return this._private.panningEnabled;return this},userPanningEnabled:function(bool){if(void 0!==bool)this._private.userPanningEnabled=bool?!0:!1;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(bool){if(void 0!==
bool)this._private.zoomingEnabled=bool?!0:!1;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(bool){if(void 0!==bool)this._private.userZoomingEnabled=bool?!0:!1;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(bool){if(void 0!==bool)this._private.boxSelectionEnabled=bool?!0:!1;else return this._private.boxSelectionEnabled;return this},pan:function(){var args=arguments,pan=this._private.pan;switch(args.length){case 0:return pan;
case 1:if(string$jscomp$0(args[0])){var dim=args[0];return pan[dim]}if(plainObject(args[0])){if(!this._private.panningEnabled)return this;args=args[0];dim=args.x;args=args.y;number$1(dim)&&(pan.x=dim);number$1(args)&&(pan.y=args);this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;dim=args[0];args=args[1];"x"!==dim&&"y"!==dim||!number$1(args)||(pan[dim]=args);this.emit("pan viewport")}this.notify("viewport");return this},panBy:function(arg0,arg1){var args=arguments,
pan=this._private.pan;if(!this._private.panningEnabled)return this;switch(args.length){case 1:if(plainObject(arg0)){var val=args[0];args=val.x;val=val.y;number$1(args)&&(pan.x+=args);number$1(val)&&(pan.y+=val);this.emit("pan viewport")}break;case 2:args=arg0,val=arg1,"x"!==args&&"y"!==args||!number$1(val)||(pan[args]+=val),this.emit("pan viewport")}this.notify("viewport");return this},fit:function(elements,padding){if(elements=this.getFitViewport(elements,padding))padding=this._private,padding.zoom=
elements.zoom,padding.pan=elements.pan,this.emit("pan zoom viewport"),this.notify("viewport");return this},getFitViewport:function(elements,padding){number$1(elements)&&void 0===padding&&(padding=elements,elements=void 0);if(this._private.panningEnabled&&this._private.zoomingEnabled){if(string$jscomp$0(elements))elements=this.$(elements);else{var obj=elements;if(plainObject(obj)&&number$1(obj.x1)&&number$1(obj.x2)&&number$1(obj.y1)&&number$1(obj.y2)){var bb=elements;bb={x1:bb.x1,y1:bb.y1,x2:bb.x2,
y2:bb.y2};bb.w=bb.x2-bb.x1;bb.h=bb.y2-bb.y1}else elementOrCollection(elements)||(elements=this.mutableElements())}if(!elementOrCollection(elements)||!elements.empty())if(bb=bb||elements.boundingBox(),elements=this.width(),obj=this.height(),padding=number$1(padding)?padding:0,!isNaN(elements)&&!isNaN(obj)&&0<elements&&0<obj&&!isNaN(bb.w)&&!isNaN(bb.h)&&0<bb.w&&0<bb.h)return padding=Math.min((elements-2*padding)/bb.w,(obj-2*padding)/bb.h),padding=padding>this._private.maxZoom?this._private.maxZoom:
padding,padding=padding<this._private.minZoom?this._private.minZoom:padding,{zoom:padding,pan:{x:(elements-padding*(bb.x1+bb.x2))/2,y:(obj-padding*(bb.y1+bb.y2))/2}}}},zoomRange:function(min,max){var _p=this._private;null==max&&(max=min,min=max.min,max=max.max);number$1(min)&&number$1(max)&&min<=max?(_p.minZoom=min,_p.maxZoom=max):number$1(min)&&void 0===max&&min<=_p.maxZoom?_p.minZoom=min:number$1(max)&&void 0===min&&max>=_p.minZoom&&(_p.maxZoom=max);return this},minZoom:function(zoom){return void 0===
zoom?this._private.minZoom:this.zoomRange({min:zoom})},maxZoom:function(zoom){return void 0===zoom?this._private.maxZoom:this.zoomRange({max:zoom})},getZoomedViewport:function(params){var _p=this._private,currentPan=_p.pan,currentZoom=_p.zoom,bail=!1;_p.zoomingEnabled||(bail=!0);if(number$1(params))var zoom=params;else if(plainObject(params)){zoom=params.level;if(null!=params.position)var pos=modelToRenderedPosition(params.position,currentZoom,currentPan);else null!=params.renderedPosition&&(pos=
params.renderedPosition);null==pos||_p.panningEnabled||(bail=!0)}zoom=zoom>_p.maxZoom?_p.maxZoom:zoom;zoom=zoom<_p.minZoom?_p.minZoom:zoom;return!bail&&number$1(zoom)&&zoom!==currentZoom&&(null==pos||number$1(pos.x)&&number$1(pos.y))?null!=pos?(params=zoom,{zoomed:!0,panned:!0,zoom:params,pan:{x:-params/currentZoom*(pos.x-currentPan.x)+pos.x,y:-params/currentZoom*(pos.y-currentPan.y)+pos.y}}):{zoomed:!0,panned:!1,zoom,pan:currentPan}:null},zoom:function(params){if(void 0===params)return this._private.zoom;
params=this.getZoomedViewport(params);var _p=this._private;if(null==params||!params.zoomed)return this;_p.zoom=params.zoom;params.panned&&(_p.pan.x=params.pan.x,_p.pan.y=params.pan.y);this.emit("zoom"+(params.panned?" pan":"")+" viewport");this.notify("viewport");return this},viewport:function(opts){var _p=this._private,zoomDefd=!0,panDefd=!0,events=[],zoomFailed=!1,panFailed=!1;if(!opts)return this;number$1(opts.zoom)||(zoomDefd=!1);plainObject(opts.pan)||(panDefd=!1);if(!zoomDefd&&!panDefd)return this;
zoomDefd&&(zoomDefd=opts.zoom,zoomDefd<_p.minZoom||zoomDefd>_p.maxZoom||!_p.zoomingEnabled?zoomFailed=!0:(_p.zoom=zoomDefd,events.push("zoom")));!panDefd||zoomFailed&&opts.cancelOnFailedZoom||!_p.panningEnabled||(opts=opts.pan,number$1(opts.x)&&(_p.pan.x=opts.x,panFailed=!1),number$1(opts.y)&&(_p.pan.y=opts.y,panFailed=!1),panFailed||events.push("pan"));0<events.length&&(events.push("viewport"),this.emit(events.join(" ")),this.notify("viewport"));return this},center:function(elements){if(elements=
this.getCenterPan(elements))this._private.pan=elements,this.emit("pan viewport"),this.notify("viewport");return this},getCenterPan:function(elements,zoom){if(this._private.panningEnabled&&(string$jscomp$0(elements)?elements=this.mutableElements().filter(elements):elementOrCollection(elements)||(elements=this.mutableElements()),0!==elements.length)){elements=elements.boundingBox();var w=this.width(),h=this.height();zoom=void 0===zoom?this._private.zoom:zoom;return{x:(w-zoom*(elements.x1+elements.x2))/
2,y:(h-zoom*(elements.y1+elements.y2))/2}}},reset:function(){if(!this._private.panningEnabled||!this._private.zoomingEnabled)return this;this.viewport({pan:{x:0,y:0},zoom:1});return this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var _p=this._private,container=_p.container,JSCompiler_temp;(JSCompiler_temp=_p.sizeCache)||(container?(JSCompiler_temp=this.window().getComputedStyle(container),container={width:container.clientWidth-parseFloat(JSCompiler_temp.getPropertyValue("padding-left"))-
parseFloat(JSCompiler_temp.getPropertyValue("padding-right")),height:container.clientHeight-parseFloat(JSCompiler_temp.getPropertyValue("padding-top"))-parseFloat(JSCompiler_temp.getPropertyValue("padding-bottom"))}):container={width:1,height:1},JSCompiler_temp=container);return _p.sizeCache=JSCompiler_temp},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var pan=this._private.pan,zoom=this._private.zoom,rb=this.renderedExtent();pan={x1:(rb.x1-
pan.x)/zoom,x2:(rb.x2-pan.x)/zoom,y1:(rb.y1-pan.y)/zoom,y2:(rb.y2-pan.y)/zoom};pan.w=pan.x2-pan.x1;pan.h=pan.y2-pan.y1;return pan},renderedExtent:function(){var width=this.width(),height=this.height();return{x1:0,y1:0,x2:width,y2:height,w:width,h:height}},multiClickDebounceTime:function(_int){if(_int)this._private.multiClickDebounceTime=_int;else return this._private.multiClickDebounceTime;return this}};corefn$1.centre=corefn$1.center;corefn$1.autolockNodes=corefn$1.autolock;corefn$1.autoungrabifyNodes=
corefn$1.autoungrabify;var fn={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,
updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};fn.attr=fn.data;fn.removeAttr=fn.removeData;var Core=function(opts){var cy=this;opts=extend({},opts);var container=opts.container;container&&!htmlElement(container)&&htmlElement(container[0])&&(container=container[0]);var reg=container?container._cyreg:null;if(reg=reg||{},reg.cy)reg.cy.destroy(),reg={};var readies=reg.readies=reg.readies||[];container&&(container._cyreg=
reg);reg.cy=cy;var head=void 0!==_window&&void 0!==container&&!opts.headless,options=opts;options.layout=extend({name:head?"grid":"null"},options.layout);options.renderer=extend({name:head?"canvas":"null"},options.renderer);opts=function(def,val,altVal){return void 0!==val?val:void 0!==altVal?altVal:def};var _p=this._private={container,ready:!1,options,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:options.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,
minZoom:1E-50,maxZoom:1E50,zoomingEnabled:opts(!0,options.zoomingEnabled),userZoomingEnabled:opts(!0,options.userZoomingEnabled),panningEnabled:opts(!0,options.panningEnabled),userPanningEnabled:opts(!0,options.userPanningEnabled),boxSelectionEnabled:opts(!0,options.boxSelectionEnabled),autolock:opts(!1,options.autolock,options.autolockNodes),autoungrabify:opts(!1,options.autoungrabify,options.autoungrabifyNodes),autounselectify:opts(!1,options.autounselectify),styleEnabled:void 0===options.styleEnabled?
head:options.styleEnabled,zoom:number$1(options.zoom)?options.zoom:1,pan:{x:plainObject(options.pan)&&number$1(options.pan.x)?options.pan.x:0,y:plainObject(options.pan)&&number$1(options.pan.y)?options.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:opts(250,options.multiClickDebounceTime)};this.createEmitter();this.selectionType(options.selectionType);this.zoomRange({min:options.minZoom,max:options.maxZoom});_p.styleEnabled&&cy.setStyle([]);container=extend({},
options,options.renderer);cy.initRenderer(container);var setElesAndLayout=function(elements,onload,ondone){cy.notifications(!1);var oldEles=cy.mutableElements();0<oldEles.length&&oldEles.remove();null!=elements&&(plainObject(elements)||array$jscomp$0(elements))&&cy.add(elements);cy.one("layoutready",function(e){cy.notifications(!0);cy.emit(e);cy.one("load",onload);cy.emitAndNotify("load")}).one("layoutstop",function(){cy.one("done",ondone);cy.emit("done")});elements=extend({},cy._private.options.layout);
elements.eles=cy.elements();cy.layout(elements).run()};(function(extData,next){if(extData.some(promise))return Promise$1.all(extData).then(next);next(extData)})([options.style,options.elements],function(thens){var initStyle=thens[0];thens=thens[1];_p.styleEnabled&&cy.style().append(initStyle);setElesAndLayout(thens,function(){cy.startAnimationLoop();_p.ready=!0;if(fn$6(options.ready))cy.on("ready",options.ready);for(var i=0;i<readies.length;i++)cy.on("ready",readies[i]);reg&&(reg.readies=[]);cy.emit("ready")},
options.done)})},corefn=Core.prototype;extend(corefn,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(fn){if(this.isReady())this.emitter().emit("ready",[],fn);else this.on("ready",fn);return this},destroy:function(){if(!this.destroyed())return this.stopAnimationLoop(),this.destroyRenderer(),this.emit("destroy"),this._private.destroyed=!0,this},hasElementWithId:function(id){return this._private.elements.hasElementWithId(id)},
getElementById:function(id){return this._private.elements.getElementById(id)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(eles){this._private.elements.merge(eles);return this},removeFromPool:function(eles){this._private.elements.unmerge(eles);return this},container:function(){return this._private.container||null},window:function(){if(null==
this._private.container)return _window;var ownerDocument=this._private.container.ownerDocument;return void 0===ownerDocument||null==ownerDocument?_window:ownerDocument.defaultView||_window},mount:function(container){if(null!=container){var _p=this._private,options=_p.options;!htmlElement(container)&&htmlElement(container[0])&&(container=container[0]);this.stopAnimationLoop();this.destroyRenderer();_p.container=container;_p.styleEnabled=!0;this.invalidateSize();this.initRenderer(extend({},options,
options.renderer,{name:"null"===options.renderer.name?"canvas":options.renderer.name}));this.startAnimationLoop();this.style(options.style);this.emit("mount");return this}},unmount:function(){this.stopAnimationLoop();this.destroyRenderer();this.initRenderer({name:"null"});this.emit("unmount");return this},options:function(){return copy(this._private.options)},json:function(obj){var cy=this,_p=cy._private,eles=cy.mutableElements();if(plainObject(obj)){cy.startBatch();if(obj.elements){var idInJson=
{},updateEles=function(jsons,gr){for(var toAdd=[],toMod=[],i=0;i<jsons.length;i++){var json=jsons[i];if(json.data.id){var id=""+json.data.id,ele=cy.getElementById(id);idInJson[id]=!0;0!==ele.length?toMod.push({ele,json}):(gr&&(json.group=gr),toAdd.push(json))}else warn("cy.json() cannot handle elements without an ID attribute")}cy.add(toAdd);for(jsons=0;jsons<toMod.length;jsons++)gr=toMod[jsons],gr.ele.json(gr.json)};if(array$jscomp$0(obj.elements))updateEles(obj.elements);else for(var grs=["nodes",
"edges"],i$jscomp$0=0;i$jscomp$0<grs.length;i$jscomp$0++){var gr=grs[i$jscomp$0],elements=obj.elements[gr];array$jscomp$0(elements)&&updateEles(elements,gr)}var parentsToRemove=cy.collection();eles.filter(function(ele){return!idInJson[ele.id()]}).forEach(function(ele){ele.isParent()?parentsToRemove.merge(ele):ele.remove()});parentsToRemove.forEach(function(ele){return ele.children().move({parent:null})});parentsToRemove.forEach(function(ele){return cy.getElementById(ele.id()).remove()})}obj.style&&
cy.style(obj.style);null!=obj.zoom&&obj.zoom!==_p.zoom&&cy.zoom(obj.zoom);obj.pan&&(obj.pan.x!==_p.pan.x||obj.pan.y!==_p.pan.y)&&cy.pan(obj.pan);obj.data&&cy.data(obj.data);_p="minZoom maxZoom zoomingEnabled userZoomingEnabled panningEnabled userPanningEnabled boxSelectionEnabled autolock autoungrabify autounselectify multiClickDebounceTime".split(" ");for(eles=0;eles<_p.length;eles++)if(updateEles=_p[eles],null!=obj[updateEles])cy[updateEles](obj[updateEles]);cy.endBatch();return this}var json$jscomp$0=
{};obj?json$jscomp$0.elements=this.elements().map(function(ele){return ele.json()}):(json$jscomp$0.elements={},eles.forEach(function(ele){var group=ele.group();json$jscomp$0.elements[group]||(json$jscomp$0.elements[group]=[]);json$jscomp$0.elements[group].push(ele.json())}));this._private.styleEnabled&&(json$jscomp$0.style=cy.style().json());json$jscomp$0.data=copy(cy.data());obj=_p.options;json$jscomp$0.zoomingEnabled=_p.zoomingEnabled;json$jscomp$0.userZoomingEnabled=_p.userZoomingEnabled;json$jscomp$0.zoom=
_p.zoom;json$jscomp$0.minZoom=_p.minZoom;json$jscomp$0.maxZoom=_p.maxZoom;json$jscomp$0.panningEnabled=_p.panningEnabled;json$jscomp$0.userPanningEnabled=_p.userPanningEnabled;json$jscomp$0.pan=copy(_p.pan);json$jscomp$0.boxSelectionEnabled=_p.boxSelectionEnabled;json$jscomp$0.renderer=copy(obj.renderer);json$jscomp$0.hideEdgesOnViewport=obj.hideEdgesOnViewport;json$jscomp$0.textureOnViewport=obj.textureOnViewport;json$jscomp$0.wheelSensitivity=obj.wheelSensitivity;json$jscomp$0.motionBlur=obj.motionBlur;
json$jscomp$0.multiClickDebounceTime=obj.multiClickDebounceTime;return json$jscomp$0}});corefn.$id=corefn.getElementById;[{add:function(opts){if(elementOrCollection(opts))if(opts._private.cy===this)opts=opts.restore();else{for(var jsons=[],i=0;i<opts.length;i++)jsons.push(opts[i].json());opts=new Collection(this,jsons)}else if(array$jscomp$0(opts))opts=new Collection(this,opts);else if(plainObject(opts)&&(array$jscomp$0(opts.nodes)||array$jscomp$0(opts.edges))){jsons=[];i=["nodes","edges"];for(var _i=
0,il=i.length;_i<il;_i++){var group=i[_i],elesArray=opts[group];if(array$jscomp$0(elesArray))for(var j=0,jl=elesArray.length;j<jl;j++){var json=extend({group},elesArray[j]);jsons.push(json)}}opts=new Collection(this,jsons)}else opts=(new Element(this,opts)).collection();return opts},remove:function(collection){elementOrCollection(collection)||string$jscomp$0(collection)&&(collection=this.$(collection));return collection.remove()}},corefn$8,elesfn,corefn$7,corefn$6,{notify:function(eventName,eventEles){var _p=
this._private;this.batching()?(_p.batchNotifications=_p.batchNotifications||{},eventName=_p.batchNotifications[eventName]=_p.batchNotifications[eventName]||this.collection(),null!=eventEles&&eventName.merge(eventEles)):_p.notificationsEnabled&&(_p=this.renderer(),!this.destroyed()&&_p&&_p.notify(eventName,eventEles))},notifications:function(bool){var p=this._private;if(void 0===bool)return p.notificationsEnabled;p.notificationsEnabled=bool?!0:!1;return this},noNotifications:function(callback){this.notifications(!1);
callback();this.notifications(!0)},batching:function(){return 0<this._private.batchCount},startBatch:function(){var _p=this._private;null==_p.batchCount&&(_p.batchCount=0);0===_p.batchCount&&(_p.batchStyleEles=this.collection(),_p.batchNotifications={});_p.batchCount++;return this},endBatch:function(){var _p=this._private;if(0===_p.batchCount)return this;_p.batchCount--;if(0===_p.batchCount){_p.batchStyleEles.updateStyle();var renderer=this.renderer();Object.keys(_p.batchNotifications).forEach(function(eventName){var eles=
_p.batchNotifications[eventName];eles.empty()?renderer.notify(eventName):renderer.notify(eventName,eles)})}return this},batch:function(callback){this.startBatch();callback();this.endBatch();return this},batchData:function(map){var cy=this;return this.batch(function(){for(var ids=Object.keys(map),i=0;i<ids.length;i++){var id=ids[i],data=map[id];cy.getElementById(id).data(data)}})}},corefn$4,corefn$3,{style:function(newStyle){newStyle&&this.setStyle(newStyle).update();return this._private.style},setStyle:function(style){var _p=
this._private;"stylesheet"===instanceStr(style)?_p.style=style.generateStyle(this):array$jscomp$0(style)?_p.style=Style.fromJson(this,style):string$jscomp$0(style)?_p.style=Style.fromString(this,style):_p.style=Style(this);return _p.style},updateStyle:function(){this.mutableElements().updateStyle()}},corefn$1,fn].forEach(function(props){extend(corefn,props)});var defaults$7={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,
roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(node,i){return!0},ready:void 0,stop:void 0,transform:function(node,position){return position}},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=function(ele){return ele.scratch("breadthfirst")},setInfo=function(ele,obj){return ele.scratch("breadthfirst",obj)};BreadthFirstLayout.prototype.run=function(){var params=this.options,cy=params.cy,eles$jscomp$0=params.eles,nodes=eles$jscomp$0.nodes().filter(function(n){return!n.isParent()}),
directed=params.directed,maximal=params.acyclic||params.maximal||0<params.maximalAdjustments,bb=makeBoundingBox(params.boundingBox?params.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});if(elementOrCollection(params.roots))var roots=params.roots;else if(array$jscomp$0(params.roots)){for(var rootsArray=[],i$jscomp$0=0;i$jscomp$0<params.roots.length;i$jscomp$0++){var ele$jscomp$0=cy.getElementById(params.roots[i$jscomp$0]);rootsArray.push(ele$jscomp$0)}roots=cy.collection(rootsArray)}else if(string$jscomp$0(params.roots))roots=
cy.$(params.roots);else if(directed)roots=nodes.roots();else{var components=eles$jscomp$0.components();roots=cy.collection();cy=function(_i){_i=components[_i];var maxDegree=_i.maxDegree(!1);_i=_i.filter(function(ele){return ele.degree(!1)===maxDegree});roots=roots.add(_i)};for(rootsArray=0;rootsArray<components.length;rootsArray++)cy(rootsArray)}var depths=[],foundByBfs={},addToDepth=function(ele,d){null==depths[d]&&(depths[d]=[]);var i=depths[d].length;depths[d].push(ele);setInfo(ele,{index:i,depth:d})},
changeDepth=function(ele,newDepth){var _getInfo=getInfo(ele);depths[_getInfo.depth][_getInfo.index]=null;addToDepth(ele,newDepth)};eles$jscomp$0.bfs({roots,directed:params.directed,visit:function(node,edge,pNode,i,depth){node=node[0];edge=node.id();addToDepth(node,depth);foundByBfs[edge]=!0}});cy=[];for(rootsArray=0;rootsArray<nodes.length;rootsArray++)i$jscomp$0=nodes[rootsArray],foundByBfs[i$jscomp$0.id()]||cy.push(i$jscomp$0);var assignDepthsAt=function(i){for(var eles=depths[i],j=0;j<eles.length;j++){var _ele2=
eles[j];null==_ele2?(eles.splice(j,1),j--):setInfo(_ele2,{depth:i,index:j})}};rootsArray=function(){for(var _i3=0;_i3<depths.length;_i3++)assignDepthsAt(_i3)};i$jscomp$0=function(ele,shifted){for(var eInfo=getInfo(ele),incomers=ele.incomers().filter(function(el){return el.isNode()&&eles$jscomp$0.has(el)}),maxDepth=-1,id=ele.id(),k=0;k<incomers.length;k++){var iInfo=getInfo(incomers[k]);maxDepth=Math.max(maxDepth,iInfo.depth)}if(eInfo.depth<=maxDepth){if(!params.acyclic&&shifted[id])return null;eInfo=
maxDepth+1;changeDepth(ele,eInfo);shifted[id]=eInfo;return!0}return!1};if(directed&&maximal){var Q=[];directed={};maximal=function(n){return Q.push(n)};for(nodes.forEach(function(n){return Q.push(n)});0<Q.length;){ele$jscomp$0=Q.shift();var didShift=i$jscomp$0(ele$jscomp$0,directed);if(didShift)ele$jscomp$0.outgoers().filter(function(el){return el.isNode()&&eles$jscomp$0.has(el)}).forEach(maximal);else if(null===didShift){warn("Detected double maximal shift for node `"+ele$jscomp$0.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");
break}}}rootsArray();var minDistance=0;if(params.avoidOverlap)for(directed=0;directed<nodes.length;directed++)maximal=nodes[directed].layoutDimensions(params),minDistance=Math.max(minDistance,maximal.w,maximal.h);var cachedWeightedPercent={},getWeightedPercent=function(ele){if(cachedWeightedPercent[ele.id()])return cachedWeightedPercent[ele.id()];for(var eleDepth=getInfo(ele).depth,neighbors=ele.neighborhood(),percent=0,samples=0,_i5=0;_i5<neighbors.length;_i5++){var neighbor=neighbors[_i5];if(!neighbor.isEdge()&&
!neighbor.isParent()&&nodes.has(neighbor)){var bf=getInfo(neighbor);if(null!=bf&&(neighbor=bf.index,bf=bf.depth,null!=neighbor&&null!=bf)){var nDepth=depths[bf].length;bf<eleDepth&&(percent+=neighbor/nDepth,samples++)}}}samples=Math.max(1,samples);percent/=samples;0===samples&&(percent=0);return cachedWeightedPercent[ele.id()]=percent};directed=function(a,b){var apct=getWeightedPercent(a),bpct=getWeightedPercent(b);apct-=bpct;0===apct?(a=a.id(),b=b.id(),b=a<b?-1:a>b?1:0):b=apct;return b};void 0!==
params.depthSort&&(directed=params.depthSort);for(maximal=0;maximal<depths.length;maximal++)depths[maximal].sort(directed),assignDepthsAt(maximal);directed=[];for(maximal=0;maximal<cy.length;maximal++)directed.push(cy[maximal]);depths.unshift(directed);rootsArray();for(cy=0;cy<depths.length;cy++);var JSCompiler_object_inline_x_649=bb.x1+bb.w/2,JSCompiler_object_inline_y_650=bb.x1+bb.h/2,maxDepthSize=depths.reduce(function(max,eles){return Math.max(max,eles.length)},0);eles$jscomp$0.nodes().layoutPositions(this,
params,function(ele){var _getInfo2=getInfo(ele);ele=_getInfo2.depth;_getInfo2=_getInfo2.index;var depthSize=depths[ele].length,distanceX=Math.max(bb.w/((params.grid?maxDepthSize:depthSize)+1),minDistance),distanceY=Math.max(bb.h/(depths.length+1),minDistance),radiusStepSize=Math.min(bb.w/2/depths.length,bb.h/2/depths.length);radiusStepSize=Math.max(radiusStepSize,minDistance);return params.circle?(depthSize=radiusStepSize*ele+radiusStepSize-(0<depths.length&&3>=depths[0].length?radiusStepSize/2:0),
_getInfo2*=2*Math.PI/depths[ele].length,0===ele&&1===depths[0].length&&(depthSize=1),{x:JSCompiler_object_inline_x_649+depthSize*Math.cos(_getInfo2),y:JSCompiler_object_inline_y_650+depthSize*Math.sin(_getInfo2)}):{x:JSCompiler_object_inline_x_649+(_getInfo2+1-(depthSize+1)/2)*distanceX,y:(ele+1)*distanceY}});return this};var defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,
sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(node,i){return!0},ready:void 0,stop:void 0,transform:function(node,position){return position}};CircleLayout.prototype.run=function(){var params=this.options,cy=params.cy,eles=params.eles,clockwise=void 0!==params.counterclockwise?!params.counterclockwise:params.clockwise,nodes=eles.nodes().not(":parent");params.sort&&(nodes=nodes.sort(params.sort));for(var bb=makeBoundingBox(params.boundingBox?params.boundingBox:
{x1:0,y1:0,w:cy.width(),h:cy.height()}),JSCompiler_object_inline_x_651=bb.x1+bb.w/2,JSCompiler_object_inline_y_652=bb.y1+bb.h/2,dTheta=(void 0===params.sweep?2*Math.PI-2*Math.PI/nodes.length:params.sweep)/Math.max(1,nodes.length-1),r,i$jscomp$0=cy=0;i$jscomp$0<nodes.length;i$jscomp$0++){var nbb=nodes[i$jscomp$0].layoutDimensions(params);cy=Math.max(cy,nbb.w,nbb.h)}r=number$1(params.radius)?params.radius:1>=nodes.length?0:Math.min(bb.h,bb.w)/2-cy;1<nodes.length&&params.avoidOverlap&&(cy*=1.75,nodes=
Math.cos(dTheta)-Math.cos(0),bb=Math.sin(dTheta)-Math.sin(0),r=Math.max(Math.sqrt(cy*cy/(nodes*nodes+bb*bb)),r));eles.nodes().layoutPositions(this,params,function(ele,i){ele=params.startAngle+i*dTheta*(clockwise?1:-1);return{x:JSCompiler_object_inline_x_651+r*Math.cos(ele),y:JSCompiler_object_inline_y_652+r*Math.sin(ele)}});return this};var defaults$5={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,
height:void 0,width:void 0,spacingFactor:void 0,concentric:function(node){return node.degree()},levelWidth:function(nodes){return nodes.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(node,i){return!0},ready:void 0,stop:void 0,transform:function(node,position){return position}};ConcentricLayout.prototype.run=function(){var params=this.options,clockwise=void 0!==params.counterclockwise?!params.counterclockwise:params.clockwise,cy=params.cy,eles=params.eles,
nodes=eles.nodes().not(":parent"),bb=makeBoundingBox(params.boundingBox?params.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});cy=bb.x1+bb.w/2;for(var JSCompiler_object_inline_y_654=bb.y1+bb.h/2,nodeValues=[],maxNodeSize=0,i=0;i<nodes.length;i++){var node=nodes[i],value=void 0;value=params.concentric(node);nodeValues.push({value,node});node._private.scratch.concentric=value}nodes.updateStyle();for(i=0;i<nodes.length;i++)node=nodes[i].layoutDimensions(params),maxNodeSize=Math.max(maxNodeSize,node.w,
node.h);nodeValues.sort(function(a,b){return b.value-a.value});i=params.levelWidth(nodes);nodes=[[]];node=nodes[0];for(value=0;value<nodeValues.length;value++){var val=nodeValues[value];0<node.length&&Math.abs(node[0].value-val.value)>=i&&(node=[],nodes.push(node));node.push(val)}nodeValues=maxNodeSize+params.minNodeSpacing;params.avoidOverlap||(nodeValues=Math.min(nodeValues,(Math.min(bb.w,bb.h)/2-nodeValues)/(nodes.length+(0<nodes.length&&1<nodes[0].length)?1:0)));for(maxNodeSize=bb=0;maxNodeSize<
nodes.length;maxNodeSize++)i=nodes[maxNodeSize],value=i.dTheta=(void 0===params.sweep?2*Math.PI-2*Math.PI/i.length:params.sweep)/Math.max(1,i.length-1),1<i.length&&params.avoidOverlap&&(node=Math.cos(value)-Math.cos(0),value=Math.sin(value)-Math.sin(0),bb=Math.max(Math.sqrt(nodeValues*nodeValues/(node*node+value*value)),bb)),i.r=bb,bb+=nodeValues;if(params.equidistant){for(maxNodeSize=nodeValues=bb=0;maxNodeSize<nodes.length;maxNodeSize++)bb=Math.max(bb,nodes[maxNodeSize].r-nodeValues);for(maxNodeSize=
nodeValues=0;maxNodeSize<nodes.length;maxNodeSize++)i=nodes[maxNodeSize],0===maxNodeSize&&(nodeValues=i.r),i.r=nodeValues,nodeValues+=bb}var pos={};for(bb=0;bb<nodes.length;bb++)for(nodeValues=nodes[bb],maxNodeSize=nodeValues.dTheta,i=nodeValues.r,node=0;node<nodeValues.length;node++)value=params.startAngle+(clockwise?1:-1)*maxNodeSize*node,value={x:cy+i*Math.cos(value),y:JSCompiler_object_inline_y_654+i*Math.sin(value)},pos[nodeValues[node].node.id()]=value;eles.nodes().layoutPositions(this,params,
function(ele){ele=ele.id();return pos[ele]});return this};var DEBUG,defaults$4={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(node,i){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(node){return 2048},nodeOverlap:4,idealEdgeLength:function(edge){return 32},edgeElasticity:function(edge){return 32},nestingFactor:1.2,
gravity:1,numIter:1E3,initialTemp:1E3,coolingFactor:.99,minTemp:1};CoseLayout.prototype.run=function(){var options$jscomp$0=this.options,cy=options$jscomp$0.cy,layout=this;layout.stopped=!1;!0!==options$jscomp$0.animate&&!1!==options$jscomp$0.animate||layout.emit({type:"layoutstart",layout});DEBUG=!0===options$jscomp$0.debug?!0:!1;var layoutInfo=createLayoutInfo(cy,layout,options$jscomp$0);DEBUG&&printLayoutInfo(layoutInfo);options$jscomp$0.randomize&&randomizePositions(layoutInfo);var startTime=
pnow(),refresh=function(){refreshPositions(layoutInfo,cy,options$jscomp$0);!0===options$jscomp$0.fit&&cy.fit(options$jscomp$0.padding)},mainLoop=function(i){if(layout.stopped||i>=options$jscomp$0.numIter)return!1;for(i=0;i<layoutInfo.graphSet.length;i++)for(var graph=layoutInfo.graphSet[i],numNodes=graph.length,j=0;j<numNodes;j++)for(var node1=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[j]]],k=j+1;k<numNodes;k++){var node1$jscomp$0=node1,node2=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[k]]],
options=options$jscomp$0;if(node1$jscomp$0.cmptId===node2.cmptId||layoutInfo.isCompound){var directionX=node2.positionX-node1$jscomp$0.positionX,directionY=node2.positionY-node1$jscomp$0.positionY;0===directionX&&0===directionY&&(directionX=-1+2*Math.random(),directionY=-1+2*Math.random());var overlap=0<directionX?node1$jscomp$0.maxX-node2.minX:node2.maxX-node1$jscomp$0.minX;var overlapY=0<directionY?node1$jscomp$0.maxY-node2.minY:node2.maxY-node1$jscomp$0.minY;overlap=0<=overlap&&0<=overlapY?Math.sqrt(overlap*
overlap+overlapY*overlapY):0;0<overlap?(overlap*=options.nodeOverlap,options=Math.sqrt(directionX*directionX+directionY*directionY),directionX=overlap*directionX/options,directionY=overlap*directionY/options):(options=findClippingPoint(node1$jscomp$0,directionX,directionY),directionX=findClippingPoint(node2,-1*directionX,-1*directionY),directionY=directionX.x-options.x,overlapY=directionX.y-options.y,directionX=directionY*directionY+overlapY*overlapY,options=Math.sqrt(directionX),overlap=(node1$jscomp$0.nodeRepulsion+
node2.nodeRepulsion)/directionX,directionX=overlap*directionY/options,directionY=overlap*overlapY/options);node1$jscomp$0.isLocked||(node1$jscomp$0.offsetX-=directionX,node1$jscomp$0.offsetY-=directionY);node2.isLocked||(node2.offsetX+=directionX,node2.offsetY+=directionY)}}for(i=0;i<layoutInfo.edgeSize;i++)if(j=layoutInfo.layoutEdges[i],graph=layoutInfo.layoutNodes[layoutInfo.idToIndex[j.sourceId]],numNodes=layoutInfo.layoutNodes[layoutInfo.idToIndex[j.targetId]],node1=numNodes.positionX-graph.positionX,
node1$jscomp$0=numNodes.positionY-graph.positionY,0!==node1||0!==node1$jscomp$0)k=findClippingPoint(graph,node1,node1$jscomp$0),node1$jscomp$0=findClippingPoint(numNodes,-1*node1,-1*node1$jscomp$0),node1=node1$jscomp$0.x-k.x,k=node1$jscomp$0.y-k.y,node1$jscomp$0=Math.sqrt(node1*node1+k*k),j=Math.pow(j.idealLength-node1$jscomp$0,2)/j.elasticity,0!==node1$jscomp$0?(node1=j*node1/node1$jscomp$0,j=j*k/node1$jscomp$0):j=node1=0,graph.isLocked||(graph.offsetX+=node1,graph.offsetY+=j),numNodes.isLocked||
(numNodes.offsetX-=node1,numNodes.offsetY-=j);if(0!==options$jscomp$0.gravity)for(i=0;i<layoutInfo.graphSet.length;i++)for(graph=layoutInfo.graphSet[i],numNodes=graph.length,0===i?(j=layoutInfo.clientHeight/2,node1=layoutInfo.clientWidth/2):(node1=layoutInfo.layoutNodes[layoutInfo.idToIndex[layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[0]]].parentId]],j=node1.positionX,node1=node1.positionY),k=0;k<numNodes;k++)node1$jscomp$0=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[k]]],node1$jscomp$0.isLocked||
(node2=j-node1$jscomp$0.positionX,directionX=node1-node1$jscomp$0.positionY,directionY=Math.sqrt(node2*node2+directionX*directionX),1<directionY&&(directionX=options$jscomp$0.gravity*directionX/directionY,node1$jscomp$0.offsetX+=options$jscomp$0.gravity*node2/directionY,node1$jscomp$0.offsetY+=directionX));i=[];graph=0;numNodes=-1;i.push.apply(i,layoutInfo.graphSet[0]);for(numNodes+=layoutInfo.graphSet[0].length;graph<=numNodes;)if(j=i[graph++],j=layoutInfo.layoutNodes[layoutInfo.idToIndex[j]],node1=
j.children,0<node1.length&&!j.isLocked){k=j.offsetX;node1$jscomp$0=j.offsetY;for(node2=0;node2<node1.length;node2++)directionY=layoutInfo.layoutNodes[layoutInfo.idToIndex[node1[node2]]],directionY.offsetX+=k,directionY.offsetY+=node1$jscomp$0,i[++numNodes]=node1[node2];j.offsetX=0;j.offsetY=0}for(i=0;i<layoutInfo.nodeSize;i++)graph=layoutInfo.layoutNodes[i],0<graph.children.length&&(graph.maxX=void 0,graph.minX=void 0,graph.maxY=void 0,graph.minY=void 0);for(i=0;i<layoutInfo.nodeSize;i++)graph=layoutInfo.layoutNodes[i],
0<graph.children.length||graph.isLocked||(numNodes=graph.offsetX,j=graph.offsetY,node1=layoutInfo.temperature,k=Math.sqrt(numNodes*numNodes+j*j),numNodes=k>node1?{x:node1*numNodes/k,y:node1*j/k}:{x:numNodes,y:j},graph.positionX+=numNodes.x,graph.positionY+=numNodes.y,graph.offsetX=0,graph.offsetY=0,graph.minX=graph.positionX-graph.width,graph.maxX=graph.positionX+graph.width,graph.minY=graph.positionY-graph.height,graph.maxY=graph.positionY+graph.height,updateAncestryBoundaries(graph,layoutInfo));
for(i=0;i<layoutInfo.nodeSize;i++)graph=layoutInfo.layoutNodes[i],0<graph.children.length&&!graph.isLocked&&(graph.positionX=(graph.maxX+graph.minX)/2,graph.positionY=(graph.maxY+graph.minY)/2,graph.width=graph.maxX-graph.minX,graph.height=graph.maxY-graph.minY);layoutInfo.temperature*=options$jscomp$0.coolingFactor;return layoutInfo.temperature<options$jscomp$0.minTemp?!1:!0},done=function(){if(!0===options$jscomp$0.animate||!1===options$jscomp$0.animate)refresh(),layout.one("layoutstop",options$jscomp$0.stop),
layout.emit({type:"layoutstop",layout});else{var nodes=options$jscomp$0.eles.nodes(),getScaledPos=getScaleInBoundsFn(layoutInfo,options$jscomp$0,nodes);nodes.layoutPositions(layout,options$jscomp$0,getScaledPos)}},i$jscomp$0=0,loopRet=!0;if(!0===options$jscomp$0.animate)(function frame(){for(var f=0;loopRet&&f<options$jscomp$0.refresh;)loopRet=mainLoop(i$jscomp$0),i$jscomp$0++,f++;loopRet?(pnow()-startTime>=options$jscomp$0.animationThreshold&&refresh(),raf(frame)):(separateComponents(layoutInfo,
options$jscomp$0),done())})();else{for(;loopRet;)loopRet=mainLoop(i$jscomp$0),i$jscomp$0++;separateComponents(layoutInfo,options$jscomp$0);done()}return this};CoseLayout.prototype.stop=function(){this.stopped=!0;this.thread&&this.thread.stop();this.emit("layoutstop");return this};CoseLayout.prototype.destroy=function(){this.thread&&this.thread.stop();return this};var createLayoutInfo=function(cy,layout,options){layout=options.eles.edges();var nodes=options.eles.nodes(),bb=makeBoundingBox(options.boundingBox?
options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});cy={isCompound:cy.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:nodes.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:layout.size(),temperature:options.initialTemp,clientWidth:bb.w,clientHeight:bb.h,boundingBox:bb};var components=options.eles.components(),id2cmptId={};for(bb=0;bb<components.length;bb++)for(var component=components[bb],j=0;j<component.length;j++){var node=component[j];id2cmptId[node.id()]=bb}for(bb=0;bb<
cy.nodeSize;bb++)j=nodes[bb],components=j.layoutDimensions(options),node={},node.isLocked=j.locked(),node.id=j.data("id"),node.parentId=j.data("parent"),node.cmptId=id2cmptId[j.id()],node.children=[],node.positionX=j.position("x"),node.positionY=j.position("y"),node.offsetX=0,node.offsetY=0,node.height=components.w,node.width=components.h,node.maxX=node.positionX+node.width/2,node.minX=node.positionX-node.width/2,node.maxY=node.positionY+node.height/2,node.minY=node.positionY-node.height/2,node.padLeft=
parseFloat(j.style("padding")),node.padRight=parseFloat(j.style("padding")),node.padTop=parseFloat(j.style("padding")),node.padBottom=parseFloat(j.style("padding")),node.nodeRepulsion=fn$6(options.nodeRepulsion)?options.nodeRepulsion(j):options.nodeRepulsion,cy.layoutNodes.push(node),cy.idToIndex[node.id]=bb;nodes=[];id2cmptId=0;components=-1;node=[];for(bb=0;bb<cy.nodeSize;bb++)j=cy.layoutNodes[bb],component=j.parentId,null!=component?cy.layoutNodes[cy.idToIndex[component]].children.push(j.id):(nodes[++components]=
j.id,node.push(j.id));for(cy.graphSet.push(node);id2cmptId<=components;)if(bb=nodes[id2cmptId++],node=cy.layoutNodes[cy.idToIndex[bb]],node=node.children,0<node.length)for(cy.graphSet.push(node),bb=0;bb<node.length;bb++)nodes[++components]=node[bb];for(bb=0;bb<cy.graphSet.length;bb++)for(nodes=cy.graphSet[bb],j=0;j<nodes.length;j++)cy.indexToGraph[cy.idToIndex[nodes[j]]]=bb;for(bb=0;bb<cy.edgeSize;bb++){node=layout[bb];nodes={};nodes.id=node.data("id");nodes.sourceId=node.data("source");nodes.targetId=
node.data("target");j=fn$6(options.idealEdgeLength)?options.idealEdgeLength(node):options.idealEdgeLength;id2cmptId=fn$6(options.edgeElasticity)?options.edgeElasticity(node):options.edgeElasticity;node=cy.idToIndex[nodes.sourceId];components=cy.idToIndex[nodes.targetId];if(cy.indexToGraph[node]!=cy.indexToGraph[components]){component=findLCA_aux(nodes.sourceId,nodes.targetId,0,cy);component=2>component.count?0:component.graph;component=cy.graphSet[component];var depth=0;for(node=cy.layoutNodes[node];-1===
component.indexOf(node.id);)node=cy.layoutNodes[cy.idToIndex[node.parentId]],depth++;for(node=cy.layoutNodes[components];-1===component.indexOf(node.id);)node=cy.layoutNodes[cy.idToIndex[node.parentId]],depth++;j*=depth*options.nestingFactor}nodes.idealLength=j;nodes.elasticity=id2cmptId;cy.layoutEdges.push(nodes)}return cy},findLCA_aux=function findLCA_aux(node1,node2,graphIx,layoutInfo){var graph=layoutInfo.graphSet[graphIx];if(-1<graph.indexOf(node1)&&-1<graph.indexOf(node2))return{count:2,graph:graphIx};
for(var c=0,i=0;i<graph.length;i++){var children=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[i]]].children;if(0!==children.length&&(children=findLCA_aux(node1,node2,layoutInfo.indexToGraph[layoutInfo.idToIndex[children[0]]],layoutInfo),0!==children.count))if(1===children.count){if(c++,2===c)break}else return children}return{count:c,graph:graphIx}},printLayoutInfo,randomizePositions=function(layoutInfo,cy){cy=layoutInfo.clientWidth;for(var height=layoutInfo.clientHeight,i=0;i<layoutInfo.nodeSize;i++){var n=
layoutInfo.layoutNodes[i];0!==n.children.length||n.isLocked||(n.positionX=Math.random()*cy,n.positionY=Math.random()*height)}},getScaleInBoundsFn=function(layoutInfo,options,nodes){var bb=layoutInfo.boundingBox,JSCompiler_object_inline_x1_655=Infinity,JSCompiler_object_inline_x2_656=-Infinity,JSCompiler_object_inline_y1_657=Infinity,JSCompiler_object_inline_y2_658=-Infinity;if(options.boundingBox){nodes.forEach(function(node){node=layoutInfo.layoutNodes[layoutInfo.idToIndex[node.data("id")]];JSCompiler_object_inline_x1_655=
Math.min(JSCompiler_object_inline_x1_655,node.positionX);JSCompiler_object_inline_x2_656=Math.max(JSCompiler_object_inline_x2_656,node.positionX);JSCompiler_object_inline_y1_657=Math.min(JSCompiler_object_inline_y1_657,node.positionY);JSCompiler_object_inline_y2_658=Math.max(JSCompiler_object_inline_y2_658,node.positionY)});var JSCompiler_object_inline_w_659=JSCompiler_object_inline_x2_656-JSCompiler_object_inline_x1_655;var JSCompiler_object_inline_h_660=JSCompiler_object_inline_y2_658-JSCompiler_object_inline_y1_657}return function(ele,
i){ele=layoutInfo.layoutNodes[layoutInfo.idToIndex[ele.data("id")]];return options.boundingBox?{x:bb.x1+(ele.positionX-JSCompiler_object_inline_x1_655)/JSCompiler_object_inline_w_659*bb.w,y:bb.y1+(ele.positionY-JSCompiler_object_inline_y1_657)/JSCompiler_object_inline_h_660*bb.h}:{x:ele.positionX,y:ele.positionY}}},refreshPositions=function(layoutInfo,cy,options){cy=options.layout;var nodes=options.eles.nodes(),getScaledPos=getScaleInBoundsFn(layoutInfo,options,nodes);nodes.positions(getScaledPos);
!0!==layoutInfo.ready&&(layoutInfo.ready=!0,cy.one("layoutready",options.ready),cy.emit({type:"layoutready",layout:this}))},findClippingPoint=function(node,dX,dY){var X=node.positionX,Y=node.positionY,H=node.height||1;node=node.width||1;var dirSlope=dY/dX,nodeSlope=H/node,res={};if(0===dX&&0<dY||0===dX&&0>dY)return res.x=X,res.y=Y+H/2,res;if(0<dX&&-1*nodeSlope<=dirSlope&&dirSlope<=nodeSlope)return res.x=X+node/2,res.y=Y+node*dY/2/dX,res;if(0>dX&&-1*nodeSlope<=dirSlope&&dirSlope<=nodeSlope)return res.x=
X-node/2,res.y=Y-node*dY/2/dX,res;if(0<dY&&(dirSlope<=-1*nodeSlope||dirSlope>=nodeSlope))return res.x=X+H*dX/2/dY,res.y=Y+H/2,res;0>dY&&(dirSlope<=-1*nodeSlope||dirSlope>=nodeSlope)&&(res.x=X-H*dX/2/dY,res.y=Y-H/2);return res},updateAncestryBoundaries=function updateAncestryBoundaries(node,layoutInfo){var parentId=node.parentId;if(null!=parentId){parentId=layoutInfo.layoutNodes[layoutInfo.idToIndex[parentId]];var flag=!1;if(null==parentId.maxX||node.maxX+parentId.padRight>parentId.maxX)parentId.maxX=
node.maxX+parentId.padRight,flag=!0;if(null==parentId.minX||node.minX-parentId.padLeft<parentId.minX)parentId.minX=node.minX-parentId.padLeft,flag=!0;if(null==parentId.maxY||node.maxY+parentId.padBottom>parentId.maxY)parentId.maxY=node.maxY+parentId.padBottom,flag=!0;if(null==parentId.minY||node.minY-parentId.padTop<parentId.minY)parentId.minY=node.minY-parentId.padTop,flag=!0;if(flag)return updateAncestryBoundaries(parentId,layoutInfo)}},separateComponents=function(layoutInfo,options){for(var nodes=
layoutInfo.layoutNodes,components=[],i=0;i<nodes.length;i++){var node=nodes[i],cid=node.cmptId;(components[cid]=components[cid]||[]).push(node)}var totalA=0;for(i=0;i<components.length;i++)if(nodes=components[i]){nodes.x1=Infinity;nodes.x2=-Infinity;nodes.y1=Infinity;nodes.y2=-Infinity;for(node=0;node<nodes.length;node++)cid=nodes[node],nodes.x1=Math.min(nodes.x1,cid.positionX-cid.width/2),nodes.x2=Math.max(nodes.x2,cid.positionX+cid.width/2),nodes.y1=Math.min(nodes.y1,cid.positionY-cid.height/2),
nodes.y2=Math.max(nodes.y2,cid.positionY+cid.height/2);nodes.w=nodes.x2-nodes.x1;nodes.h=nodes.y2-nodes.y1;totalA+=nodes.w*nodes.h}components.sort(function(c1,c2){return c2.w*c2.h-c1.w*c1.h});var x=0,y=0,usedW=0,rowH=0;layoutInfo=Math.sqrt(totalA)*layoutInfo.clientWidth/layoutInfo.clientHeight;for(i=0;i<components.length;i++)if(nodes=components[i]){for(node=0;node<nodes.length;node++)cid=nodes[node],cid.isLocked||(cid.positionX+=x-nodes.x1,cid.positionY+=y-nodes.y1);x+=nodes.w+options.componentSpacing;
usedW+=nodes.w+options.componentSpacing;rowH=Math.max(rowH,nodes.h);usedW>layoutInfo&&(y+=rowH+options.componentSpacing,rowH=usedW=x=0)}},defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(node){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(node,i){return!0},ready:void 0,stop:void 0,transform:function(node,position){return position}};
GridLayout.prototype.run=function(){var params=this.options,cy=params.cy,eles=params.eles,nodes=eles.nodes().not(":parent");params.sort&&(nodes=nodes.sort(params.sort));var bb=makeBoundingBox(params.boundingBox?params.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});if(0===bb.h||0===bb.w)eles.nodes().layoutPositions(this,params,function(ele){return{x:bb.x1,y:bb.y1}});else{cy=nodes.size();eles=Math.sqrt(cy*bb.h/bb.w);var rows=Math.round(eles),cols=Math.round(bb.w/bb.h*eles);eles=function(val){if(null==
val)return Math.min(rows,cols);Math.min(rows,cols)==rows?rows=val:cols=val};var large=function(val){if(null==val)return Math.max(rows,cols);Math.max(rows,cols)==rows?rows=val:cols=val},oRows=params.rows,oCols=null!=params.cols?params.cols:params.columns;if(null!=oRows&&null!=oCols)rows=oRows,cols=oCols;else if(null!=oRows&&null==oCols)rows=oRows,cols=Math.ceil(cy/rows);else if(null==oRows&&null!=oCols)cols=oCols,rows=Math.ceil(cy/cols);else if(cols*rows>cy)oRows=eles(),oCols=large(),(oRows-1)*oCols>=
cy?eles(oRows-1):(oCols-1)*oRows>=cy&&large(oCols-1);else for(;cols*rows<cy;)oRows=eles(),oCols=large(),(oCols+1)*oRows>=cy?large(oCols+1):eles(oRows+1);var cellWidth=bb.w/cols,cellHeight=bb.h/rows;params.condense&&(cellHeight=cellWidth=0);if(params.avoidOverlap)for(cy=0;cy<nodes.length;cy++){eles=nodes[cy];large=eles._private.position;if(null==large.x||null==large.y)large.x=0,large.y=0;eles=eles.layoutDimensions(params);large=params.avoidOverlapPadding;oRows=eles.h+large;cellWidth=Math.max(cellWidth,
eles.w+large);cellHeight=Math.max(cellHeight,oRows)}var cellUsed={},row=0,col=0,moveToNextCell=function(){col++;col>=cols&&(col=0,row++)},id2manPos={};for(cy=0;cy<nodes.length;cy++)if(eles=nodes[cy],(large=params.position(eles))&&(void 0!==large.row||void 0!==large.col)){large={row:large.row,col:large.col};if(void 0===large.col)for(large.col=0;cellUsed["c-"+large.row+"-"+large.col];)large.col++;else if(void 0===large.row)for(large.row=0;cellUsed["c-"+large.row+"-"+large.col];)large.row++;id2manPos[eles.id()]=
large;cellUsed["c-"+large.row+"-"+large.col]=!0}nodes.layoutPositions(this,params,function(element,i){if(element.locked()||element.isParent())return!1;if(i=id2manPos[element.id()])element=i.col*cellWidth+cellWidth/2+bb.x1,i=i.row*cellHeight+cellHeight/2+bb.y1;else{for(;cellUsed["c-"+row+"-"+col];)moveToNextCell();element=col*cellWidth+cellWidth/2+bb.x1;i=row*cellHeight+cellHeight/2+bb.y1;cellUsed["c-"+row+"-"+col]=!0;moveToNextCell()}return{x:element,y:i}})}return this};var defaults$2={ready:function(){},
stop:function(){}};NullLayout.prototype.run=function(){var options=this.options,eles=options.eles;options.cy;this.emit("layoutstart");eles.nodes().positions(function(){return{x:0,y:0}});this.one("layoutready",options.ready);this.emit("layoutready");this.one("layoutstop",options.stop);this.emit("layoutstop");return this};NullLayout.prototype.stop=function(){return this};var defaults$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,
animateFilter:function(node,i){return!0},ready:void 0,stop:void 0,transform:function(node,position){return position}};PresetLayout.prototype.run=function(){var options=this.options,nodes=options.eles.nodes(),posIsFn=fn$6(options.positions);nodes.layoutPositions(this,options,function(node,i){null==options.positions?(i=node.position(),i={x:i.x,y:i.y}):posIsFn?i=options.positions(node):(i=options.positions[node._private.data.id],i=null==i?null:i);return node.locked()||null==i?!1:i});return this};var defaults=
{fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(node,i){return!0},ready:void 0,stop:void 0,transform:function(node,position){return position}};RandomLayout.prototype.run=function(){var options=this.options,cy=options.cy,eles=options.eles,bb=makeBoundingBox(options.boundingBox?options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});eles.nodes().layoutPositions(this,options,function(node,i){return{x:bb.x1+Math.round(Math.random()*
bb.w),y:bb.y1+Math.round(Math.random()*bb.h)}});return this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}],noop=function(){},throwImgErr=function(){throw Error("A headless instance can not render images");};NullRenderer.prototype={recalculateRenderedStyle:noop,
notify:function(){this.notifications++},init:noop,isHeadless:function(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp$d={calculateArrowAngles:function(edge){edge=edge._private.rscratch;var isHaystack="haystack"===edge.edgeType,isBezier="bezier"===edge.edgeType,isMultibezier="multibezier"===edge.edgeType,isSegments="segments"===edge.edgeType,isCompound="compound"===edge.edgeType,isSelf="self"===edge.edgeType;if(isHaystack){var startX=edge.haystackPts[0];var startY=edge.haystackPts[1];var endX=
edge.haystackPts[2];var endY=edge.haystackPts[3]}else startX=edge.arrowStartX,startY=edge.arrowStartY,endX=edge.arrowEndX,endY=edge.arrowEndY;var midX=edge.midX;var midY=edge.midY;if(isSegments){var dispX=startX-edge.segpts[0];var dispY=startY-edge.segpts[1]}else if(isMultibezier||isCompound||isSelf||isBezier){var pts=edge.allpts;midX=qbezierAt(pts[0],pts[2],pts[4],.1);pts=qbezierAt(pts[1],pts[3],pts[5],.1);dispX=startX-midX;dispY=startY-pts}else dispX=startX-midX,dispY=startY-midY;edge.srcArrowAngle=
Math.atan2(dispY,dispX)-Math.PI/2;midX=edge.midX;midY=edge.midY;isHaystack&&(midX=(startX+endX)/2,midY=(startY+endY)/2);dispX=endX-startX;dispY=endY-startY;if(isSegments)pts=edge.allpts,0===pts.length/2%2?(isHaystack=pts.length/2,startX=isHaystack-2):(isHaystack=pts.length/2-1,startX=isHaystack-2),dispX=pts[isHaystack]-pts[startX],dispY=pts[isHaystack+1]-pts[startX+1];else if(isMultibezier||isCompound||isSelf){pts=edge.allpts;if(0===edge.ctrlpts.length/2%2){startY=pts.length/2-1;dispY=startY+2;var p1=
dispY+2;dispX=qbezierAt(pts[startY],pts[dispY],pts[p1],0);isHaystack=qbezierAt(pts[startY+1],pts[dispY+1],pts[p1+1],0);startX=qbezierAt(pts[startY],pts[dispY],pts[p1],1E-4);pts=qbezierAt(pts[startY+1],pts[dispY+1],pts[p1+1],1E-4)}else dispY=pts.length/2-1,startY=dispY-2,p1=dispY+2,dispX=qbezierAt(pts[startY],pts[dispY],pts[p1],.4999),isHaystack=qbezierAt(pts[startY+1],pts[dispY+1],pts[p1+1],.4999),startX=qbezierAt(pts[startY],pts[dispY],pts[p1],.5),pts=qbezierAt(pts[startY+1],pts[dispY+1],pts[p1+
1],.5);dispX=startX-dispX;dispY=pts-isHaystack}edge.midtgtArrowAngle=Math.atan2(dispY,dispX)-Math.PI/2;edge.midDispX=dispX;edge.midDispY=dispY;dispX*=-1;dispY*=-1;isSegments&&(pts=edge.allpts,0!==pts.length/2%2&&(isHaystack=pts.length/2-1,startX=isHaystack+2,dispX=-(pts[startX]-pts[isHaystack]),dispY=-(pts[startX+1]-pts[isHaystack+1])));edge.midsrcArrowAngle=Math.atan2(dispY,dispX)-Math.PI/2;isSegments?(dispX=endX-edge.segpts[edge.segpts.length-2],dispY=endY-edge.segpts[edge.segpts.length-1]):isMultibezier||
isCompound||isSelf||isBezier?(pts=edge.allpts,isBezier=pts.length,midX=qbezierAt(pts[isBezier-6],pts[isBezier-4],pts[isBezier-2],.9),pts=qbezierAt(pts[isBezier-5],pts[isBezier-3],pts[isBezier-1],.9),dispX=endX-midX,dispY=endY-pts):(dispX=endX-midX,dispY=endY-midY);edge.tgtArrowAngle=Math.atan2(dispY,dispX)-Math.PI/2}};BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(edgeWidth,scale){var cache=this.arrowWidthCache=this.arrowWidthCache||{},cachedVal=cache[edgeWidth+", "+scale];if(cachedVal)return cachedVal;
cachedVal=Math.max(Math.pow(13.37*edgeWidth,.9),29)*scale;return cache[edgeWidth+", "+scale]=cachedVal};var BRp$9={recalculateNodeLabelProjection:function(node){var content=node.pstyle("label").strValue;if(!emptyString(content)){var _p=node._private;var textX=node.width();var textY=node.height();var padding=node.padding(),nodePos=node.position(),textHalign=node.pstyle("text-halign").strValue,textValign=node.pstyle("text-valign").strValue;content=_p.rscratch;_p=_p.rstyle;switch(textHalign){case "left":textX=
nodePos.x-textX/2-padding;break;case "right":textX=nodePos.x+textX/2+padding;break;default:textX=nodePos.x}switch(textValign){case "top":textY=nodePos.y-textY/2-padding;break;case "bottom":textY=nodePos.y+textY/2+padding;break;default:textY=nodePos.y}content.labelX=textX;content.labelY=textY;_p.labelX=textX;_p.labelY=textY;this.calculateLabelAngles(node);this.applyLabelDimensions(node)}}},lineAngleFromDelta=function(dx,dy){dy=Math.atan(dy/dx);0===dx&&0>dy&&(dy*=-1);return dy};BRp$9.recalculateEdgeLabelProjections=
function(edge){var _p=edge._private,rs=_p.rscratch,r=this,content={mid:edge.pstyle("label").strValue,source:edge.pstyle("source-label").strValue,target:edge.pstyle("target-label").strValue};if(content.mid||content.source||content.target){var p={x:rs.midX,y:rs.midY};var setRs=function(propName,prefix,value){setPrefixedProperty(_p.rscratch,propName,prefix,value);setPrefixedProperty(_p.rstyle,propName,prefix,value)};setRs("labelX",null,p.x);setRs("labelY",null,p.y);var midAngle=lineAngleFromDelta(rs.midDispX,
rs.midDispY);setRs("labelAutoAngle",null,midAngle);var createControlPointInfo=function createControlPointInfo(){function addSegment(cp,p0,p1,t0,t1){var length=dist(p0,p1),prevSegment=cp.segments[cp.segments.length-1];cp.segments.push({p0,p1,t0,t1,startDist:prevSegment?prevSegment.startDist+prevSegment.length:0,length});cp.length+=length}if(createControlPointInfo.cache)return createControlPointInfo.cache;for(var ctrlpts=[],i=0;i+5<rs.allpts.length;i+=4)ctrlpts.push({p0:{x:rs.allpts[i],y:rs.allpts[i+
1]},p1:{x:rs.allpts[i+2],y:rs.allpts[i+3]},p2:{x:rs.allpts[i+4],y:rs.allpts[i+5]},startDist:0,length:0,segments:[]});i=_p.rstyle.bezierPts;for(var nProjs=r.bezierProjPcts.length,_i=0;_i<ctrlpts.length;_i++){var cp=ctrlpts[_i],prevCp=ctrlpts[_i-1];prevCp&&(cp.startDist=prevCp.startDist+prevCp.length);addSegment(cp,cp.p0,i[_i*nProjs],0,r.bezierProjPcts[0]);for(prevCp=0;prevCp<nProjs-1;prevCp++)addSegment(cp,i[_i*nProjs+prevCp],i[_i*nProjs+prevCp+1],r.bezierProjPcts[prevCp],r.bezierProjPcts[prevCp+1]);
addSegment(cp,i[_i*nProjs+nProjs-1],cp.p2,r.bezierProjPcts[nProjs-1],1)}return createControlPointInfo.cache=ctrlpts};midAngle=function(prefix){var isSrc="source"===prefix;if(content[prefix]){var offset=edge.pstyle(prefix+"-text-offset").pfValue;switch(rs.edgeType){case "self":case "compound":case "bezier":case "multibezier":for(var cps=createControlPointInfo(),selected,startDist=0,totalDist=0,i=0;i<cps.length;i++){var angle=cps[isSrc?i:cps.length-1-i];for(var j=0;j<angle.segments.length;j++){var _seg=
angle.segments[isSrc?j:angle.segments.length-1-j],lastSeg=i===cps.length-1&&j===angle.segments.length-1;startDist=totalDist;totalDist+=_seg.length;if(totalDist>=offset||lastSeg){selected={cp:angle,segment:_seg};break}}if(selected)break}cps=selected.cp;selected=selected.segment;offset=(offset-startDist)/selected.length;startDist=selected.t1-selected.t0;selected=isSrc?selected.t0+startDist*offset:selected.t1-startDist*offset;selected=bound(0,selected,1);p=qbezierPtAt(cps.p0,cps.p1,cps.p2,selected);
isSrc=cps.p0;offset=cps.p1;startDist=cps.p2;cps=bound(0,selected-.001,1);selected=bound(0,selected+.001,1);cps=qbezierPtAt(isSrc,offset,startDist,cps);isSrc=qbezierPtAt(isSrc,offset,startDist,selected);angle=lineAngleFromDelta(isSrc.x-cps.x,isSrc.y-cps.y);break;case "straight":case "segments":case "haystack":selected=0;angle=rs.allpts.length;for(j=0;j+3<angle&&!(isSrc?(startDist={x:rs.allpts[j],y:rs.allpts[j+1]},cps={x:rs.allpts[j+2],y:rs.allpts[j+3]}):(startDist={x:rs.allpts[angle-2-j],y:rs.allpts[angle-
1-j]},cps={x:rs.allpts[angle-4-j],y:rs.allpts[angle-3-j]}),totalDist=dist(startDist,cps),i=selected,selected+=totalDist,selected>=offset);j+=2);offset=bound(0,(offset-i)/totalDist,1);isSrc=startDist;selected=void 0;totalDist=cps.x-isSrc.x;i=cps.y-isSrc.y;angle=dist(isSrc,cps);selected=null!=selected?selected:(null==offset?0:offset)*angle;p={x:isSrc.x+totalDist/angle*selected,y:isSrc.y+i/angle*selected};angle=lineAngleFromDelta(cps.x-startDist.x,cps.y-startDist.y)}setRs("labelX",prefix,p.x);setRs("labelY",
prefix,p.y);setRs("labelAutoAngle",prefix,angle)}};midAngle("source");midAngle("target");this.applyLabelDimensions(edge)}};BRp$9.applyLabelDimensions=function(ele){this.applyPrefixedLabelDimensions(ele);ele.isEdge()&&(this.applyPrefixedLabelDimensions(ele,"source"),this.applyPrefixedLabelDimensions(ele,"target"))};BRp$9.applyPrefixedLabelDimensions=function(ele,prefix){var _p=ele._private,text=this.getLabelText(ele,prefix);text=this.calculateLabelDimensions(ele,text);var lineHeight=ele.pstyle("line-height").pfValue;
ele=ele.pstyle("text-wrap").strValue;var lines=getPrefixedProperty(_p.rscratch,"labelWrapCachedLines",prefix)||[],numLines="wrap"!==ele?1:Math.max(lines.length,1),normPerLineHeight=text.height/numLines;ele=normPerLineHeight*lineHeight;lines=text.width;text=text.height+(numLines-1)*(lineHeight-1)*normPerLineHeight;setPrefixedProperty(_p.rstyle,"labelWidth",prefix,lines);setPrefixedProperty(_p.rscratch,"labelWidth",prefix,lines);setPrefixedProperty(_p.rstyle,"labelHeight",prefix,text);setPrefixedProperty(_p.rscratch,
"labelHeight",prefix,text);setPrefixedProperty(_p.rscratch,"labelLineHeight",prefix,ele)};BRp$9.getLabelText=function(ele,prefix){var _p=ele._private,text=ele.pstyle((prefix?prefix+"-":"")+"label").strValue,textTransform=ele.pstyle("text-transform").value,rscratch=function(propName,value){return value?(setPrefixedProperty(_p.rscratch,propName,prefix,value),value):getPrefixedProperty(_p.rscratch,propName,prefix)};if(!text)return"";"none"!=textTransform&&("uppercase"==textTransform?text=text.toUpperCase():
"lowercase"==textTransform&&(text=text.toLowerCase()));textTransform=ele.pstyle("text-wrap").value;if("wrap"===textTransform){textTransform=rscratch("labelKey");if(null!=textTransform&&rscratch("labelWrapKey")===textTransform)return rscratch("labelWrapCachedText");text=text.split("\n");for(var maxW=ele.pstyle("text-max-width").pfValue,overflowAny="anywhere"===ele.pstyle("text-overflow-wrap").value,wrappedLines=[],wordsRegex=/[\s\u200b]+/,wordSeparator=overflowAny?"":" ",l=0;l<text.length;l++){var line=
text[l],lineW=this.calculateLabelDimensions(ele,line).width;overflowAny&&(line=line.split("").join("​"));if(lineW>maxW){line=line.split(wordsRegex);lineW="";for(var w=0;w<line.length;w++){var word=line[w];this.calculateLabelDimensions(ele,0===lineW.length?word:lineW+wordSeparator+word).width<=maxW?lineW+=word+wordSeparator:(lineW&&wrappedLines.push(lineW),lineW=word+wordSeparator)}lineW.match(/^[\s\u200b]+$/)||wrappedLines.push(lineW)}else wrappedLines.push(line)}rscratch("labelWrapCachedLines",wrappedLines);
text=rscratch("labelWrapCachedText",wrappedLines.join("\n"));rscratch("labelWrapKey",textTransform)}else if("ellipsis"===textTransform){rscratch=ele.pstyle("text-max-width").pfValue;textTransform="";maxW=!1;if(this.calculateLabelDimensions(ele,text).width<rscratch)return text;for(overflowAny=0;overflowAny<text.length&&!(this.calculateLabelDimensions(ele,textTransform+text[overflowAny]+"…").width>rscratch);overflowAny++)textTransform+=text[overflowAny],overflowAny===text.length-1&&(maxW=!0);maxW||
(textTransform+="…");return textTransform}return text};BRp$9.getLabelJustification=function(ele){var justification=ele.pstyle("text-justification").strValue,textHalign=ele.pstyle("text-halign").strValue;if("auto"===justification)if(ele.isNode())switch(textHalign){case "left":return"right";case "right":return"left";default:return"center"}else return"center";else return justification};BRp$9.calculateLabelDimensions=function(ele,text){var cacheKey=hashString(text,ele._private.labelDimsKey),cache=this.labelDimCache||
(this.labelDimCache=[]),existingVal=cache[cacheKey];if(null!=existingVal)return existingVal;var fStyle=ele.pstyle("font-style").strValue;existingVal=ele.pstyle("font-size").pfValue;var family=ele.pstyle("font-family").strValue,weight=ele.pstyle("font-weight").strValue,canvas=this.labelCalcCanvas;ele=this.labelCalcCanvasContext;canvas||(canvas=this.labelCalcCanvas=document.createElement("canvas"),ele=this.labelCalcCanvasContext=canvas.getContext("2d"),canvas=canvas.style,canvas.position="absolute",
canvas.left="-9999px",canvas.top="-9999px",canvas.zIndex="-1",canvas.visibility="hidden",canvas.pointerEvents="none");ele.font="".concat(fStyle," ").concat(weight," ").concat(existingVal,"px ").concat(family);family=fStyle=0;text=text.split("\n");for(weight=0;weight<text.length;weight++){canvas=ele.measureText(text[weight]);var h=existingVal;fStyle=Math.max(Math.ceil(canvas.width),fStyle);family+=h}return cache[cacheKey]={width:fStyle+0,height:family+0}};BRp$9.calculateLabelAngle=function(ele,prefix){var rs=
ele._private.rscratch,isEdge=ele.isEdge();ele=ele.pstyle((prefix?prefix+"-":"")+"text-rotation");prefix=ele.strValue;return"none"===prefix?0:isEdge&&"autorotate"===prefix?rs.labelAutoAngle:"autorotate"===prefix?0:ele.pfValue};BRp$9.calculateLabelAngles=function(ele){var isEdge=ele.isEdge(),rs=ele._private.rscratch;rs.labelAngle=this.calculateLabelAngle(ele);isEdge&&(rs.sourceLabelAngle=this.calculateLabelAngle(ele,"source"),rs.targetLabelAngle=this.calculateLabelAngle(ele,"target"))};var BRp$8={},
warnedCutRect=!1;BRp$8.getNodeShape=function(node){var shape=node.pstyle("shape").value;return"cutrectangle"===shape&&(28>node.width()||28>node.height())?(warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle"):node.isParent()?"rectangle"===shape||"roundrectangle"===shape||"round-rectangle"===shape||"cutrectangle"===shape||"cut-rectangle"===shape||"barrel"===shape?shape:"rectangle":"polygon"===shape?(node=node.pstyle("shape-polygon-points").value,
this.nodeShapes.makePolygon(node).name):shape};var BRp$5={};[{projectIntoViewport:function(clientX,clientY){var cy=this.cy,offsets=this.findContainerClientCoords(),offsetLeft=offsets[0],offsetTop=offsets[1];offsets=offsets[4];var pan=cy.pan();cy=cy.zoom();return[((clientX-offsetLeft)/offsets-pan.x)/cy,((clientY-offsetTop)/offsets-pan.y)/cy]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var container=this.container,rect=container.getBoundingClientRect(),style=this.cy.window().getComputedStyle(container),
styleValue=function(name){return parseFloat(style.getPropertyValue(name))},JSCompiler_object_inline_left_661=styleValue("padding-left"),JSCompiler_object_inline_right_662=styleValue("padding-right"),JSCompiler_object_inline_top_663=styleValue("padding-top"),JSCompiler_object_inline_bottom_664=styleValue("padding-bottom"),JSCompiler_object_inline_left_665=styleValue("border-left-width"),JSCompiler_object_inline_right_666=styleValue("border-right-width"),JSCompiler_object_inline_top_667=styleValue("border-top-width");
styleValue("border-bottom-width");styleValue=container.clientWidth;return this.containerBB=[rect.left+JSCompiler_object_inline_left_661+JSCompiler_object_inline_left_665,rect.top+JSCompiler_object_inline_top_663+JSCompiler_object_inline_top_667,styleValue-(JSCompiler_object_inline_left_661+JSCompiler_object_inline_right_662),container.clientHeight-(JSCompiler_object_inline_top_663+JSCompiler_object_inline_bottom_664),rect.width/(styleValue+(JSCompiler_object_inline_left_665+JSCompiler_object_inline_right_666))]},
invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(x,y,interactiveElementsOnly,isTouch){return this.findNearestElements(x,y,interactiveElementsOnly,isTouch)[0]},findNearestElements:function(x$jscomp$0,y$jscomp$0,interactiveElementsOnly,isTouch){function addEle(ele,sqDist){if(ele.isNode()){if(nearNode)return;nearNode=ele;near.push(ele)}if(ele.isEdge()&&(null==sqDist||sqDist<minSqDist))if(nearEdge){if(nearEdge.pstyle("z-compound-depth").value===ele.pstyle("z-compound-depth").value&&
nearEdge.pstyle("z-compound-depth").value===ele.pstyle("z-compound-depth").value)for(var i=0;i<near.length;i++)if(near[i].isEdge()){nearEdge=near[i]=ele;minSqDist=null!=sqDist?sqDist:minSqDist;break}}else near.push(ele),nearEdge=ele,minSqDist=null!=sqDist?sqDist:minSqDist}function checkNode(node){var width=node.outerWidth()+2*nodeThreshold,height=node.outerHeight()+2*nodeThreshold,hw=width/2,hh=height/2,pos=node.position();if(pos.x-hw<=x$jscomp$0&&x$jscomp$0<=pos.x+hw&&pos.y-hh<=y$jscomp$0&&y$jscomp$0<=
pos.y+hh&&r.nodeShapes[self.getNodeShape(node)].checkPoint(x$jscomp$0,y$jscomp$0,0,width,height,pos.x,pos.y))return addEle(node,0),!0}function checkEdge(edge){var _p=edge._private,rs=_p.rscratch,styleWidth=edge.pstyle("width").pfValue,scale=edge.pstyle("arrow-scale").value,width=styleWidth/2+edgeThreshold,widthSq=width*width,width2=2*width;width=_p.source;var tgt=_p.target;if("segments"===rs.edgeType||"straight"===rs.edgeType||"haystack"===rs.edgeType)for(var pts=rs.allpts,i=0;i+3<pts.length;i+=2){var lx1=
pts[i],ly1=pts[i+1],lx2=pts[i+2],ly2=pts[i+3],t=width2,x2=Math.max(lx1,lx2),y1=Math.min(ly1,ly2);ly1=Math.max(ly1,ly2);if(lx1=Math.min(lx1,lx2)-t<=x$jscomp$0&&x$jscomp$0<=x2+t&&y1-t<=y$jscomp$0&&y$jscomp$0<=ly1+t){t=pts[i];x2=pts[i+1];var sqDist=pts[i+2];lx1=pts[i+3];lx2=[x$jscomp$0-t,y$jscomp$0-x2];y1=[sqDist-t,lx1-x2];t=y1[0]*y1[0]+y1[1]*y1[1];x2=lx2[0]*lx2[0]+lx2[1]*lx2[1];lx2=lx2[0]*y1[0]+lx2[1]*y1[1];y1=lx2*lx2/t;sqDist=0>lx2?x2:y1>t?(x$jscomp$0-sqDist)*(x$jscomp$0-sqDist)+(y$jscomp$0-lx1)*(y$jscomp$0-
lx1):x2-y1;lx1=widthSq>sqDist}if(lx1)return addEle(edge,sqDist),!0}else if("bezier"===rs.edgeType||"multibezier"===rs.edgeType||"self"===rs.edgeType||"compound"===rs.edgeType)for(pts=rs.allpts,i=0;i+5<rs.allpts.length;i+=4){lx1=pts[i];ly1=pts[i+1];lx2=pts[i+2];ly2=pts[i+3];t=pts[i+4];var y3=pts[i+5];x2=Math.max(lx1,t,lx2)+width2;y1=Math.min(ly1,y3,ly2)-width2;ly1=Math.max(ly1,y3,ly2)+width2;lx1=x$jscomp$0<Math.min(lx1,t,lx2)-width2||x$jscomp$0>x2||y$jscomp$0<y1||y$jscomp$0>ly1?!1:!0;if(lx1){sqDist=
x$jscomp$0;lx1=y$jscomp$0;lx2=pts[i];t=pts[i+1];x2=pts[i+2];y1=pts[i+3];ly1=pts[i+4];ly2=pts[i+5];y3=[];var curX=1*lx2*lx2-4*lx2*x2+2*lx2*ly1+4*x2*x2-4*x2*ly1+ly1*ly1+t*t-4*t*y1+2*t*ly2+4*y1*y1-4*y1*ly2+ly2*ly2;var term1=9*lx2*x2-3*lx2*lx2-3*lx2*ly1-6*x2*x2+3*x2*ly1+9*t*y1-3*t*t-3*t*ly2-6*y1*y1+3*y1*ly2;var discriminant=3*lx2*lx2-6*lx2*x2+lx2*ly1-lx2*sqDist+2*x2*x2+2*x2*sqDist-ly1*sqDist+3*t*t-6*t*y1+t*ly2-t*lx1+2*y1*y1+2*y1*lx1-ly2*lx1;var result=y3;0===curX&&(curX=1E-5);term1/=curX;discriminant/=
curX;var distSquared=(3*discriminant-term1*term1)/9;curX=-((1*lx2*x2-lx2*lx2+lx2*sqDist-x2*sqDist+t*y1-t*t+t*lx1-y1*lx1)/curX*27)+term1*(9*discriminant-2*term1*term1);curX/=54;discriminant=distSquared*distSquared*distSquared+curX*curX;result[1]=0;term1/=3;0<discriminant?(distSquared=curX+Math.sqrt(discriminant),distSquared=0>distSquared?-Math.pow(-distSquared,1/3):Math.pow(distSquared,1/3),curX-=Math.sqrt(discriminant),curX=0>curX?-Math.pow(-curX,1/3):Math.pow(curX,1/3),result[0]=-term1+distSquared+
curX,result[4]=result[2]=-(term1+(distSquared+curX)/2),term1=Math.sqrt(3)*(-curX+distSquared)/2,result[3]=term1,result[5]=-term1):(result[5]=result[3]=0,0===discriminant?(distSquared=0>curX?-Math.pow(-curX,1/3):Math.pow(curX,1/3),result[0]=-term1+2*distSquared,result[4]=result[2]=-(distSquared+term1)):(distSquared=-distSquared,curX=Math.acos(curX/Math.sqrt(distSquared*distSquared*distSquared)),distSquared=2*Math.sqrt(distSquared),result[0]=-term1+distSquared*Math.cos(curX/3),result[2]=-term1+distSquared*
Math.cos((curX+2*Math.PI)/3),result[4]=-term1+distSquared*Math.cos((curX+4*Math.PI)/3)));result=[];for(term1=0;6>term1;term1+=2)1E-7>Math.abs(y3[term1+1])&&0<=y3[term1]&&1>=y3[term1]&&result.push(y3[term1]);result.push(1);result.push(0);y3=-1;for(term1=0;term1<result.length;term1++)curX=Math.pow(1-result[term1],2)*lx2+2*(1-result[term1])*result[term1]*x2+result[term1]*result[term1]*ly1,distSquared=Math.pow(1-result[term1],2)*t+2*(1-result[term1])*result[term1]*y1+result[term1]*result[term1]*ly2,distSquared=
Math.pow(curX-sqDist,2)+Math.pow(distSquared-lx1,2),0<=y3?distSquared<y3&&(y3=distSquared):y3=distSquared;lx1=widthSq>(sqDist=y3)}if(lx1)return addEle(edge,sqDist),!0}width=width||_p.source;tgt=tgt||_p.target;_p=self.getArrowWidth(styleWidth,scale);rs=[{name:"source",x:rs.arrowStartX,y:rs.arrowStartY,angle:rs.srcArrowAngle},{name:"target",x:rs.arrowEndX,y:rs.arrowEndY,angle:rs.tgtArrowAngle},{name:"mid-source",x:rs.midX,y:rs.midY,angle:rs.midsrcArrowAngle},{name:"mid-target",x:rs.midX,y:rs.midY,angle:rs.midtgtArrowAngle}];
for(i=0;i<rs.length;i++)if(styleWidth=rs[i],scale=r.arrowShapes[edge.pstyle(styleWidth.name+"-arrow-shape").value],widthSq=edge.pstyle("width").pfValue,scale.roughCollide(x$jscomp$0,y$jscomp$0,_p,styleWidth.angle,{x:styleWidth.x,y:styleWidth.y},widthSq,edgeThreshold)&&scale.collide(x$jscomp$0,y$jscomp$0,_p,styleWidth.angle,{x:styleWidth.x,y:styleWidth.y},widthSq,edgeThreshold))return addEle(edge),!0;hasCompounds&&0<near.length&&(checkNode(width),checkNode(tgt))}function checkLabel(ele,prefix){var _p=
ele._private,th=labelThreshold;var prefixDash=prefix?prefix+"-":"";ele.boundingBox();var bb=_p.labelBounds[prefix||"main"],text=ele.pstyle(prefixDash+"label").value;if("yes"===ele.pstyle("text-events").strValue&&text){var lx=getPrefixedProperty(_p.rscratch,"labelX",prefix),ly=getPrefixedProperty(_p.rscratch,"labelY",prefix),theta=getPrefixedProperty(_p.rscratch,"labelAngle",prefix);prefix=ele.pstyle(prefixDash+"text-margin-x").pfValue;prefixDash=ele.pstyle(prefixDash+"text-margin-y").pfValue;var lx1=
bb.x1-th-prefix;_p=bb.x2+th-prefix;text=bb.y1-th-prefixDash;th=bb.y2+th-prefixDash;if(theta){var cos=Math.cos(theta),sin=Math.sin(theta);theta=function(x,y){x-=lx;y-=ly;return{x:x*cos-y*sin+lx,y:x*sin+y*cos+ly}};bb=theta(lx1,text);lx1=theta(lx1,th);text=theta(_p,text);_p=theta(_p,th);if(pointInsidePolygonPoints(x$jscomp$0,y$jscomp$0,[bb.x+prefix,bb.y+prefixDash,text.x+prefix,text.y+prefixDash,_p.x+prefix,_p.y+prefixDash,lx1.x+prefix,lx1.y+prefixDash]))return addEle(ele),!0}else if(inBoundingBox(bb,
x$jscomp$0,y$jscomp$0))return addEle(ele),!0}}var self=this,r=this,eles=r.getCachedZSortedEles(),near=[],zoom=r.cy.zoom(),hasCompounds=r.cy.hasCompoundNodes(),edgeThreshold=(isTouch?24:8)/zoom,nodeThreshold=(isTouch?8:2)/zoom,labelThreshold=(isTouch?8:2)/zoom,minSqDist=Infinity,nearEdge,nearNode;interactiveElementsOnly&&(eles=eles.interactive);for(interactiveElementsOnly=eles.length-1;0<=interactiveElementsOnly;interactiveElementsOnly--)isTouch=eles[interactiveElementsOnly],isTouch.isNode()?checkNode(isTouch)||
checkLabel(isTouch):checkEdge(isTouch)||checkLabel(isTouch)||checkLabel(isTouch,"source")||checkLabel(isTouch,"target");return near},getAllInBox:function(x1,y1,x2,y2){var eles=this.getCachedZSortedEles().interactive,box=[],x2c=Math.max(x1,x2),y1c=Math.min(y1,y2);y2=Math.max(y1,y2);x1=Math.min(x1,x2);x2=x2c;y1=y1c;x1=makeBoundingBox({x1,y1,x2,y2});for(y1=0;y1<eles.length;y1++)if(x2=eles[y1],x2.isNode())x2c=x2.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1}),boundingBoxesIntersect(x1,
x2c)&&!boundingBoxInBoundingBox(x2c,x1)&&box.push(x2);else if(x2c=x2._private,y1c=x2c.rscratch,null==y1c.startX||null==y1c.startY||inBoundingBox(x1,y1c.startX,y1c.startY))if(null==y1c.endX||null==y1c.endY||inBoundingBox(x1,y1c.endX,y1c.endY))if("bezier"===y1c.edgeType||"multibezier"===y1c.edgeType||"self"===y1c.edgeType||"compound"===y1c.edgeType||"segments"===y1c.edgeType||"haystack"===y1c.edgeType){x2c=x2c.rstyle.bezierPts||x2c.rstyle.linePts||x2c.rstyle.haystackPts;y1c=!0;for(y2=0;y2<x2c.length;y2++){var pt=
x2c[y2];if(!inBoundingBox(x1,pt.x,pt.y)){y1c=!1;break}}y1c&&box.push(x2)}else"haystack"!==y1c.edgeType&&"straight"!==y1c.edgeType||box.push(x2);return box}},BRp$d,{findHaystackPoints:function(edges){for(var i=0;i<edges.length;i++){var edge=edges[i],_p=edge._private,rs=_p.rscratch;if(!rs.haystack){var angle=2*Math.random()*Math.PI;rs.source={x:Math.cos(angle),y:Math.sin(angle)};angle=2*Math.random()*Math.PI;rs.target={x:Math.cos(angle),y:Math.sin(angle)}}var src=_p.source,tgt=_p.target;_p=src.position();
angle=tgt.position();var srcW=src.width(),tgtW=tgt.width();src=src.height();tgt=tgt.height();var halfRadius=edge.pstyle("haystack-radius").value/2;rs.haystackPts=rs.allpts=[rs.source.x*srcW*halfRadius+_p.x,rs.source.y*src*halfRadius+_p.y,rs.target.x*tgtW*halfRadius+angle.x,rs.target.y*tgt*halfRadius+angle.y];rs.midX=(rs.allpts[0]+rs.allpts[2])/2;rs.midY=(rs.allpts[1]+rs.allpts[3])/2;rs.edgeType="haystack";rs.haystack=!0;this.storeEdgeProjections(edge);this.calculateArrowAngles(edge);this.recalculateEdgeLabelProjections(edge);
this.calculateLabelAngles(edge)}},findSegmentsPoints:function(edge,pairInfo){var rs=edge._private.rscratch,posPts=pairInfo.posPts,intersectionPts=pairInfo.intersectionPts;pairInfo=pairInfo.vectorNormInverse;var edgeDistances=edge.pstyle("edge-distances").value,segmentWs=edge.pstyle("segment-weights");edge=edge.pstyle("segment-distances");var segmentsN=Math.min(segmentWs.pfValue.length,edge.pfValue.length);rs.edgeType="segments";rs.segpts=[];for(var s=0;s<segmentsN;s++){var w=segmentWs.pfValue[s],
d=edge.pfValue[s],w1=1-w,midptPts="node-position"===edgeDistances?posPts:intersectionPts;rs.segpts.push(midptPts.x1*w1+midptPts.x2*w+pairInfo.x*d,midptPts.y1*w1+midptPts.y2*w+pairInfo.y*d)}},findLoopPoints:function(edge,pairInfo,i,edgeIsUnbundled){i=edge._private.rscratch;var dirCounts=pairInfo.dirCounts;pairInfo=pairInfo.srcPos;var ctrlptDists=edge.pstyle("control-point-distances"),ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0;ctrlptDists=edge.pstyle("loop-direction").pfValue;var loopSwp=
edge.pstyle("loop-sweep").pfValue;edge=edge.pstyle("control-point-step-size").pfValue;i.edgeType="self";edgeIsUnbundled&&(edge=ctrlptDist);ctrlptDist=ctrlptDists-Math.PI/2;edgeIsUnbundled=ctrlptDist-loopSwp/2;ctrlptDist+=loopSwp/2;ctrlptDists=String(ctrlptDists+"_"+loopSwp);dirCounts=void 0===dirCounts[ctrlptDists]?dirCounts[ctrlptDists]=0:++dirCounts[ctrlptDists];i.ctrlpts=[pairInfo.x+1.4*Math.cos(edgeIsUnbundled)*edge*(dirCounts/3+1),pairInfo.y+1.4*Math.sin(edgeIsUnbundled)*edge*(dirCounts/3+1),
pairInfo.x+1.4*Math.cos(ctrlptDist)*edge*(dirCounts/3+1),pairInfo.y+1.4*Math.sin(ctrlptDist)*edge*(dirCounts/3+1)]},findCompoundLoopPoints:function(edge,pairInfo,i,edgeIsUnbundled){var rs=edge._private.rscratch;rs.edgeType="compound";var srcPos=pairInfo.srcPos,tgtPos=pairInfo.tgtPos,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW;pairInfo=pairInfo.tgtH;var stepSize=edge.pstyle("control-point-step-size").pfValue;edge=(edge=edge.pstyle("control-point-distances"))?edge.pfValue[0]:void 0;edgeIsUnbundled&&
(i=0,stepSize=edge);edgeIsUnbundled=Math.min(srcPos.x-srcW/2,tgtPos.x-tgtW/2);srcPos=Math.min(srcPos.y-srcH/2,tgtPos.y-pairInfo/2);rs.ctrlpts=[edgeIsUnbundled,srcPos-(1+Math.pow(50,1.12)/100)*stepSize*(i/3+1)*Math.max(.5,Math.log(.01*srcW)),edgeIsUnbundled-(1+Math.pow(50,1.12)/100)*stepSize*(i/3+1)*Math.max(.5,Math.log(.01*tgtW)),srcPos]},findStraightEdgePoints:function(edge){edge._private.rscratch.edgeType="straight"},findBezierPoints:function(edge,pairInfo,i,edgeIsUnbundled,edgeIsSwapped){var rs=
edge._private.rscratch,vectorNormInverse=pairInfo.vectorNormInverse,posPts=pairInfo.posPts,intersectionPts=pairInfo.intersectionPts,edgeDistances=edge.pstyle("edge-distances").value,stepSize=edge.pstyle("control-point-step-size").pfValue,ctrlptDists=edge.pstyle("control-point-distances");edge=edge.pstyle("control-point-weights");var bezierN=ctrlptDists&&edge?Math.min(ctrlptDists.value.length,edge.value.length):1,ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0,ctrlptWeight=edge.value[0];rs.edgeType=
edgeIsUnbundled?"multibezier":"bezier";rs.ctrlpts=[];for(var b=0;b<bezierN;b++){var normctrlptDist=(.5-pairInfo.eles.length/2+i)*stepSize*(edgeIsSwapped?-1:1);var manctrlptDist=0<normctrlptDist?1:0>normctrlptDist?-1:0;edgeIsUnbundled&&(ctrlptDist=ctrlptDists?ctrlptDists.pfValue[b]:stepSize,ctrlptWeight=edge.value[b]);manctrlptDist=edgeIsUnbundled?ctrlptDist:void 0!==ctrlptDist?manctrlptDist*ctrlptDist:void 0;normctrlptDist=void 0!==manctrlptDist?manctrlptDist:normctrlptDist;manctrlptDist=1-ctrlptWeight;
var w2=ctrlptWeight,midptPts="node-position"===edgeDistances?posPts:intersectionPts;rs.ctrlpts.push(midptPts.x1*manctrlptDist+midptPts.x2*w2+vectorNormInverse.x*normctrlptDist,midptPts.y1*manctrlptDist+midptPts.y2*w2+vectorNormInverse.y*normctrlptDist)}},findTaxiPoints:function(edge,pairInfo){var rs=edge._private.rscratch;rs.edgeType="segments";var posPts=pairInfo.posPts,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW;pairInfo=pairInfo.tgtH;var dIncludesNodeBody="node-position"!==edge.pstyle("edge-distances").value,
taxiDir=edge.pstyle("taxi-direction").value,rawTaxiDir=taxiDir,taxiTurn=edge.pstyle("taxi-turn"),turnIsPercent="%"===taxiTurn.units,taxiTurnPfVal=taxiTurn.pfValue,turnIsNegative=0>taxiTurnPfVal,minD=edge.pstyle("taxi-turn-min-distance").pfValue,dh=dIncludesNodeBody?(srcH+pairInfo)/2:0;edge=posPts.x2-posPts.x1;taxiTurn=posPts.y2-posPts.y1;var subDWH=function(dxy,dwh){return 0<dxy?Math.max(dxy-dwh,0):Math.min(dxy+dwh,0)},dx=subDWH(edge,dIncludesNodeBody?(srcW+tgtW)/2:0);dh=subDWH(taxiTurn,dh);var isExplicitDir=
!1;if("auto"===rawTaxiDir)taxiDir=Math.abs(dx)>Math.abs(dh)?"horizontal":"vertical";else if("upward"===rawTaxiDir||"downward"===rawTaxiDir)taxiDir="vertical",isExplicitDir=!0;else if("leftward"===rawTaxiDir||"rightward"===rawTaxiDir)taxiDir="horizontal",isExplicitDir=!0;var l=(taxiDir="vertical"===taxiDir)?dh:dx;dx=taxiDir?taxiTurn:edge;dh=0<dx?1:0>dx?-1:0;subDWH=!1;isExplicitDir&&(turnIsPercent||turnIsNegative)||!("downward"===rawTaxiDir&&0>dx||"upward"===rawTaxiDir&&0<dx||"leftward"===rawTaxiDir&&
0<dx||"rightward"===rawTaxiDir&&0>dx)||(dh*=-1,l=dh*Math.abs(l),subDWH=!0);rawTaxiDir=turnIsPercent?(0>taxiTurnPfVal?1+taxiTurnPfVal:taxiTurnPfVal)*l:(0>taxiTurnPfVal?l:0)+taxiTurnPfVal*dh;taxiTurnPfVal=function(d){return Math.abs(d)<minD||Math.abs(d)>=Math.abs(l)};turnIsPercent=taxiTurnPfVal(rawTaxiDir);taxiTurnPfVal=taxiTurnPfVal(Math.abs(l)-Math.abs(rawTaxiDir));!turnIsPercent&&!taxiTurnPfVal||subDWH?taxiDir?(srcW=posPts.y1+rawTaxiDir+(dIncludesNodeBody?srcH/2*dh:0),rs.segpts=[posPts.x1,srcW,posPts.x2,
srcW]):(srcW=posPts.x1+rawTaxiDir+(dIncludesNodeBody?srcW/2*dh:0),rs.segpts=[srcW,posPts.y1,srcW,posPts.y2]):taxiDir?(srcW=Math.abs(edge)<=tgtW/2,Math.abs(dx)<=srcH/2?(srcW=(posPts.x1+posPts.x2)/2,rs.segpts=[srcW,posPts.y1,srcW,posPts.y2]):srcW?(srcW=(posPts.y1+posPts.y2)/2,rs.segpts=[posPts.x1,srcW,posPts.x2,srcW]):rs.segpts=[posPts.x1,posPts.y2]):(srcH=Math.abs(taxiTurn)<=pairInfo/2,Math.abs(dx)<=srcW/2?(srcW=(posPts.y1+posPts.y2)/2,rs.segpts=[posPts.x1,srcW,posPts.x2,srcW]):srcH?(srcW=(posPts.x1+
posPts.x2)/2,rs.segpts=[srcW,posPts.y1,srcW,posPts.y2]):rs.segpts=[posPts.x2,posPts.y1])},tryToCorrectInvalidPoints:function(edge,pairInfo){var rs=edge._private.rscratch;if("bezier"===rs.edgeType){var srcPos=pairInfo.srcPos,tgtPos=pairInfo.tgtPos,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW,tgtH=pairInfo.tgtH,srcShape=pairInfo.srcShape,tgtShape=pairInfo.tgtShape,badStart=!number$1(rs.startX)||!number$1(rs.startY),badAStart=!number$1(rs.arrowStartX)||!number$1(rs.arrowStartY),badEnd=!number$1(rs.endX)||
!number$1(rs.endY),badAEnd=!number$1(rs.arrowEndX)||!number$1(rs.arrowEndY);pairInfo=3*this.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.arrowShapeWidth;var startACpDist=dist({x:rs.ctrlpts[0],y:rs.ctrlpts[1]},{x:rs.startX,y:rs.startY}),closeStartACp=startACpDist<pairInfo,endACpDist=dist({x:rs.ctrlpts[0],y:rs.ctrlpts[1]},{x:rs.endX,y:rs.endY}),closeEndACp=endACpDist<pairInfo,overlapping=!1;if(badStart||badAStart||closeStartACp){overlapping=!0;badStart=rs.ctrlpts[0]-
srcPos.x;badAStart=rs.ctrlpts[1]-srcPos.y;var cpL=Math.sqrt(badStart*badStart+badAStart*badAStart);badStart/=cpL;badAStart/=cpL;cpL=Math.max(srcW,srcH);srcPos=srcShape.intersectLine(srcPos.x,srcPos.y,srcW,srcH,rs.ctrlpts[0]+2*badStart*cpL,rs.ctrlpts[1]+2*badAStart*cpL,0);closeStartACp?(rs.ctrlpts[0]+=badStart*(pairInfo-startACpDist),rs.ctrlpts[1]+=badAStart*(pairInfo-startACpDist)):(rs.ctrlpts[0]=srcPos[0]+badStart*pairInfo,rs.ctrlpts[1]=srcPos[1]+badAStart*pairInfo)}if(badEnd||badAEnd||closeEndACp)overlapping=
!0,srcPos=rs.ctrlpts[0]-tgtPos.x,srcShape=rs.ctrlpts[1]-tgtPos.y,badEnd=Math.sqrt(srcPos*srcPos+srcShape*srcShape),srcPos/=badEnd,srcShape/=badEnd,srcW=Math.max(srcW,srcH),tgtPos=tgtShape.intersectLine(tgtPos.x,tgtPos.y,tgtW,tgtH,rs.ctrlpts[0]+2*srcPos*srcW,rs.ctrlpts[1]+2*srcShape*srcW,0),closeEndACp?(rs.ctrlpts[0]+=srcPos*(pairInfo-endACpDist),rs.ctrlpts[1]+=srcShape*(pairInfo-endACpDist)):(rs.ctrlpts[0]=tgtPos[0]+srcPos*pairInfo,rs.ctrlpts[1]=tgtPos[1]+srcShape*pairInfo);overlapping&&this.findEndpoints(edge)}},
storeAllpts:function(edge){edge=edge._private.rscratch;if("multibezier"===edge.edgeType||"bezier"===edge.edgeType||"self"===edge.edgeType||"compound"===edge.edgeType){edge.allpts=[];edge.allpts.push(edge.startX,edge.startY);for(var b=0;b+1<edge.ctrlpts.length;b+=2)edge.allpts.push(edge.ctrlpts[b],edge.ctrlpts[b+1]),b+3<edge.ctrlpts.length&&edge.allpts.push((edge.ctrlpts[b]+edge.ctrlpts[b+2])/2,(edge.ctrlpts[b+1]+edge.ctrlpts[b+3])/2);edge.allpts.push(edge.endX,edge.endY);0===edge.ctrlpts.length/2%
2?(b=edge.allpts.length/2-1,edge.midX=edge.allpts[b],edge.midY=edge.allpts[b+1]):(b=edge.allpts.length/2-3,edge.midX=qbezierAt(edge.allpts[b],edge.allpts[b+2],edge.allpts[b+4],.5),edge.midY=qbezierAt(edge.allpts[b+1],edge.allpts[b+3],edge.allpts[b+5],.5))}else if("straight"===edge.edgeType)edge.allpts=[edge.startX,edge.startY,edge.endX,edge.endY],edge.midX=(edge.startX+edge.endX+edge.arrowStartX+edge.arrowEndX)/4,edge.midY=(edge.startY+edge.endY+edge.arrowStartY+edge.arrowEndY)/4;else if("segments"===
edge.edgeType)if(edge.allpts=[],edge.allpts.push(edge.startX,edge.startY),edge.allpts.push.apply(edge.allpts,edge.segpts),edge.allpts.push(edge.endX,edge.endY),0===edge.segpts.length%4){b=edge.segpts.length/2;var i1=b-2;edge.midX=(edge.segpts[i1]+edge.segpts[b])/2;edge.midY=(edge.segpts[i1+1]+edge.segpts[b+1])/2}else b=edge.segpts.length/2-1,edge.midX=edge.segpts[b],edge.midY=edge.segpts[b+1]},checkForInvalidEdgeWarning:function(edge){var rs=edge[0]._private.rscratch;rs.nodesOverlap||number$1(rs.startX)&&
number$1(rs.startY)&&number$1(rs.endX)&&number$1(rs.endY)?rs.loggedErr=!1:rs.loggedErr||(rs.loggedErr=!0,warn("Edge `"+edge.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},findEdgeControlPoints:function(edges){var _this=this;if(edges&&0!==edges.length){for(var r=this,hasCompounds=r.cy.hasCompoundNodes(),hashTable=
{map:new Map$1,get:function(pairId){var map2=this.map.get(pairId[0]);return null!=map2?map2.get(pairId[1]):null},set:function(pairId,val){var map2=this.map.get(pairId[0]);null==map2&&(map2=new Map$1,this.map.set(pairId[0],map2));map2.set(pairId[1],val)}},pairIds=[],haystackEdges=[],i=0;i<edges.length;i++){var edge$jscomp$0=edges[i],_p=edge$jscomp$0._private,curveStyle=edge$jscomp$0.pstyle("curve-style").value;if(!edge$jscomp$0.removed()&&edge$jscomp$0.takesUpSpace())if("haystack"===curveStyle)haystackEdges.push(edge$jscomp$0);
else{var edgeIsUnbundled="unbundled-bezier"===curveStyle||"segments"===curveStyle||"straight"===curveStyle||"straight-triangle"===curveStyle||"taxi"===curveStyle;curveStyle="unbundled-bezier"===curveStyle||"bezier"===curveStyle;var tgt=_p.target;_p=_p.source.poolIndex();tgt=tgt.poolIndex();_p=[_p,tgt].sort();tgt=hashTable.get(_p);null==tgt&&(tgt={eles:[]},hashTable.set(_p,tgt),pairIds.push(_p));tgt.eles.push(edge$jscomp$0);edgeIsUnbundled&&(tgt.hasUnbundled=!0);curveStyle&&(tgt.hasBezier=!0)}}edges=
function(p){var pairInfo=hashTable.get(pairIds[p]),swappedpairInfo=void 0;pairInfo.hasUnbundled||(p=pairInfo.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()}),clearArray(pairInfo.eles),p.forEach(function(edge){return pairInfo.eles.push(edge)}),pairInfo.eles.sort(function(edge1,edge2){return edge1.poolIndex()-edge2.poolIndex()}));var firstEdge=pairInfo.eles[0];p=firstEdge.source();firstEdge=firstEdge.target();if(p.poolIndex()>firstEdge.poolIndex()){var temp=p;p=firstEdge;firstEdge=
temp}temp=pairInfo.srcPos=p.position();var tgtPos=pairInfo.tgtPos=firstEdge.position(),srcW=pairInfo.srcW=p.outerWidth(),srcH=pairInfo.srcH=p.outerHeight(),tgtW=pairInfo.tgtW=firstEdge.outerWidth(),tgtH=pairInfo.tgtH=firstEdge.outerHeight(),srcShape=pairInfo.srcShape=r.nodeShapes[_this.getNodeShape(p)],tgtShape=pairInfo.tgtShape=r.nodeShapes[_this.getNodeShape(firstEdge)];pairInfo.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _i2=0;_i2<pairInfo.eles.length;_i2++){var _edge=
pairInfo.eles[_i2],rs=_edge[0]._private.rscratch,_curveStyle=_edge.pstyle("curve-style").value,_edgeIsUnbundled="unbundled-bezier"===_curveStyle||"segments"===_curveStyle||"taxi"===_curveStyle,edgeIsSwapped=!p.same(_edge.source());if(!pairInfo.calculatedIntersection&&p!==firstEdge&&(pairInfo.hasBezier||pairInfo.hasUnbundled)){pairInfo.calculatedIntersection=!0;swappedpairInfo=srcShape.intersectLine(temp.x,temp.y,srcW,srcH,tgtPos.x,tgtPos.y,0);var srcIntn=pairInfo.srcIntn=swappedpairInfo,tgtOutside=
tgtShape.intersectLine(tgtPos.x,tgtPos.y,tgtW,tgtH,temp.x,temp.y,0),tgtIntn=pairInfo.tgtIntn=tgtOutside,intersectionPts=pairInfo.intersectionPts={x1:swappedpairInfo[0],x2:tgtOutside[0],y1:swappedpairInfo[1],y2:tgtOutside[1]},posPts=pairInfo.posPts={x1:temp.x,x2:tgtPos.x,y1:temp.y,y2:tgtPos.y},dy=tgtOutside[1]-swappedpairInfo[1],dx=tgtOutside[0]-swappedpairInfo[0],l=Math.sqrt(dx*dx+dy*dy);dy=pairInfo.vector={x:dx,y:dy};dx=pairInfo.vectorNorm={x:dy.x/l,y:dy.y/l};var vectorNormInverse={x:-dx.y,y:dx.x};
pairInfo.nodesOverlap=!number$1(l)||tgtShape.checkPoint(swappedpairInfo[0],swappedpairInfo[1],0,tgtW,tgtH,tgtPos.x,tgtPos.y)||srcShape.checkPoint(tgtOutside[0],tgtOutside[1],0,srcW,srcH,temp.x,temp.y);pairInfo.vectorNormInverse=vectorNormInverse;swappedpairInfo={nodesOverlap:pairInfo.nodesOverlap,dirCounts:pairInfo.dirCounts,calculatedIntersection:!0,hasBezier:pairInfo.hasBezier,hasUnbundled:pairInfo.hasUnbundled,eles:pairInfo.eles,srcPos:tgtPos,tgtPos:temp,srcW:tgtW,srcH:tgtH,tgtW:srcW,tgtH:srcH,
srcIntn:tgtIntn,tgtIntn:srcIntn,srcShape:tgtShape,tgtShape:srcShape,posPts:{x1:posPts.x2,y1:posPts.y2,x2:posPts.x1,y2:posPts.y1},intersectionPts:{x1:intersectionPts.x2,y1:intersectionPts.y2,x2:intersectionPts.x1,y2:intersectionPts.y1},vector:{x:-dy.x,y:-dy.y},vectorNorm:{x:-dx.x,y:-dx.y},vectorNormInverse:{x:-vectorNormInverse.x,y:-vectorNormInverse.y}}}srcIntn=edgeIsSwapped?swappedpairInfo:pairInfo;rs.nodesOverlap=srcIntn.nodesOverlap;rs.srcIntn=srcIntn.srcIntn;rs.tgtIntn=srcIntn.tgtIntn;hasCompounds&&
(p.isParent()||p.isChild()||firstEdge.isParent()||firstEdge.isChild())&&(p.parents().anySame(firstEdge)||firstEdge.parents().anySame(p)||p.same(firstEdge)&&p.isParent())?_this.findCompoundLoopPoints(_edge,srcIntn,_i2,_edgeIsUnbundled):p===firstEdge?_this.findLoopPoints(_edge,srcIntn,_i2,_edgeIsUnbundled):"segments"===_curveStyle?_this.findSegmentsPoints(_edge,srcIntn):"taxi"===_curveStyle?_this.findTaxiPoints(_edge,srcIntn):"straight"===_curveStyle||!_edgeIsUnbundled&&1===pairInfo.eles.length%2&&
_i2===Math.floor(pairInfo.eles.length/2)?_this.findStraightEdgePoints(_edge):_this.findBezierPoints(_edge,srcIntn,_i2,_edgeIsUnbundled,edgeIsSwapped);_this.findEndpoints(_edge);_this.tryToCorrectInvalidPoints(_edge,srcIntn);_this.checkForInvalidEdgeWarning(_edge);_this.storeAllpts(_edge);_this.storeEdgeProjections(_edge);_this.calculateArrowAngles(_edge);_this.recalculateEdgeLabelProjections(_edge);_this.calculateLabelAngles(_edge)}};for(i=0;i<pairIds.length;i++)edges(i);this.findHaystackPoints(haystackEdges)}},
getSegmentPoints:function(edge){var rs=edge[0]._private.rscratch;if("segments"===rs.edgeType)return this.recalculateRenderedStyle(edge),getPts(rs.segpts)},getControlPoints:function(edge){var rs=edge[0]._private.rscratch,type=rs.edgeType;if("bezier"===type||"multibezier"===type||"self"===type||"compound"===type)return this.recalculateRenderedStyle(edge),getPts(rs.ctrlpts)},getEdgeMidpoint:function(edge){var rs=edge[0]._private.rscratch;this.recalculateRenderedStyle(edge);return{x:rs.midX,y:rs.midY}}},
{manualEndptToPx:function(node,prop){var npos=node.position(),w=node.outerWidth(),h=node.outerHeight();if(2===prop.value.length)return node=[prop.pfValue[0],prop.pfValue[1]],"%"===prop.units[0]&&(node[0]*=w),"%"===prop.units[1]&&(node[1]*=h),node[0]+=npos.x,node[1]+=npos.y,node;prop=prop.pfValue[0];prop=-Math.PI/2+prop;var l=2*Math.max(w,h);prop=[npos.x+Math.cos(prop)*l,npos.y+Math.sin(prop)*l];return this.nodeShapes[this.getNodeShape(node)].intersectLine(npos.x,npos.y,w,h,prop[0],prop[1],0)},findEndpoints:function(edge){var source=
edge.source()[0],target=edge.target()[0],srcPos=source.position(),tgtPos=target.position(),tgtArShape=edge.pstyle("target-arrow-shape").value,srcArShape=edge.pstyle("source-arrow-shape").value,tgtDist=edge.pstyle("target-distance-from-node").pfValue,srcDist=edge.pstyle("source-distance-from-node").pfValue,curveStyle=edge.pstyle("curve-style").value,rs=edge._private.rscratch,et=rs.edgeType,self="self"===et||"compound"===et,bezier="bezier"===et||"multibezier"===et||self;var intersect="bezier"!==et;
var lines="straight"===et||"segments"===et,segments="segments"===et;et=bezier||intersect||lines;var overrideEndpts=self||"taxi"===curveStyle;curveStyle=edge.pstyle("source-endpoint");self=overrideEndpts?"outside-to-node":curveStyle.value;var tgtManEndpt=edge.pstyle("target-endpoint");overrideEndpts=overrideEndpts?"outside-to-node":tgtManEndpt.value;rs.srcManEndpt=curveStyle;rs.tgtManEndpt=tgtManEndpt;if(bezier){var p2=[rs.ctrlpts[0],rs.ctrlpts[1]];var p1=intersect?[rs.ctrlpts[rs.ctrlpts.length-2],
rs.ctrlpts[rs.ctrlpts.length-1]]:p2}else lines&&(p2=segments?rs.segpts.slice(0,2):[tgtPos.x,tgtPos.y],p1=segments?rs.segpts.slice(rs.segpts.length-2):[srcPos.x,srcPos.y]);if("inside-to-node"===overrideEndpts)intersect=[tgtPos.x,tgtPos.y];else if(tgtManEndpt.units)intersect=this.manualEndptToPx(target,tgtManEndpt);else if("outside-to-line"===overrideEndpts)intersect=rs.tgtIntn;else{if("outside-to-node"===overrideEndpts||"outside-to-node-or-label"===overrideEndpts)var p1_i=p1;else if("outside-to-line"===
overrideEndpts||"outside-to-line-or-label"===overrideEndpts)p1_i=[srcPos.x,srcPos.y];intersect=this.nodeShapes[this.getNodeShape(target)].intersectLine(tgtPos.x,tgtPos.y,target.outerWidth(),target.outerHeight(),p1_i[0],p1_i[1],0);if("outside-to-node-or-label"===overrideEndpts||"outside-to-line-or-label"===overrideEndpts)tgtManEndpt=target._private.rscratch,bezier=tgtManEndpt.labelX,lines=tgtManEndpt.labelY,segments=tgtManEndpt.labelWidth/2,tgtManEndpt=tgtManEndpt.labelHeight/2,overrideEndpts=target.pstyle("text-valign").value,
"top"===overrideEndpts?lines-=tgtManEndpt:"bottom"===overrideEndpts&&(lines+=tgtManEndpt),target=target.pstyle("text-halign").value,"left"===target?bezier-=segments:"right"===target&&(bezier+=segments),p1_i=polygonIntersectLine(p1_i[0],p1_i[1],[bezier-segments,lines-tgtManEndpt,bezier+segments,lines-tgtManEndpt,bezier+segments,lines+tgtManEndpt,bezier-segments,lines+tgtManEndpt],tgtPos.x,tgtPos.y),0<p1_i.length&&(target=sqdist(srcPos,array2point(intersect)),bezier=sqdist(srcPos,array2point(p1_i)),
lines=target,bezier<target&&(intersect=p1_i,lines=bezier),2<p1_i.length&&sqdist(srcPos,{x:p1_i[2],y:p1_i[3]})<lines&&(intersect=[p1_i[2],p1_i[3]]))}p1_i=shortenIntersection(intersect,p1,this.arrowShapes[tgtArShape].spacing(edge)+tgtDist);intersect=shortenIntersection(intersect,p1,this.arrowShapes[tgtArShape].gap(edge)+tgtDist);rs.endX=intersect[0];rs.endY=intersect[1];rs.arrowEndX=p1_i[0];rs.arrowEndY=p1_i[1];if("inside-to-node"===self)intersect=[srcPos.x,srcPos.y];else if(curveStyle.units)intersect=
this.manualEndptToPx(source,curveStyle);else if("outside-to-line"===self)intersect=rs.srcIntn;else{if("outside-to-node"===self||"outside-to-node-or-label"===self)var p2_i=p2;else if("outside-to-line"===self||"outside-to-line-or-label"===self)p2_i=[tgtPos.x,tgtPos.y];intersect=this.nodeShapes[this.getNodeShape(source)].intersectLine(srcPos.x,srcPos.y,source.outerWidth(),source.outerHeight(),p2_i[0],p2_i[1],0);if("outside-to-node-or-label"===self||"outside-to-line-or-label"===self)curveStyle=source._private.rscratch,
tgtArShape=curveStyle.labelX,tgtDist=curveStyle.labelY,p1=curveStyle.labelWidth/2,curveStyle=curveStyle.labelHeight/2,self=source.pstyle("text-valign").value,"top"===self?tgtDist-=curveStyle:"bottom"===self&&(tgtDist+=curveStyle),source=source.pstyle("text-halign").value,"left"===source?tgtArShape-=p1:"right"===source&&(tgtArShape+=p1),srcPos=polygonIntersectLine(p2_i[0],p2_i[1],[tgtArShape-p1,tgtDist-curveStyle,tgtArShape+p1,tgtDist-curveStyle,tgtArShape+p1,tgtDist+curveStyle,tgtArShape-p1,tgtDist+
curveStyle],srcPos.x,srcPos.y),0<srcPos.length&&(p2_i=sqdist(tgtPos,array2point(intersect)),source=sqdist(tgtPos,array2point(srcPos)),tgtArShape=p2_i,source<p2_i&&(intersect=[srcPos[0],srcPos[1]],tgtArShape=source),2<srcPos.length&&sqdist(tgtPos,{x:srcPos[2],y:srcPos[3]})<tgtArShape&&(intersect=[srcPos[2],srcPos[3]]))}tgtPos=shortenIntersection(intersect,p2,this.arrowShapes[srcArShape].spacing(edge)+srcDist);edge=shortenIntersection(intersect,p2,this.arrowShapes[srcArShape].gap(edge)+srcDist);rs.startX=
edge[0];rs.startY=edge[1];rs.arrowStartX=tgtPos[0];rs.arrowStartY=tgtPos[1];et&&(number$1(rs.startX)&&number$1(rs.startY)&&number$1(rs.endX)&&number$1(rs.endY)?rs.badLine=!1:rs.badLine=!0)},getSourceEndpoint:function(edge){var rs=edge[0]._private.rscratch;this.recalculateRenderedStyle(edge);switch(rs.edgeType){case "haystack":return{x:rs.haystackPts[0],y:rs.haystackPts[1]};default:return{x:rs.arrowStartX,y:rs.arrowStartY}}},getTargetEndpoint:function(edge){var rs=edge[0]._private.rscratch;this.recalculateRenderedStyle(edge);
switch(rs.edgeType){case "haystack":return{x:rs.haystackPts[2],y:rs.haystackPts[3]};default:return{x:rs.arrowEndX,y:rs.arrowEndY}}}},{storeEdgeProjections:function(edge){var _p=edge._private,rs=_p.rscratch,et=rs.edgeType;_p.rstyle.bezierPts=null;_p.rstyle.linePts=null;_p.rstyle.haystackPts=null;if("multibezier"===et||"bezier"===et||"self"===et||"compound"===et)for(_p.rstyle.bezierPts=[],et=0;et+5<rs.allpts.length;et+=4)for(var pts=rs.allpts.slice(et,et+6),bpts=edge._private.rstyle.bezierPts,i=0;i<
this.bezierProjPcts.length;i++){var p=this.bezierProjPcts[i];bpts.push({x:qbezierAt(pts[0],pts[2],pts[4],p),y:qbezierAt(pts[1],pts[3],pts[5],p)})}else if("segments"===et)for(pts=_p.rstyle.linePts=[],et=0;et+1<rs.allpts.length;et+=2)pts.push({x:rs.allpts[et],y:rs.allpts[et+1]});else"haystack"===et&&(rs=rs.haystackPts,_p.rstyle.haystackPts=[{x:rs[0],y:rs[1]},{x:rs[2],y:rs[3]}]);_p.rstyle.arrowWidth=this.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.arrowShapeWidth},
recalculateEdgeProjections:function(edges){this.findEdgeControlPoints(edges)}},BRp$9,BRp$8,{registerCalculationListeners:function(){var cy=this.cy,elesToUpdate=cy.collection(),r=this,enqueue=function(eles){var dirtyStyleCaches=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;elesToUpdate.merge(eles);if(dirtyStyleCaches)for(dirtyStyleCaches=0;dirtyStyleCaches<eles.length;dirtyStyleCaches++){var rstyle=eles[dirtyStyleCaches]._private.rstyle;rstyle.clean=!1;rstyle.cleanConnected=!1}};r.binder(cy).on("bounds.* dirty.*",
function(e){enqueue(e.target)}).on("style.* background.*",function(e){enqueue(e.target,!1)});var updateEleCalcs=function(willDraw){if(willDraw){var fns=r.onUpdateEleCalcsFns;elesToUpdate.cleanStyle();for(var i=0;i<elesToUpdate.length;i++){var ele=elesToUpdate[i],rstyle=ele._private.rstyle;ele.isNode()&&!rstyle.cleanConnected&&(enqueue(ele.connectedEdges()),rstyle.cleanConnected=!0)}if(fns)for(i=0;i<fns.length;i++)(0,fns[i])(willDraw,elesToUpdate);r.recalculateRenderedStyle(elesToUpdate);elesToUpdate=
cy.collection()}};r.flushRenderedStyleQueue=function(){updateEleCalcs(!0)};r.beforeRender(updateEleCalcs,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(fn){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(fn)},recalculateRenderedStyle:function(eles,useCache){var edges=[],nodes=[];if(!this.destroyed){void 0===useCache&&(useCache=!0);for(var i=0;i<eles.length;i++){var ele=eles[i],_p=ele._private,rstyle=_p.rstyle;!ele.isEdge()||ele.source()._private.rstyle.cleanConnected&&
ele.target()._private.rstyle.cleanConnected||(rstyle.clean=!1);useCache&&rstyle.clean||ele.removed()||"none"===ele.pstyle("display").value||("nodes"===_p.group?nodes.push(ele):edges.push(ele),rstyle.clean=!0)}for(eles=0;eles<nodes.length;eles++)useCache=nodes[eles],i=useCache._private.rstyle,ele=useCache.position(),this.recalculateNodeLabelProjection(useCache),i.nodeX=ele.x,i.nodeY=ele.y,i.nodeW=useCache.pstyle("width").pfValue,i.nodeH=useCache.pstyle("height").pfValue;this.recalculateEdgeProjections(edges);
for(nodes=0;nodes<edges.length;nodes++)useCache=edges[nodes]._private,eles=useCache.rstyle,useCache=useCache.rscratch,eles.srcX=useCache.arrowStartX,eles.srcY=useCache.arrowStartY,eles.tgtX=useCache.arrowEndX,eles.tgtY=useCache.arrowEndY,eles.midX=useCache.midX,eles.midY=useCache.midY,eles.labelAngle=useCache.labelAngle,eles.sourceLabelAngle=useCache.sourceLabelAngle,eles.targetLabelAngle=useCache.targetLabelAngle}}},{updateCachedGrabbedEles:function(){var eles=this.cachedZSortedEles;if(eles){eles.drag=
[];eles.nondrag=[];for(var grabTargets=[],i=0;i<eles.length;i++){var ele=eles[i],rs=ele._private.rscratch;ele.grabbed()&&!ele.isParent()?grabTargets.push(ele):rs.inDragLayer?eles.drag.push(ele):eles.nondrag.push(ele)}for(i=0;i<grabTargets.length;i++)ele=grabTargets[i],eles.drag.push(ele)}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(forceRecalc){forceRecalc||!this.cachedZSortedEles?(forceRecalc=this.cy.mutableElements().toArray(),forceRecalc.sort(zIndexSort),
forceRecalc.interactive=forceRecalc.filter(function(ele){return ele.interactive()}),this.cachedZSortedEles=forceRecalc,this.updateCachedGrabbedEles()):forceRecalc=this.cachedZSortedEles;return forceRecalc}}].forEach(function(props){extend(BRp$5,props)});var BRp$1={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(options){options=options||_staticEmptyObject;void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);void 0===this.lastRedrawTime&&(this.lastRedrawTime=
0);void 0===this.lastDrawTime&&(this.lastDrawTime=0);this.requestedFrame=!0;this.renderOptions=options},beforeRender:function(fn,priority){if(!this.destroyed){null==priority&&error("Priority is not optional for beforeRender");var cbs=this.beforeRenderCallbacks;cbs.push({fn,priority});cbs.sort(function(a,b){return b.priority-a.priority})}}},beforeRenderCallbacks=function(r,willDraw,startTime){r=r.beforeRenderCallbacks;for(var i=0;i<r.length;i++)r[i].fn(willDraw,startTime)};BRp$1.startRenderLoop=function(){var r=
this,cy=r.cy;r.renderLoopStarted||(r.renderLoopStarted=!0,raf(function renderFn(requestTime){if(!r.destroyed){if(!cy.batching())if(r.requestedFrame&&!r.skipFrame){beforeRenderCallbacks(r,!0,requestTime);requestTime=pnow();r.render(r.renderOptions);var endTime=r.lastDrawTime=pnow();void 0===r.averageRedrawTime&&(r.averageRedrawTime=endTime-requestTime);void 0===r.redrawCount&&(r.redrawCount=0);r.redrawCount++;void 0===r.redrawTotalTime&&(r.redrawTotalTime=0);requestTime=endTime-requestTime;r.redrawTotalTime+=
requestTime;r.lastRedrawTime=requestTime;r.averageRedrawTime=r.averageRedrawTime/2+requestTime/2;r.requestedFrame=!1}else beforeRenderCallbacks(r,!1,requestTime);r.skipFrame=!1;raf(renderFn)}}))};var BR=function(options){this.init(options)},BRp=BR.prototype;BRp.clientFunctions="redrawHint render renderTo matchCanvasSize nodeShapeImpl arrowShapeImpl".split(" ");BRp.init=function(options){this.options=options;this.cy=options.cy;var ctr=this.container=options.cy.container(),containerWindow=this.cy.window();
if(containerWindow){var document=containerWindow.document,head=document.head,stylesheetAlreadyExists=null!=document.getElementById("__________cytoscape_stylesheet");0>ctr.className.indexOf("__________cytoscape_container")&&(ctr.className=(ctr.className||"")+" __________cytoscape_container");stylesheetAlreadyExists||(document=document.createElement("style"),document.id="__________cytoscape_stylesheet",document.textContent=".__________cytoscape_container { position: relative; }",head.insertBefore(document,
head.children[0]));"static"===containerWindow.getComputedStyle(ctr).getPropertyValue("position")&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}this.selection=[void 0,void 0,void 0,void 0,0];this.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95];this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1};this.dragData={possibleDragElements:[]};this.touchData={start:null,capture:!1,startPosition:[null,
null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.redraws=0;this.showFps=options.showFps;this.debug=options.debug;this.hideEdgesOnViewport=options.hideEdgesOnViewport;this.textureOnViewport=options.textureOnViewport;this.wheelSensitivity=options.wheelSensitivity;this.motionBlurEnabled=options.motionBlur;this.forcedPixelRatio=number$1(options.pixelRatio)?options.pixelRatio:null;this.motionBlur=options.motionBlur;
this.motionBlurOpacity=options.motionBlurOpacity;this.motionBlurTransparency=1-this.motionBlurOpacity;this.mbPxRBlurry=this.motionBlurPxRatio=1;this.minMbLowQualFrames=4;this.fullQualityMb=!1;this.clearedForMotionBlur=[];this.desktopTapThreshold=options.desktopTapThreshold;this.desktopTapThreshold2=options.desktopTapThreshold*options.desktopTapThreshold;this.touchTapThreshold=options.touchTapThreshold;this.touchTapThreshold2=options.touchTapThreshold*options.touchTapThreshold;this.tapholdDuration=
500;this.bindings=[];this.beforeRenderCallbacks=[];this.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100};this.registerNodeShapes();this.registerArrowShapes();this.registerCalculationListeners()};BRp.notify=function(eventName,eles){eles=this.cy;if(!this.destroyed)if("init"===eventName)this.load();else if("destroy"===eventName)this.destroy();else{("add"===eventName||"remove"===eventName||"move"===eventName&&eles.hasCompoundNodes()||"load"===eventName||
"zorder"===eventName||"mount"===eventName)&&this.invalidateCachedZSortedEles();"viewport"===eventName&&this.redrawHint("select",!0);if("load"===eventName||"resize"===eventName||"mount"===eventName)this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.container);this.redrawHint("eles",!0);this.redrawHint("drag",!0);this.startRenderLoop();this.redraw()}};BRp.destroy=function(){this.destroyed=!0;this.cy.stopAnimationLoop();for(var i=0;i<this.bindings.length;i++){var b=this.bindings[i],
tgt=b.target;(tgt.off||tgt.removeEventListener).apply(tgt,b.args)}this.bindings=[];this.beforeRenderCallbacks=[];this.onUpdateEleCalcsFns=[];this.removeObserver&&this.removeObserver.disconnect();this.styleObserver&&this.styleObserver.disconnect();this.resizeObserver&&this.resizeObserver.disconnect();if(this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(e){}};BRp.isHeadless=function(){return!1};[{arrowShapeWidth:.3,registerArrowShapes:function(){var arrowShapes=this.arrowShapes=
{},renderer=this,bbCollide=function(x,y,size,angle,translation,edgeWidth,padding){angle=translation.x+size/2+padding;edgeWidth=translation.y-size/2-padding;var y2=translation.y+size/2+padding;return translation.x-size/2-padding<=x&&x<=angle&&edgeWidth<=y&&y<=y2},transform=function(x,y,size,angle,translation){return{x:(x*Math.cos(angle)-y*Math.sin(angle))*size+translation.x,y:(x*Math.sin(angle)+y*Math.cos(angle))*size+translation.y}},transformPoints=function(pts,size,angle,translation){for(var retPts=
[],i=0;i<pts.length;i+=2)retPts.push(transform(pts[i],pts[i+1],size,angle,translation));return retPts},pointsToArr=function(pts){for(var ret=[],i=0;i<pts.length;i++){var p=pts[i];ret.push(p.x,p.y)}return ret},standardGap=function(edge){return edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").pfValue*2},defineArrowShape=function(name,defn){string$jscomp$0(defn)&&(defn=arrowShapes[defn]);arrowShapes[name]=extend({name,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(x,y,size,angle,translation,
padding){size=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation));return pointInsidePolygonPoints(x,y,size)},roughCollide:bbCollide,draw:function(context,size,angle,translation){size=transformPoints(this.points,size,angle,translation);renderer.arrowShapeImpl("polygon")(context,size)},spacing:function(edge){return 0},gap:standardGap},defn)};defineArrowShape("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify});defineArrowShape("triangle",{points:[-.15,
-.3,0,0,.15,-.3]});defineArrowShape("arrow","triangle");defineArrowShape("triangle-backcurve",{points:arrowShapes.triangle.points,controlPoint:[0,-.15],roughCollide:bbCollide,draw:function(context,size,angle,translation,edgeWidth){edgeWidth=transformPoints(this.points,size,angle,translation);var ctrlPt=this.controlPoint;size=transform(ctrlPt[0],ctrlPt[1],size,angle,translation);renderer.arrowShapeImpl(this.name)(context,edgeWidth,size)},gap:function(edge){return.8*standardGap(edge)}});defineArrowShape("triangle-tee",
{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(x,y,size,angle,translation,edgeWidth,padding){edgeWidth=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation));size=pointsToArr(transformPoints(this.pointsTee,size+2*padding,angle,translation));return pointInsidePolygonPoints(x,y,edgeWidth)||pointInsidePolygonPoints(x,y,size)},draw:function(context,size,angle,translation,edgeWidth){edgeWidth=transformPoints(this.points,size,angle,
translation);size=transformPoints(this.pointsTee,size,angle,translation);renderer.arrowShapeImpl(this.name)(context,edgeWidth,size)}});defineArrowShape("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(x,y,size,angle,translation,edgeWidth,padding){edgeWidth=Math.pow(translation.x-x,2)+Math.pow(translation.y-y,2)<=Math.pow((size+2*padding)*this.radius,2);size=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation));return pointInsidePolygonPoints(x,
y,size)||edgeWidth},draw:function(context,size,angle,translation,edgeWidth){angle=transformPoints(this.pointsTr,size,angle,translation);renderer.arrowShapeImpl(this.name)(context,angle,translation.x,translation.y,this.radius*size)},spacing:function(edge){return renderer.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.radius}});defineArrowShape("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(size,
edgeWidth){var p=this.baseCrossLinePts.slice();size=edgeWidth/size;p[3]-=size;p[5]-=size;return p},collide:function(x,y,size,angle,translation,edgeWidth,padding){var triPts=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation));size=pointsToArr(transformPoints(this.crossLinePts(size,edgeWidth),size+2*padding,angle,translation));return pointInsidePolygonPoints(x,y,triPts)||pointInsidePolygonPoints(x,y,size)},draw:function(context,size,angle,translation,edgeWidth){var triPts=transformPoints(this.points,
size,angle,translation);size=transformPoints(this.crossLinePts(size,edgeWidth),size,angle,translation);renderer.arrowShapeImpl(this.name)(context,triPts,size)}});defineArrowShape("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(edge){return.525*standardGap(edge)}});defineArrowShape("circle",{radius:.15,collide:function(x,y,size,angle,translation,edgeWidth,padding){return Math.pow(translation.x-x,2)+Math.pow(translation.y-y,2)<=Math.pow((size+2*padding)*this.radius,2)},draw:function(context,
size,angle,translation,edgeWidth){renderer.arrowShapeImpl(this.name)(context,translation.x,translation.y,this.radius*size)},spacing:function(edge){return renderer.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.radius}});defineArrowShape("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(edge){return 1},gap:function(edge){return 1}});defineArrowShape("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]});defineArrowShape("diamond",{points:[-.15,-.15,0,-.3,
.15,-.15,0,0],gap:function(edge){return edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").value}});defineArrowShape("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(edge){return.95*edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").value}})}},BRp$5,{getCachedImage:function(url,crossOrigin,onLoad){var imageCache=this.imageCache=this.imageCache||{},cache=imageCache[url];if(cache)return cache.image.complete||cache.image.addEventListener("load",onLoad),cache.image;
cache=imageCache[url]=imageCache[url]||{};var image=cache.image=new Image;image.addEventListener("load",onLoad);image.addEventListener("error",function(){image.error=!0});"data:"!==url.substring(0,5).toLowerCase()&&(image.crossOrigin="null"===crossOrigin?null:crossOrigin);image.src=url;return image}},{registerBinding:function(target,event,handler,useCapture){var args=Array.prototype.slice.apply(arguments,[1]),b=this.binder(target);return b.on.apply(b,args)},binder:function(tgt){var r=this,containerWindow=
r.cy.window(),JSCompiler_temp;(JSCompiler_temp=tgt===containerWindow||tgt===containerWindow.document||tgt===containerWindow.document.body)||(JSCompiler_temp="undefined"===typeof HTMLElement?!1:tgt instanceof HTMLElement);var tgtIsDom=JSCompiler_temp;if(null==r.supportsPassiveEvents){var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){return supportsPassive=!0}});containerWindow.addEventListener("test",null,opts)}catch(err){}r.supportsPassiveEvents=supportsPassive}containerWindow=
function(event,handler,useCapture){var args=Array.prototype.slice.call(arguments);tgtIsDom&&r.supportsPassiveEvents&&(args[2]={capture:null!=useCapture?useCapture:!1,passive:!1,once:!1});r.bindings.push({target:tgt,args});(tgt.addEventListener||tgt.on).apply(tgt,args);return this};return{on:containerWindow,addEventListener:containerWindow,addListener:containerWindow,bind:containerWindow}},nodeIsDraggable:function(node){return node&&node.isNode()&&!node.locked()&&node.grabbable()},nodeIsGrabbable:function(node){return this.nodeIsDraggable(node)&&
node.interactive()},load:function(){var r=this,containerWindow=r.cy.window(),isSelected=function(ele){return ele.selected()},triggerEvents=function(target,names,e,position){null==target&&(target=r.cy);for(var i=0;i<names.length;i++)target.emit({originalEvent:e,type:names[i],position})},allowPanningPassthrough=function(down,downs){var allowPassthrough=!0;if(r.cy.hasCompoundNodes()&&down&&down.pannable())for(var i=0;downs&&i<downs.length;i++){if(down=downs[i],down.isNode()&&down.isParent()&&!down.pannable()){allowPassthrough=
!1;break}}else allowPassthrough=!0;return allowPassthrough},setInDragLayer=function(ele){ele[0]._private.rscratch.inDragLayer=!0},addToDragList=function(ele,opts){opts=opts.addToList;opts.has(ele)||!ele.grabbable()||ele.locked()||(opts.merge(ele),ele[0]._private.grabbed=!0)},addDescendantsToDrag=function(node,opts){!node.cy().hasCompoundNodes()||null==opts.inDragLayer&&null==opts.addToList||(node=node.descendants(),opts.inDragLayer&&(node.forEach(setInDragLayer),node.connectedEdges().forEach(setInDragLayer)),
opts.addToList&&addToDragList(node,opts))},addNodesToDrag=function(nodes,opts){opts=opts||{};var hasCompoundNodes=nodes.cy().hasCompoundNodes();opts.inDragLayer&&(nodes.forEach(setInDragLayer),nodes.neighborhood().stdFilter(function(ele){return!hasCompoundNodes||ele.isEdge()}).forEach(setInDragLayer));opts.addToList&&nodes.forEach(function(ele){addToDragList(ele,opts)});addDescendantsToDrag(nodes,opts);updateAncestorsInDragLayer(nodes,{inDragLayer:opts.inDragLayer});r.updateCachedGrabbedEles()},freeDraggedElements=
function(grabbedEles){grabbedEles&&(r.getCachedZSortedEles().forEach(function(ele){ele[0]._private.grabbed=!1;ele[0]._private.rscratch.inDragLayer=!1;ele[0]._private.rscratch.isGrabTarget=!1}),r.updateCachedGrabbedEles())},updateAncestorsInDragLayer=function(node,opts){if((null!=opts.inDragLayer||null!=opts.addToList)&&node.cy().hasCompoundNodes()){var parent=node.ancestors().orphans();parent.same(node)||(node=parent.descendants().spawnSelf().merge(parent).unmerge(node).unmerge(node.descendants()),
parent=node.connectedEdges(),opts.inDragLayer&&(parent.forEach(setInDragLayer),node.forEach(setInDragLayer)),opts.addToList&&node.forEach(function(ele){addToDragList(ele,opts)}))}},blurActiveDomElement=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},haveMutationsApi="undefined"!==typeof MutationObserver,haveResizeObserverApi="undefined"!==typeof ResizeObserver;haveMutationsApi?(r.removeObserver=new MutationObserver(function(mutns){for(var i=
0;i<mutns.length;i++){var rNodes=mutns[i].removedNodes;if(rNodes)for(var j=0;j<rNodes.length;j++)if(rNodes[j]===r.container){r.destroy();break}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(e){r.destroy()});var onResize=debounce__default["default"](function(){r.cy.resize()},100);haveMutationsApi&&(r.styleObserver=new MutationObserver(onResize),r.styleObserver.observe(r.container,{attributes:!0}));
r.registerBinding(containerWindow,"resize",onResize);haveResizeObserverApi&&(r.resizeObserver=new ResizeObserver(onResize),r.resizeObserver.observe(r.container));var invalidateCoords=function(){r.invalidateContainerClientCoordsCache()};(function(domEle,fn){for(;null!=domEle;)fn(domEle),domEle=domEle.parentNode})(r.container,function(domEle){r.registerBinding(domEle,"transitionend",invalidateCoords);r.registerBinding(domEle,"animationend",invalidateCoords);r.registerBinding(domEle,"scroll",invalidateCoords)});
r.registerBinding(r.container,"contextmenu",function(e){e.preventDefault()});var eventInContainer=function(e){var containerPageCoords=r.findContainerClientCoords(),x=containerPageCoords[0],y=containerPageCoords[1],width=containerPageCoords[2];containerPageCoords=containerPageCoords[3];for(var positions=e.touches?e.touches:[e],atLeastOnePosInside=!1,i=0;i<positions.length;i++){var p=positions[i];if(x<=p.clientX&&p.clientX<=x+width&&y<=p.clientY&&p.clientY<=y+containerPageCoords){atLeastOnePosInside=
!0;break}}if(!atLeastOnePosInside)return!1;x=r.container;e=e.target.parentNode;for(y=!1;e;){if(e===x){y=!0;break}e=e.parentNode}return y?!0:!1};r.registerBinding(r.container,"mousedown",function(e){if(eventInContainer(e)){e.preventDefault();blurActiveDomElement();r.hoverData.capture=!0;r.hoverData.which=e.which;var cy=r.cy,gpos=[e.clientX,e.clientY],pos=r.projectIntoViewport(gpos[0],gpos[1]),select=r.selection,nears=r.findNearestElements(pos[0],pos[1],!0,!1),near=nears[0],draggedElements=r.dragData.possibleDragElements;
r.hoverData.mdownPos=pos;r.hoverData.mdownGPos=gpos;gpos=function(){r.hoverData.tapholdCancelled=!1;clearTimeout(r.hoverData.tapholdTimeout);r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var ele=r.hoverData.down;ele?ele.emit({originalEvent:e,type:"taphold",position:{x:pos[0],y:pos[1]}}):cy.emit({originalEvent:e,type:"taphold",position:{x:pos[0],y:pos[1]}})}},r.tapholdDuration)};if(3==e.which)r.hoverData.cxtStarted=!0,nears={originalEvent:e,type:"cxttapstart",position:{x:pos[0],
y:pos[1]}},near?(near.activate(),near.emit(nears),r.hoverData.down=near):cy.emit(nears),r.hoverData.downTime=(new Date).getTime(),r.hoverData.cxtDragged=!1;else if(1==e.which){near&&near.activate();if(null!=near&&r.nodeIsGrabbable(near)){var makeEvent=function(type){return{originalEvent:e,type,position:{x:pos[0],y:pos[1]}}},triggerGrab=function(ele){ele.emit(makeEvent("grab"))};near[0]._private.rscratch.isGrabTarget=!0;if(near.selected()){draggedElements=r.dragData.possibleDragElements=cy.collection();
var selectedNodes=cy.$(function(ele){return ele.isNode()&&ele.selected()&&r.nodeIsGrabbable(ele)});addNodesToDrag(selectedNodes,{addToList:draggedElements});near.emit(makeEvent("grabon"));selectedNodes.forEach(triggerGrab)}else draggedElements=r.dragData.possibleDragElements=cy.collection(),addNodesToDrag(near,{addToList:draggedElements}),near.emit(makeEvent("grabon")).emit(makeEvent("grab"));r.redrawHint("eles",!0);r.redrawHint("drag",!0)}r.hoverData.down=near;r.hoverData.downs=nears;r.hoverData.downTime=
(new Date).getTime();triggerEvents(near,["mousedown","tapstart","vmousedown"],e,{x:pos[0],y:pos[1]});null==near?(select[4]=1,r.data.bgActivePosistion={x:pos[0],y:pos[1]},r.redrawHint("select",!0),r.redraw()):near.pannable()&&(select[4]=1);gpos()}select[0]=select[2]=pos[0];select[1]=select[3]=pos[1]}},!1);r.registerBinding(containerWindow,"mousemove",function(e){if(r.hoverData.capture||eventInContainer(e)){var preventDefault=!1,cy=r.cy,zoom=cy.zoom();preventDefault=[e.clientX,e.clientY];var pos=r.projectIntoViewport(preventDefault[0],
preventDefault[1]),mdownPos=r.hoverData.mdownPos,mdownGPos=r.hoverData.mdownGPos,select=r.selection,near=null;r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.selecting||(near=r.findNearestElement(pos[0],pos[1],!0,!1));var last=r.hoverData.last,down=r.hoverData.down,disp=[pos[0]-select[2],pos[1]-select[3]],draggedElements=r.dragData.possibleDragElements;if(mdownGPos){var isOverThresholdDrag=preventDefault[0]-mdownGPos[0];preventDefault=preventDefault[1]-mdownGPos[1];r.hoverData.isOverThresholdDrag=
isOverThresholdDrag=isOverThresholdDrag*isOverThresholdDrag+preventDefault*preventDefault>=r.desktopTapThreshold2}mdownGPos=e.shiftKey||e.metaKey||e.ctrlKey;isOverThresholdDrag&&(r.hoverData.tapholdCancelled=!0);var updateDragDelta=function(){var dragDelta=r.hoverData.dragDelta=r.hoverData.dragDelta||[];0===dragDelta.length?(dragDelta.push(disp[0]),dragDelta.push(disp[1])):(dragDelta[0]+=disp[0],dragDelta[1]+=disp[1])};preventDefault=!0;triggerEvents(near,["mousemove","vmousemove","tapdrag"],e,{x:pos[0],
y:pos[1]});var goIntoBoxMode=function(){r.data.bgActivePosistion=void 0;r.hoverData.selecting||cy.emit({originalEvent:e,type:"boxstart",position:{x:pos[0],y:pos[1]}});select[4]=1;r.hoverData.selecting=!0;r.redrawHint("select",!0);r.redraw()};3===r.hoverData.which?isOverThresholdDrag&&(draggedElements={originalEvent:e,type:"cxtdrag",position:{x:pos[0],y:pos[1]}},down?down.emit(draggedElements):cy.emit(draggedElements),r.hoverData.cxtDragged=!0,r.hoverData.cxtOver&&near===r.hoverData.cxtOver||(r.hoverData.cxtOver&&
r.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:pos[0],y:pos[1]}}),(r.hoverData.cxtOver=near)&&near.emit({originalEvent:e,type:"cxtdragover",position:{x:pos[0],y:pos[1]}}))):r.hoverData.dragging?(preventDefault=!0,cy.panningEnabled()&&cy.userPanningEnabled()&&(r.hoverData.justStartedPan?(draggedElements=r.hoverData.mdownPos,draggedElements={x:(pos[0]-draggedElements[0])*zoom,y:(pos[1]-draggedElements[1])*zoom},r.hoverData.justStartedPan=!1):draggedElements={x:disp[0]*zoom,
y:disp[1]*zoom},cy.panBy(draggedElements),cy.emit("dragpan"),r.hoverData.dragged=!0),pos=r.projectIntoViewport(e.clientX,e.clientY)):1!=select[4]||null!=down&&!down.pannable()?(down&&down.pannable()&&down.active()&&down.unactivate(),down&&down.grabbed()||near==last||(last&&triggerEvents(last,["mouseout","tapdragout"],e,{x:pos[0],y:pos[1]}),near&&triggerEvents(near,["mouseover","tapdragover"],e,{x:pos[0],y:pos[1]}),r.hoverData.last=near),down&&(isOverThresholdDrag?cy.boxSelectionEnabled()&&mdownGPos?
(down&&down.grabbed()&&(freeDraggedElements(draggedElements),down.emit("freeon"),draggedElements.emit("free"),r.dragData.didDrag&&(down.emit("dragfreeon"),draggedElements.emit("dragfree"))),goIntoBoxMode()):down&&down.grabbed()&&r.nodeIsDraggable(down)&&((near=!r.dragData.didDrag)&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||addNodesToDrag(draggedElements,{inDragLayer:!0}),zoom={x:0,y:0},number$1(disp[0])&&number$1(disp[1])&&(zoom.x+=disp[0],zoom.y+=disp[1],near&&(near=
r.hoverData.dragDelta)&&number$1(near[0])&&number$1(near[1])&&(zoom.x+=near[0],zoom.y+=near[1])),r.hoverData.draggingEles=!0,draggedElements.silentShift(zoom).emit("position drag"),r.redrawHint("drag",!0),r.redraw()):updateDragDelta()),preventDefault=!0):isOverThresholdDrag&&(r.hoverData.dragging||!cy.boxSelectionEnabled()||!mdownGPos&&cy.panningEnabled()&&cy.userPanningEnabled()?!r.hoverData.selecting&&cy.panningEnabled()&&cy.userPanningEnabled()&&allowPanningPassthrough(down,r.hoverData.downs)&&
(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,select[4]=0,r.data.bgActivePosistion=array2point(mdownPos),r.redrawHint("select",!0),r.redraw()):goIntoBoxMode(),down&&down.pannable()&&down.active()&&down.unactivate());select[2]=pos[0];select[3]=pos[1];if(preventDefault)return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}},!1);var clickTimeout,didDoubleClick,prevClickTimeStamp;r.registerBinding(containerWindow,"mouseup",function(e){if(r.hoverData.capture){r.hoverData.capture=
!1;var cy=r.cy,pos=r.projectIntoViewport(e.clientX,e.clientY),select=r.selection,near=r.findNearestElement(pos[0],pos[1],!0,!1),draggedElements=r.dragData.possibleDragElements,down=r.hoverData.down,multSelKeyDown=e.shiftKey||e.metaKey||e.ctrlKey;r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw());r.hoverData.tapholdCancelled=!0;r.data.bgActivePosistion=void 0;down&&down.unactivate();3===r.hoverData.which?(draggedElements={originalEvent:e,type:"cxttapend",position:{x:pos[0],y:pos[1]}},
down?down.emit(draggedElements):cy.emit(draggedElements),r.hoverData.cxtDragged||(draggedElements={originalEvent:e,type:"cxttap",position:{x:pos[0],y:pos[1]}},down?down.emit(draggedElements):cy.emit(draggedElements)),r.hoverData.cxtDragged=!1,r.hoverData.which=null):1===r.hoverData.which&&(triggerEvents(near,["mouseup","tapend","vmouseup"],e,{x:pos[0],y:pos[1]}),r.dragData.didDrag||r.hoverData.dragged||r.hoverData.selecting||r.hoverData.isOverThresholdDrag||(triggerEvents(down,["click","tap","vclick"],
e,{x:pos[0],y:pos[1]}),didDoubleClick=!1,e.timeStamp-prevClickTimeStamp<=cy.multiClickDebounceTime()?(clickTimeout&&clearTimeout(clickTimeout),didDoubleClick=!0,prevClickTimeStamp=null,triggerEvents(down,["dblclick","dbltap","vdblclick"],e,{x:pos[0],y:pos[1]})):(clickTimeout=setTimeout(function(){didDoubleClick||triggerEvents(down,["oneclick","onetap","voneclick"],e,{x:pos[0],y:pos[1]})},cy.multiClickDebounceTime()),prevClickTimeStamp=e.timeStamp)),null!=down||r.dragData.didDrag||r.hoverData.selecting||
r.hoverData.dragged||e.shiftKey||e.metaKey||e.ctrlKey||(cy.$(isSelected).unselect(["tapunselect"]),0<draggedElements.length&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=draggedElements=cy.collection()),near!=down||r.dragData.didDrag||r.hoverData.selecting||null==near||!near._private.selectable||(r.hoverData.dragging||("additive"===cy.selectionType()||multSelKeyDown?near.selected()?near.unselect(["tapunselect"]):near.select(["tapselect"]):multSelKeyDown||(cy.$(isSelected).unmerge(near).unselect(["tapunselect"]),
near.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting&&(near=cy.collection(r.getAllInBox(select[0],select[1],select[2],select[3])),r.redrawHint("select",!0),0<near.length&&r.redrawHint("eles",!0),cy.emit({type:"boxend",originalEvent:e,position:{x:pos[0],y:pos[1]}}),"additive"!==cy.selectionType()&&(multSelKeyDown||cy.$(isSelected).unmerge(near).unselect()),near.emit("box").stdFilter(function(ele){return ele.selectable()&&!ele.selected()}).select().emit("boxselect"),r.redraw()),
r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),select[4]||(r.redrawHint("drag",!0),r.redrawHint("eles",!0),cy=down&&down.grabbed(),freeDraggedElements(draggedElements),cy&&(down.emit("freeon"),draggedElements.emit("free"),r.dragData.didDrag&&(down.emit("dragfreeon"),draggedElements.emit("dragfree")))));select[4]=0;r.hoverData.down=null;r.hoverData.cxtStarted=!1;r.hoverData.draggingEles=!1;r.hoverData.selecting=!1;r.hoverData.isOverThresholdDrag=
!1;r.dragData.didDrag=!1;r.hoverData.dragged=!1;r.hoverData.dragDelta=[];r.hoverData.mdownPos=null;r.hoverData.mdownGPos=null}},!1);var wheelHandler=function(e){if(!r.scrollingPage){var cy=r.cy,zoom=cy.zoom(),pan=cy.pan(),pos=r.projectIntoViewport(e.clientX,e.clientY);zoom=[pos[0]*zoom+pan.x,pos[1]*zoom+pan.y];r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||0!==r.selection[4]?e.preventDefault():cy.panningEnabled()&&cy.userPanningEnabled()&&cy.zoomingEnabled()&&cy.userZoomingEnabled()&&
(e.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1;r.redrawHint("eles",!0);r.redraw()},150),pan=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1E3:e.wheelDelta/1E3,pan*=r.wheelSensitivity,1===e.deltaMode&&(pan*=33),pan=cy.zoom()*Math.pow(10,pan),"gesturechange"===e.type&&(pan=r.gestureStartZoom*e.scale),cy.zoom({level:pan,renderedPosition:{x:zoom[0],y:zoom[1]}}),cy.emit("gesturechange"===e.type?
"pinchzoom":"scrollzoom"))}};r.registerBinding(r.container,"wheel",wheelHandler,!0);r.registerBinding(containerWindow,"scroll",function(e){r.scrollingPage=!0;clearTimeout(r.scrollingPageTimeout);r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0);r.registerBinding(r.container,"gesturestart",function(e){r.gestureStartZoom=r.cy.zoom();r.hasTouchStarted||e.preventDefault()},!0);r.registerBinding(r.container,"gesturechange",function(e){r.hasTouchStarted||wheelHandler(e)},!0);r.registerBinding(r.container,
"mouseout",function(e){var pos=r.projectIntoViewport(e.clientX,e.clientY);r.cy.emit({originalEvent:e,type:"mouseout",position:{x:pos[0],y:pos[1]}})},!1);r.registerBinding(r.container,"mouseover",function(e){var pos=r.projectIntoViewport(e.clientX,e.clientY);r.cy.emit({originalEvent:e,type:"mouseover",position:{x:pos[0],y:pos[1]}})},!1);var f1x1,f1y1,f2x1,f2y1,distance1,distance1Sq,center1,modelCenter1,offsetLeft,offsetTop,containerWidth,containerHeight,twoFingersStartInside,touchstartHandler;r.registerBinding(r.container,
"touchstart",touchstartHandler=function(e){r.hasTouchStarted=!0;if(eventInContainer(e)){blurActiveDomElement();r.touchData.capture=!0;r.data.bgActivePosistion=void 0;var cy=r.cy,now=r.touchData.now,earlier=r.touchData.earlier;if(e.touches[0]){var pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);now[0]=pos[0];now[1]=pos[1]}e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),now[2]=pos[0],now[3]=pos[1]);e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,
e.touches[2].clientY),now[4]=pos[0],now[5]=pos[1]);if(e.touches[1]){r.touchData.singleTouchMoved=!0;freeDraggedElements(r.dragData.touchDragEles);var offsets=r.findContainerClientCoords();offsetLeft=offsets[0];offsetTop=offsets[1];containerWidth=offsets[2];containerHeight=offsets[3];f1x1=e.touches[0].clientX-offsetLeft;f1y1=e.touches[0].clientY-offsetTop;f2x1=e.touches[1].clientX-offsetLeft;f2y1=e.touches[1].clientY-offsetTop;twoFingersStartInside=0<=f1x1&&f1x1<=containerWidth&&0<=f2x1&&f2x1<=containerWidth&&
0<=f1y1&&f1y1<=containerHeight&&0<=f2y1&&f2y1<=containerHeight;offsets=cy.pan();var zoom=cy.zoom();distance1=Math.sqrt((f2x1-f1x1)*(f2x1-f1x1)+(f2y1-f1y1)*(f2y1-f1y1));distance1Sq=(f2x1-f1x1)*(f2x1-f1x1)+(f2y1-f1y1)*(f2y1-f1y1);center1=[(f1x1+f2x1)/2,(f1y1+f2y1)/2];modelCenter1=[(center1[0]-offsets.x)/zoom,(center1[1]-offsets.y)/zoom];if(4E4>distance1Sq&&!e.touches[2]){earlier=r.findNearestElement(now[0],now[1],!0,!0);pos=r.findNearestElement(now[2],now[3],!0,!0);earlier&&earlier.isNode()?(earlier.activate().emit({originalEvent:e,
type:"cxttapstart",position:{x:now[0],y:now[1]}}),r.touchData.start=earlier):pos&&pos.isNode()?(pos.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:now[0],y:now[1]}}),r.touchData.start=pos):cy.emit({originalEvent:e,type:"cxttapstart",position:{x:now[0],y:now[1]}});r.touchData.start&&(r.touchData.start._private.grabbed=!1);r.touchData.cxt=!0;r.touchData.cxtDragged=!1;r.data.bgActivePosistion=void 0;r.redraw();return}}if(e.touches[2])cy.boxSelectionEnabled()&&e.preventDefault();else if(!e.touches[1]&&
e.touches[0]){zoom=r.findNearestElements(now[0],now[1],!0,!0);offsets=zoom[0];if(null!=offsets&&(offsets.activate(),r.touchData.start=offsets,r.touchData.starts=zoom,r.nodeIsGrabbable(offsets))){zoom=r.dragData.touchDragEles=cy.collection();var selectedNodes=null;r.redrawHint("eles",!0);r.redrawHint("drag",!0);offsets.selected()?(selectedNodes=cy.$(function(ele){return ele.selected()&&r.nodeIsGrabbable(ele)}),addNodesToDrag(selectedNodes,{addToList:zoom})):addNodesToDrag(offsets,{addToList:zoom});
offsets[0]._private.rscratch.isGrabTarget=!0;var makeEvent=function(type){return{originalEvent:e,type,position:{x:now[0],y:now[1]}}};offsets.emit(makeEvent("grabon"));selectedNodes?selectedNodes.forEach(function(n){n.emit(makeEvent("grab"))}):offsets.emit(makeEvent("grab"))}triggerEvents(offsets,["touchstart","tapstart","vmousedown"],e,{x:now[0],y:now[1]});null==offsets&&(r.data.bgActivePosistion={x:pos[0],y:pos[1]},r.redrawHint("select",!0),r.redraw());r.touchData.singleTouchMoved=!1;r.touchData.singleTouchStartTime=
+new Date;clearTimeout(r.touchData.tapholdTimeout);r.touchData.tapholdTimeout=setTimeout(function(){!1!==r.touchData.singleTouchMoved||r.pinching||r.touchData.selecting||triggerEvents(r.touchData.start,["taphold"],e,{x:now[0],y:now[1]})},r.tapholdDuration)}if(1<=e.touches.length){cy=r.touchData.startPosition=[null,null,null,null,null,null];for(pos=0;pos<now.length;pos++)cy[pos]=earlier[pos]=now[pos];cy=e.touches[0];r.touchData.startGPosition=[cy.clientX,cy.clientY]}}},!1);var touchmoveHandler;r.registerBinding(window,
"touchmove",touchmoveHandler=function(e){var capture=r.touchData.capture;if(capture||eventInContainer(e)){var select=r.selection,cy=r.cy,now=r.touchData.now,earlier=r.touchData.earlier,zoom=cy.zoom();if(e.touches[0]){var pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);now[0]=pos[0];now[1]=pos[1]}e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),now[2]=pos[0],now[3]=pos[1]);e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),
now[4]=pos[0],now[5]=pos[1]);pos=r.touchData.startGPosition;if(capture&&e.touches[0]&&pos){for(var disp=[],j=0;j<now.length;j++)disp[j]=now[j]-earlier[j];var dx=e.touches[0].clientX-pos[0],dy=e.touches[0].clientY-pos[1];var isOverThresholdDrag=dx*dx+dy*dy>=r.touchTapThreshold2}if(capture&&r.touchData.cxt){e.preventDefault();pos=e.touches[0].clientX-offsetLeft;j=e.touches[0].clientY-offsetTop;var f2x2=e.touches[1].clientX-offsetLeft,f2y2=e.touches[1].clientY-offsetTop;pos=(f2x2-pos)*(f2x2-pos)+(f2y2-
j)*(f2y2-j);if(2.25<=pos/distance1Sq||22500<=pos)r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),pos={originalEvent:e,type:"cxttapend",position:{x:now[0],y:now[1]}},r.touchData.start?(r.touchData.start.unactivate().emit(pos),r.touchData.start=null):cy.emit(pos)}if(capture&&r.touchData.cxt){pos={originalEvent:e,type:"cxtdrag",position:{x:now[0],y:now[1]}};r.data.bgActivePosistion=void 0;r.redrawHint("select",!0);r.touchData.start?r.touchData.start.emit(pos):cy.emit(pos);
r.touchData.start&&(r.touchData.start._private.grabbed=!1);r.touchData.cxtDragged=!0;var near=r.findNearestElement(now[0],now[1],!0,!0);r.touchData.cxtOver&&near===r.touchData.cxtOver||(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:now[0],y:now[1]}}),(r.touchData.cxtOver=near)&&near.emit({originalEvent:e,type:"cxtdragover",position:{x:now[0],y:now[1]}}))}else if(capture&&e.touches[2]&&cy.boxSelectionEnabled())e.preventDefault(),r.data.bgActivePosistion=
void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||cy.emit({originalEvent:e,type:"boxstart",position:{x:now[0],y:now[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,select[4]=1,select&&0!==select.length&&void 0!==select[0]?(select[2]=(now[0]+now[2]+now[4])/3,select[3]=(now[1]+now[3]+now[5])/3):(select[0]=(now[0]+now[2]+now[4])/3,select[1]=(now[1]+now[3]+now[5])/3,select[2]=(now[0]+now[2]+now[4])/3+1,select[3]=(now[1]+now[3]+now[5])/3+1),r.redrawHint("select",!0),r.redraw();else if(capture&&
e.touches[1]&&!r.touchData.didSelect&&cy.zoomingEnabled()&&cy.panningEnabled()&&cy.userZoomingEnabled()&&cy.userPanningEnabled()){e.preventDefault();r.data.bgActivePosistion=void 0;r.redrawHint("select",!0);if(select=r.dragData.touchDragEles)for(r.redrawHint("drag",!0),j=0;j<select.length;j++)zoom=select[j]._private,zoom.grabbed=!1,zoom.rscratch.inDragLayer=!1;zoom=r.touchData.start;pos=e.touches[0].clientX-offsetLeft;j=e.touches[0].clientY-offsetTop;f2x2=e.touches[1].clientX-offsetLeft;f2y2=e.touches[1].clientY-
offsetTop;disp=Math.sqrt((f2x2-pos)*(f2x2-pos)+(f2y2-j)*(f2y2-j));isOverThresholdDrag=disp/distance1;if(twoFingersStartInside){dx=(pos-f1x1+(f2x2-f2x1))/2;dy=(j-f1y1+(f2y2-f2y1))/2;near=cy.zoom();isOverThresholdDrag*=near;select=cy.pan();var ctrx=modelCenter1[0]*near+select.x,ctry=modelCenter1[1]*near+select.y;dx={x:-isOverThresholdDrag/near*(ctrx-select.x-dx)+ctrx,y:-isOverThresholdDrag/near*(ctry-select.y-dy)+ctry};zoom&&zoom.active()&&(select=r.dragData.touchDragEles,freeDraggedElements(select),
r.redrawHint("drag",!0),r.redrawHint("eles",!0),zoom.unactivate().emit("freeon"),select.emit("free"),r.dragData.didDrag&&(zoom.emit("dragfreeon"),select.emit("dragfree")));cy.viewport({zoom:isOverThresholdDrag,pan:dx,cancelOnFailedZoom:!0});cy.emit("pinchzoom");distance1=disp;f1x1=pos;f1y1=j;f2x1=f2x2;f2y1=f2y2;r.pinching=!0}e.touches[0]&&(pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),now[0]=pos[0],now[1]=pos[1]);e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,
e.touches[1].clientY),now[2]=pos[0],now[3]=pos[1]);e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),now[4]=pos[0],now[5]=pos[1])}else if(e.touches[0]&&!r.touchData.didSelect){pos=r.touchData.start;j=r.touchData.last;r.hoverData.draggingEles||r.swipePanning||(near=r.findNearestElement(now[0],now[1],!0,!0));capture&&null!=pos&&e.preventDefault();capture&&null!=pos&&r.nodeIsDraggable(pos)&&(isOverThresholdDrag?(select=r.dragData.touchDragEles,(f2y2=!r.dragData.didDrag)&&
addNodesToDrag(select,{inDragLayer:!0}),r.dragData.didDrag=!0,f2x2={x:0,y:0},number$1(disp[0])&&number$1(disp[1])&&(f2x2.x+=disp[0],f2x2.y+=disp[1],f2y2&&(r.redrawHint("eles",!0),(f2y2=r.touchData.dragDelta)&&number$1(f2y2[0])&&number$1(f2y2[1])&&(f2x2.x+=f2y2[0],f2x2.y+=f2y2[1]))),r.hoverData.draggingEles=!0,select.silentShift(f2x2).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==earlier[0]&&r.touchData.startPosition[1]==earlier[1]&&r.redrawHint("eles",!0),r.redraw()):
(f2y2=r.touchData.dragDelta=r.touchData.dragDelta||[],0===f2y2.length?(f2y2.push(disp[0]),f2y2.push(disp[1])):(f2y2[0]+=disp[0],f2y2[1]+=disp[1])));triggerEvents(pos||near,["touchmove","tapdrag","vmousemove"],e,{x:now[0],y:now[1]});pos&&pos.grabbed()||near==j||(j&&j.emit({originalEvent:e,type:"tapdragout",position:{x:now[0],y:now[1]}}),near&&near.emit({originalEvent:e,type:"tapdragover",position:{x:now[0],y:now[1]}}));r.touchData.last=near;if(capture)for(j=0;j<now.length;j++)now[j]&&r.touchData.startPosition[j]&&
isOverThresholdDrag&&(r.touchData.singleTouchMoved=!0);capture&&(null==pos||pos.pannable())&&cy.panningEnabled()&&cy.userPanningEnabled()&&(allowPanningPassthrough(pos,r.touchData.starts)&&(e.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=array2point(r.touchData.startPosition)),r.swipePanning?(cy.panBy({x:disp[0]*zoom,y:disp[1]*zoom}),cy.emit("dragpan")):isOverThresholdDrag&&(r.swipePanning=!0,cy.panBy({x:dx*zoom,y:dy*zoom}),cy.emit("dragpan"),pos&&(pos.unactivate(),r.redrawHint("select",
!0),r.touchData.start=null))),pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),now[0]=pos[0],now[1]=pos[1])}for(j=0;j<now.length;j++)earlier[j]=now[j];capture&&0<e.touches.length&&!r.hoverData.draggingEles&&!r.swipePanning&&null!=r.data.bgActivePosistion&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var touchcancelHandler;r.registerBinding(containerWindow,"touchcancel",touchcancelHandler=function(e){e=r.touchData.start;r.touchData.capture=!1;e&&
e.unactivate()});var touchendHandler,didDoubleTouch,touchTimeout,prevTouchTimeStamp;r.registerBinding(containerWindow,"touchend",touchendHandler=function(e){var start=r.touchData.start;if(r.touchData.capture){0===e.touches.length&&(r.touchData.capture=!1);e.preventDefault();var select=r.selection;r.swipePanning=!1;r.hoverData.draggingEles=!1;var cy=r.cy,zoom=cy.zoom(),now=r.touchData.now,earlier=r.touchData.earlier;if(e.touches[0]){var pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);
now[0]=pos[0];now[1]=pos[1]}e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),now[2]=pos[0],now[3]=pos[1]);e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),now[4]=pos[0],now[5]=pos[1]);start&&start.unactivate();if(r.touchData.cxt)earlier={originalEvent:e,type:"cxttapend",position:{x:now[0],y:now[1]}},start?start.emit(earlier):cy.emit(earlier),r.touchData.cxtDragged||(earlier={originalEvent:e,type:"cxttap",position:{x:now[0],y:now[1]}},
start?start.emit(earlier):cy.emit(earlier)),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();else{!e.touches[2]&&cy.boxSelectionEnabled()&&r.touchData.selecting&&(r.touchData.selecting=!1,pos=cy.collection(r.getAllInBox(select[0],select[1],select[2],select[3])),select[0]=void 0,select[1]=void 0,select[2]=void 0,select[3]=void 0,select[4]=0,r.redrawHint("select",!0),cy.emit({type:"boxend",originalEvent:e,position:{x:now[0],y:now[1]}}),
pos.emit("box").stdFilter(function(ele){return ele.selectable()&&!ele.selected()}).select().emit("boxselect"),pos.nonempty()&&r.redrawHint("eles",!0),r.redraw());null!=start&&start.unactivate();e.touches[2]?(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0)):e.touches[1]||e.touches[0]||e.touches[0]||(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),select=r.dragData.touchDragEles,null!=start?(pos=start._private.grabbed,freeDraggedElements(select),r.redrawHint("drag",!0),r.redrawHint("eles",
!0),pos&&(start.emit("freeon"),select.emit("free"),r.dragData.didDrag&&(start.emit("dragfreeon"),select.emit("dragfree"))),triggerEvents(start,["touchend","tapend","vmouseup","tapdragout"],e,{x:now[0],y:now[1]}),start.unactivate(),r.touchData.start=null):(select=r.findNearestElement(now[0],now[1],!0,!0),triggerEvents(select,["touchend","tapend","vmouseup","tapdragout"],e,{x:now[0],y:now[1]})),select=r.touchData.startPosition[0]-now[0],pos=r.touchData.startPosition[1]-now[1],zoom*=(select*select+pos*
pos)*zoom,r.touchData.singleTouchMoved||(start||cy.$(":selected").unselect(["tapunselect"]),triggerEvents(start,["tap","vclick"],e,{x:now[0],y:now[1]}),didDoubleTouch=!1,e.timeStamp-prevTouchTimeStamp<=cy.multiClickDebounceTime()?(touchTimeout&&clearTimeout(touchTimeout),didDoubleTouch=!0,prevTouchTimeStamp=null,triggerEvents(start,["dbltap","vdblclick"],e,{x:now[0],y:now[1]})):(touchTimeout=setTimeout(function(){didDoubleTouch||triggerEvents(start,["onetap","voneclick"],e,{x:now[0],y:now[1]})},cy.multiClickDebounceTime()),
prevTouchTimeStamp=e.timeStamp)),null!=start&&!r.dragData.didDrag&&start._private.selectable&&zoom<r.touchTapThreshold2&&!r.pinching&&("single"===cy.selectionType()?(cy.$(isSelected).unmerge(start).unselect(["tapunselect"]),start.select(["tapselect"])):start.selected()?start.unselect(["tapunselect"]):start.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0);for(cy=0;cy<now.length;cy++)earlier[cy]=now[cy];r.dragData.didDrag=!1;0===e.touches.length&&(r.touchData.dragDelta=
[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1);2>e.touches.length&&(1===e.touches.length&&(r.touchData.startGPosition=[e.touches[0].clientX,e.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())}}},!1);if("undefined"===typeof TouchEvent){var pointers=[],makeTouch=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/
2,screenX:e.screenX,screenY:e.screenY,target:e.target}},removePointer=function(e){for(var i=0;i<pointers.length;i++)if(pointers[i].event.pointerId===e.pointerId){pointers.splice(i,1);break}},updatePointer=function(e){var p$jscomp$0=pointers.filter(function(p){return p.event.pointerId===e.pointerId})[0];p$jscomp$0.event=e;p$jscomp$0.touch=makeTouch(e)},addTouchesToEvent=function(e){e.touches=pointers.map(function(p){return p.touch})},pointerIsMouse=function(e){return"mouse"===e.pointerType||4===e.pointerType};
r.registerBinding(r.container,"pointerdown",function(e){pointerIsMouse(e)||(e.preventDefault(),pointers.push({event:e,touch:makeTouch(e)}),addTouchesToEvent(e),touchstartHandler(e))});r.registerBinding(r.container,"pointerup",function(e){pointerIsMouse(e)||(removePointer(e),addTouchesToEvent(e),touchendHandler(e))});r.registerBinding(r.container,"pointercancel",function(e){pointerIsMouse(e)||(removePointer(e),addTouchesToEvent(e),touchcancelHandler(e))});r.registerBinding(r.container,"pointermove",
function(e){pointerIsMouse(e)||(e.preventDefault(),updatePointer(e),addTouchesToEvent(e),touchmoveHandler(e))})}}},{generatePolygon:function(name,points){return this.nodeShapes[name]={renderer:this,name,points,draw:function(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl("polygon",context,centerX,centerY,width,height,this.points)},intersectLine:function(nodeX,nodeY,width,height,x,y,padding){return polygonIntersectLine(x,y,this.points,nodeX,nodeY,width/2,height/2,padding)},checkPoint:function(x,
y,padding,width,height,centerX,centerY){return pointInsidePolygon(x,y,this.points,centerX,centerY,width,height,[0,-1],padding)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function(nodeX,nodeY,width,height,x,y,padding){width=(nodeX-x)/(width/2+padding);height=(nodeY-y)/(height/2+padding);height=Math.sqrt(width*
width+height*height);padding=height-1;0>padding?nodeX=[]:(height=padding/height,nodeX=[(nodeX-x)*height+x,(nodeY-y)*height+y]);return nodeX},checkPoint:function(x,y,padding,width,height,centerX,centerY){return checkInEllipse(x,y,width,height,centerX,centerY,padding)}}},generateRoundPolygon:function(name,points){for(var allPoints=Array(2*points.length),i$jscomp$0=0;i$jscomp$0<points.length/2;i$jscomp$0++){var sourceIndex=2*i$jscomp$0,destIndex=void 0;destIndex=i$jscomp$0<points.length/2-1?2*(i$jscomp$0+
1):0;allPoints[4*i$jscomp$0]=points[sourceIndex];allPoints[4*i$jscomp$0+1]=points[sourceIndex+1];var xDest=points[destIndex]-points[sourceIndex];sourceIndex=points[destIndex+1]-points[sourceIndex+1];destIndex=Math.sqrt(xDest*xDest+sourceIndex*sourceIndex);allPoints[4*i$jscomp$0+2]=xDest/destIndex;allPoints[4*i$jscomp$0+3]=sourceIndex/destIndex}return this.nodeShapes[name]={renderer:this,name,points:allPoints,draw:function(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl("round-polygon",
context,centerX,centerY,width,height,this.points)},intersectLine:function(nodeX,nodeY,width,height,x,y,padding){var basePoints=this.points;padding=[];var lines=Array(basePoints.length),halfW=width/2,halfH=height/2;width=Math.min(width/10,height/10,8);for(height=0;height<basePoints.length/4;height++){var sourceUv=0===height?basePoints.length-2:4*height-2;var intersection=4*height+2;var px=nodeX+halfW*basePoints[4*height],py=nodeY+halfH*basePoints[4*height+1],offset=width/Math.tan(Math.acos(-basePoints[sourceUv]*
basePoints[intersection]-basePoints[sourceUv+1]*basePoints[intersection+1])/2),cp0x=px-offset*basePoints[sourceUv],cp0y=py-offset*basePoints[sourceUv+1];px+=offset*basePoints[intersection];py+=offset*basePoints[intersection+1];0===height?(lines[basePoints.length-2]=cp0x,lines[basePoints.length-1]=cp0y):(lines[4*height-2]=cp0x,lines[4*height-1]=cp0y);lines[4*height]=px;lines[4*height+1]=py;py=basePoints[sourceUv+1];sourceUv=-basePoints[sourceUv];0>py*basePoints[intersection]+sourceUv*basePoints[intersection+
1]&&(py*=-1,sourceUv*=-1);intersection=intersectLineCircle(x,y,nodeX,nodeY,cp0x+py*width,cp0y+sourceUv*width,width);0!==intersection.length&&padding.push(intersection[0],intersection[1])}for(basePoints=0;basePoints<lines.length/4;basePoints++)intersection=finiteLinesIntersect(x,y,nodeX,nodeY,lines[4*basePoints],lines[4*basePoints+1],lines[4*basePoints+2],lines[4*basePoints+3],!1),0!==intersection.length&&padding.push(intersection[0],intersection[1]);if(2<padding.length){nodeX=[padding[0],padding[1]];
nodeY=Math.pow(nodeX[0]-x,2)+Math.pow(nodeX[1]-y,2);for(lines=1;lines<padding.length/2;lines++)basePoints=Math.pow(padding[2*lines]-x,2)+Math.pow(padding[2*lines+1]-y,2),basePoints<=nodeY&&(nodeX[0]=padding[2*lines],nodeX[1]=padding[2*lines+1],nodeY=basePoints);x=nodeX}else x=padding;return x},checkPoint:function(x,y,padding,width,height,centerX,centerY){a:{padding=this.points;var cutPolygonPoints=Array(padding.length),halfW=width/2,halfH=height/2;width=Math.min(width/10,height/10,8);height=width*
width;for(var i=0;i<padding.length/4;i++){var sourceUv=0===i?padding.length-2:4*i-2;var destUv=4*i+2;var px=centerX+halfW*padding[4*i],py=centerY+halfH*padding[4*i+1],offset=width/Math.tan(Math.acos(-padding[sourceUv]*padding[destUv]-padding[sourceUv+1]*padding[destUv+1])/2),cp0x=px-offset*padding[sourceUv],cp0y=py-offset*padding[sourceUv+1];px+=offset*padding[destUv];py+=offset*padding[destUv+1];cutPolygonPoints[4*i]=cp0x;cutPolygonPoints[4*i+1]=cp0y;cutPolygonPoints[4*i+2]=px;cutPolygonPoints[4*
i+3]=py;py=padding[sourceUv+1];sourceUv=-padding[sourceUv];0>py*padding[destUv]+sourceUv*padding[destUv+1]&&(py*=-1,sourceUv*=-1);if(Math.pow(cp0x+py*width-x,2)+Math.pow(cp0y+sourceUv*width-y,2)<=height){x=!0;break a}}x=pointInsidePolygonPoints(x,y,cutPolygonPoints)}return x}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(context,centerX,centerY,
width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function(nodeX,nodeY,width,height,x,y,padding){return roundRectangleIntersectLine(x,y,nodeX,nodeY,width,height,padding)},checkPoint:function(x,y,padding,width,height,centerX,centerY){var cornerRadius=Math.min(width/4,height/4,8),diam=2*cornerRadius;return pointInsidePolygon(x,y,this.points,centerX,centerY,width,height-diam,[0,-1],padding)||pointInsidePolygon(x,y,this.points,centerX,centerY,width-
diam,height,[0,-1],padding)||checkInEllipse(x,y,diam,diam,centerX-width/2+cornerRadius,centerY-height/2+cornerRadius,padding)||checkInEllipse(x,y,diam,diam,centerX+width/2-cornerRadius,centerY-height/2+cornerRadius,padding)||checkInEllipse(x,y,diam,diam,centerX+width/2-cornerRadius,centerY+height/2-cornerRadius,padding)||checkInEllipse(x,y,diam,diam,centerX-width/2+cornerRadius,centerY+height/2-cornerRadius,padding)?!0:!1}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=
this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:generateUnitNgonPointsFitToSquare(4,0),draw:function(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},generateCutTrianglePts:function(width,height,centerX,centerY){var cl=this.cornerLength;height/=2;var hw=width/2;width=centerX-hw;centerX+=hw;hw=centerY-height;centerY+=height;return{topLeft:[width,hw+cl,width+cl,hw,width+cl,hw+cl],topRight:[centerX-
cl,hw,centerX,hw+cl,centerX-cl,hw+cl],bottomRight:[centerX,centerY-cl,centerX-cl,centerY,centerX-cl,centerY-cl],bottomLeft:[width+cl,centerY,width,centerY-cl,width+cl,centerY-cl]}},intersectLine:function(nodeX,nodeY,width,height,x,y,padding){width=this.generateCutTrianglePts(width+2*padding,height+2*padding,nodeX,nodeY);width=[].concat.apply([],[width.topLeft.splice(0,4),width.topRight.splice(0,4),width.bottomRight.splice(0,4),width.bottomLeft.splice(0,4)]);return polygonIntersectLine(x,y,width,nodeX,
nodeY)},checkPoint:function(x,y,padding,width,height,centerX,centerY){if(pointInsidePolygon(x,y,this.points,centerX,centerY,width,height-2*this.cornerLength,[0,-1],padding)||pointInsidePolygon(x,y,this.points,centerX,centerY,width-2*this.cornerLength,height,[0,-1],padding))return!0;padding=this.generateCutTrianglePts(width,height,centerX,centerY);return pointInsidePolygonPoints(x,y,padding.topLeft)||pointInsidePolygonPoints(x,y,padding.topRight)||pointInsidePolygonPoints(x,y,padding.bottomRight)||
pointInsidePolygonPoints(x,y,padding.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function(nodeX,nodeY,width,height,x,y,padding){width=this.generateBarrelBezierPts(width+2*padding,height+2*padding,nodeX,nodeY);height=function(pts){var m0=qbezierPtAt({x:pts[0],
y:pts[1]},{x:pts[2],y:pts[3]},{x:pts[4],y:pts[5]},.15),m1=qbezierPtAt({x:pts[0],y:pts[1]},{x:pts[2],y:pts[3]},{x:pts[4],y:pts[5]},.5),m2=qbezierPtAt({x:pts[0],y:pts[1]},{x:pts[2],y:pts[3]},{x:pts[4],y:pts[5]},.85);return[pts[0],pts[1],m0.x,m0.y,m1.x,m1.y,m2.x,m2.y,pts[4],pts[5]]};width=[].concat(height(width.topLeft),height(width.topRight),height(width.bottomRight),height(width.bottomLeft));return polygonIntersectLine(x,y,width,nodeX,nodeY)},generateBarrelBezierPts:function(width,height,centerX,centerY){var hh=
height/2,hw=width/2,xBegin=centerX-hw;centerX+=hw;hw=centerY-hh;centerY+=hh;var curveConstants=getBarrelCurveConstants(width,height);height=curveConstants.heightOffset;hh=curveConstants.widthOffset;width*=curveConstants.ctrlPtOffsetPct;xBegin={topLeft:[xBegin,hw+height,xBegin+width,hw,xBegin+hh,hw],topRight:[centerX-hh,hw,centerX-width,hw,centerX,hw+height],bottomRight:[centerX,centerY-height,centerX-width,centerY,centerX-hh,centerY],bottomLeft:[xBegin+hh,centerY,xBegin+width,centerY,xBegin,centerY-
height]};xBegin.topLeft.isTop=!0;xBegin.topRight.isTop=!0;xBegin.bottomLeft.isBottom=!0;xBegin.bottomRight.isBottom=!0;return xBegin},checkPoint:function(x$jscomp$0,y$jscomp$0,padding,width,height,centerX,centerY){var curveConstants=getBarrelCurveConstants(width,height),wOffset=curveConstants.widthOffset;if(pointInsidePolygon(x$jscomp$0,y$jscomp$0,this.points,centerX,centerY,width,height-2*curveConstants.heightOffset,[0,-1],padding)||pointInsidePolygon(x$jscomp$0,y$jscomp$0,this.points,centerX,centerY,
width-2*wOffset,height,[0,-1],padding))return!0;padding=this.generateBarrelBezierPts(width,height,centerX,centerY);width=function(x,y,curvePts){var x0=curvePts[4],x1=curvePts[2],x2=curvePts[0],y0=curvePts[5],y2=curvePts[1];curvePts=Math.max(x0,x2);var yMin=Math.min(y0,y2);y0=Math.max(y0,y2);return Math.min(x0,x2)<=x&&x<=curvePts&&yMin<=y&&y<=y0&&(y=[x0-2*x1+x2,2*(x1-x0),x0],x=solveQuadratic(y[0],y[1],y[2],x).filter(function(r){return 0<=r&&1>=r}),0<x.length)?x[0]:null};height=Object.keys(padding);
for(centerX=0;centerX<height.length;centerX++)if(centerY=padding[height[centerX]],curveConstants=width(x$jscomp$0,y$jscomp$0,centerY),null!=curveConstants&&(curveConstants=qbezierAt(centerY[5],centerY[3],centerY[1],curveConstants),centerY.isTop&&curveConstants<=y$jscomp$0||centerY.isBottom&&y$jscomp$0<=curveConstants))return!0;return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",
points:generateUnitNgonPointsFitToSquare(4,0),draw:function(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function(nodeX,nodeY,width,height,x,y,padding){var topStartY=nodeY-(height/2+padding);topStartY=finiteLinesIntersect(x,y,nodeX,nodeY,nodeX-(width/2+padding),topStartY,nodeX+(width/2+padding),topStartY,!1);return 0<topStartY.length?topStartY:roundRectangleIntersectLine(x,y,nodeX,nodeY,width,height,padding)},checkPoint:function(x,
y,padding,width,height,centerX,centerY){var cornerRadius=Math.min(width/4,height/4,8),diam=2*cornerRadius;if(pointInsidePolygon(x,y,this.points,centerX,centerY,width,height-diam,[0,-1],padding)||pointInsidePolygon(x,y,this.points,centerX,centerY,width-diam,height,[0,-1],padding))return!0;var outerWidth=width/2+2*padding,outerHeight=height/2+2*padding;return pointInsidePolygonPoints(x,y,[centerX-outerWidth,centerY-outerHeight,centerX-outerWidth,centerY,centerX+outerWidth,centerY,centerX+outerWidth,
centerY-outerHeight])||checkInEllipse(x,y,diam,diam,centerX+width/2-cornerRadius,centerY+height/2-cornerRadius,padding)||checkInEllipse(x,y,diam,diam,centerX-width/2+cornerRadius,centerY+height/2-cornerRadius,padding)?!0:!1}}},registerNodeShapes:function(){var nodeShapes=this.nodeShapes={},renderer=this;this.generateEllipse();this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0));this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0));this.generatePolygon("rectangle",
generateUnitNgonPointsFitToSquare(4,0));nodeShapes.square=nodeShapes.rectangle;this.generateRoundRectangle();this.generateCutRectangle();this.generateBarrel();this.generateBottomRoundrectangle();var diamondPoints=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",diamondPoints);this.generateRoundPolygon("round-diamond",diamondPoints);this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0));this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0));this.generatePolygon("hexagon",
generateUnitNgonPointsFitToSquare(6,0));this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0));this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0));this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0));this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0));this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));diamondPoints=Array(20);var outerPoints=generateUnitNgonPoints(5,0),innerPoints=
generateUnitNgonPoints(5,Math.PI/5),innerRadius=.5*(3-Math.sqrt(5));innerRadius*=1.57;for(var i=0;i<innerPoints.length/2;i++)innerPoints[2*i]*=innerRadius,innerPoints[2*i+1]*=innerRadius;for(i=0;5>i;i++)diamondPoints[4*i]=outerPoints[2*i],diamondPoints[4*i+1]=outerPoints[2*i+1],diamondPoints[4*i+2]=innerPoints[2*i],diamondPoints[4*i+3]=innerPoints[2*i+1];diamondPoints=fitPolygonToSquare(diamondPoints);this.generatePolygon("star",diamondPoints);this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]);
this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]);this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]);this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);diamondPoints=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",diamondPoints);this.generateRoundPolygon("round-tag",diamondPoints);nodeShapes.makePolygon=function(points){var name="polygon-"+points.join("$"),shape;return(shape=this[name])?shape:renderer.generatePolygon(name,
points)}}},BRp$1].forEach(function(props){extend(BRp,props)});var fullFpsTime=1E3/60,defs={setupDequeueing:function(opts){return function(){var self=this,r=this.renderer;if(!self.dequeueingSetup){self.dequeueingSetup=!0;var queueRedraw=debounce__default["default"](function(){r.redrawHint("eles",!0);r.redrawHint("drag",!0);r.redraw()},opts.deqRedrawThreshold);r.beforeRender(function(willDraw,frameStartTime){var startTime=pnow(),avgRenderTime=r.averageRedrawTime,renderTime=r.lastRedrawTime,deqd=[],
extent=r.cy.extent(),pixelRatio=r.getPixelRatio();for(willDraw||r.flushRenderedStyleQueue();;){var now=pnow(),duration=now-startTime;now-=frameStartTime;if(renderTime<fullFpsTime){if(now>=opts.deqFastCost*(fullFpsTime-(willDraw?avgRenderTime:0)))break}else if(willDraw){if(duration>=opts.deqCost*renderTime||duration>=opts.deqAvgCost*avgRenderTime)break}else if(now>=opts.deqNoDrawCost*fullFpsTime)break;duration=opts.deq(self,pixelRatio,extent);if(0<duration.length)for(now=0;now<duration.length;now++)deqd.push(duration[now]);
else break}0<deqd.length&&(opts.onDeqd(self,deqd),!willDraw&&opts.shouldRedraw(self,deqd,pixelRatio,extent)&&queueRedraw())},(opts.priority||noop$1)(self))}}}},ElementTextureCacheLookup=function(){function ElementTextureCacheLookup(getKey){var doesEleInvalidateKey=1<arguments.length&&void 0!==arguments[1]?arguments[1]:falsify;_classCallCheck(this,ElementTextureCacheLookup);this.idsByKey=new Map$1;this.keyForId=new Map$1;this.cachesByLvl=new Map$1;this.lvls=[];this.getKey=getKey;this.doesEleInvalidateKey=
doesEleInvalidateKey}_createClass(ElementTextureCacheLookup,[{key:"getIdsFor",value:function(key){null==key&&error("Can not get id list for null key");var idsByKey=this.idsByKey,ids=this.idsByKey.get(key);ids||(ids=new Set$1,idsByKey.set(key,ids));return ids}},{key:"addIdForKey",value:function(key,id){null!=key&&this.getIdsFor(key).add(id)}},{key:"deleteIdForKey",value:function(key,id){if(null!=key)this.getIdsFor(key)["delete"](id)}},{key:"getNumberOfIdsForKey",value:function(key){return null==key?
0:this.getIdsFor(key).size}},{key:"updateKeyMappingFor",value:function(ele){var id=ele.id(),prevKey=this.keyForId.get(id);ele=this.getKey(ele);this.deleteIdForKey(prevKey,id);this.addIdForKey(ele,id);this.keyForId.set(id,ele)}},{key:"deleteKeyMappingFor",value:function(ele){ele=ele.id();var prevKey=this.keyForId.get(ele);this.deleteIdForKey(prevKey,ele);this.keyForId["delete"](ele)}},{key:"keyHasChangedFor",value:function(ele){var id=ele.id();id=this.keyForId.get(id);ele=this.getKey(ele);return id!==
ele}},{key:"isInvalid",value:function(ele){return this.keyHasChangedFor(ele)||this.doesEleInvalidateKey(ele)}},{key:"getCachesAt",value:function(lvl){var cachesByLvl=this.cachesByLvl,lvls=this.lvls,caches=cachesByLvl.get(lvl);caches||(caches=new Map$1,cachesByLvl.set(lvl,caches),lvls.push(lvl));return caches}},{key:"getCache",value:function(key,lvl){return this.getCachesAt(lvl).get(key)}},{key:"get",value:function(ele,lvl){var key=this.getKey(ele);lvl=this.getCache(key,lvl);null!=lvl&&this.updateKeyMappingFor(ele);
return lvl}},{key:"getForCachedKey",value:function(ele,lvl){ele=this.keyForId.get(ele.id());return this.getCache(ele,lvl)}},{key:"hasCache",value:function(key,lvl){return this.getCachesAt(lvl).has(key)}},{key:"has",value:function(ele,lvl){ele=this.getKey(ele);return this.hasCache(ele,lvl)}},{key:"setCache",value:function(key,lvl,cache){cache.key=key;this.getCachesAt(lvl).set(key,cache)}},{key:"set",value:function(ele,lvl,cache){var key=this.getKey(ele);this.setCache(key,lvl,cache);this.updateKeyMappingFor(ele)}},
{key:"deleteCache",value:function(key,lvl){this.getCachesAt(lvl)["delete"](key)}},{key:"delete",value:function(ele,lvl){ele=this.getKey(ele);this.deleteCache(ele,lvl)}},{key:"invalidateKey",value:function(key){var _this=this;this.lvls.forEach(function(lvl){return _this.deleteCache(key,lvl)})}},{key:"invalidate",value:function(ele){var id=ele.id();id=this.keyForId.get(id);this.deleteKeyMappingFor(ele);(ele=this.doesEleInvalidateKey(ele))&&this.invalidateKey(id);return ele||0===this.getNumberOfIdsForKey(id)}}]);
return ElementTextureCacheLookup}(),getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(renderer,initOptions){this.renderer=renderer;this.onDequeues=[];renderer=initDefaults(initOptions);extend(this,renderer);this.lookup=new ElementTextureCacheLookup(renderer.getKey,
renderer.doesEleInvalidateKey);this.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons;ETCp.getTextureQueue=function(txrH){this.eleImgCaches=this.eleImgCaches||{};return this.eleImgCaches[txrH]=this.eleImgCaches[txrH]||[]};ETCp.getRetiredTextureQueue=function(txrH){var rtxtrQs=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return rtxtrQs[txrH]=rtxtrQs[txrH]||[]};ETCp.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Heap__default["default"](function(a,
b){return b.reqs-a.reqs})};ETCp.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}};ETCp.getElement=function(ele,bb,pxRatio,lvl,reason){var r=this.renderer,zoom=r.cy.zoom(),lookup=this.lookup;if(!bb||0===bb.w||0===bb.h||isNaN(bb.w)||isNaN(bb.h)||!ele.visible()||ele.removed()||!this.allowEdgeTxrCaching&&ele.isEdge()||!this.allowParentTxrCaching&&ele.isParent())return null;null==lvl&&(lvl=Math.ceil(log2(zoom*pxRatio)));if(-4>lvl)lvl=-4;else if(7.99<=zoom||3<lvl)return null;
zoom=Math.pow(2,lvl);var eleScaledH=bb.h*zoom,eleScaledW=bb.w*zoom;r=r.eleTextBiggerThanMin(ele,zoom);if(!this.isVisible(ele,r))return null;var eleCache=lookup.get(ele,lvl);eleCache&&eleCache.invalidated&&(eleCache.invalidated=!1,eleCache.texture.invalidatedWidth-=eleCache.width);if(eleCache)return eleCache;eleCache=25>=eleScaledH?25:50>=eleScaledH?50:50*Math.ceil(eleScaledH/50);if(1024<eleScaledH||1024<eleScaledW)return null;var txrQ=this.getTextureQueue(eleCache),txr=txrQ[txrQ.length-2];txr||(txr=
txrQ[txrQ.length-1]);txr||(txr=this.recycleTexture(eleCache,eleScaledW)||this.addTexture(eleCache,eleScaledW));txr.width-txr.usedWidth<eleScaledW&&(txr=this.recycleTexture(eleCache,eleScaledW)||this.addTexture(eleCache,eleScaledW));txrQ=reason&&reason===getTxrReasons.dequeue;var highQualityReq=reason&&reason===getTxrReasons.highQuality;reason=reason&&reason===getTxrReasons.downscale;for(var higherCache,l=lvl+1;3>=l;l++){var c=lookup.get(ele,l);if(c){higherCache=c;break}}var oneUpCache=higherCache&&
higherCache.level===lvl+1?higherCache:null;l=function(){txr.context.drawImage(oneUpCache.texture.canvas,oneUpCache.x,0,oneUpCache.width,oneUpCache.height,txr.usedWidth,0,eleScaledW,eleScaledH)};txr.context.setTransform(1,0,0,1,0,0);txr.context.clearRect(txr.usedWidth,0,eleScaledW,eleCache);if(oneUpCache&&oneUpCache.scaledLabelShown===r)l();else if(higherCache&&higherCache.scaledLabelShown===r)if(highQualityReq){for(var _l=higherCache.level;_l>lvl;_l--)oneUpCache=this.getElement(ele,bb,pxRatio,_l,
getTxrReasons.downscale);l()}else return this.queueElement(ele,higherCache.level-1),higherCache;else{if(!txrQ&&!highQualityReq&&!reason)for(pxRatio=lvl-1;-4<=pxRatio;pxRatio--)if(higherCache=lookup.get(ele,pxRatio)){_l=higherCache;break}if(_l&&_l.scaledLabelShown===r)return this.queueElement(ele,lvl),_l;txr.context.translate(txr.usedWidth,0);txr.context.scale(zoom,zoom);this.drawElement(txr.context,ele,bb,r,!1);txr.context.scale(1/zoom,1/zoom);txr.context.translate(-txr.usedWidth,0)}eleCache={x:txr.usedWidth,
texture:txr,level:lvl,scale:zoom,width:eleScaledW,height:eleScaledH,scaledLabelShown:r};txr.usedWidth+=Math.ceil(eleScaledW+8);txr.eleCaches.push(eleCache);lookup.set(ele,lvl,eleCache);this.checkTextureFullness(txr);return eleCache};ETCp.invalidateElements=function(eles){for(var i=0;i<eles.length;i++)this.invalidateElement(eles[i])};ETCp.invalidateElement=function(ele){var lookup=this.lookup,caches=[];if(lookup.isInvalid(ele)){for(var lvl=-4;3>=lvl;lvl++){var cache=lookup.getForCachedKey(ele,lvl);
cache&&caches.push(cache)}if(lookup.invalidate(ele))for(lookup=0;lookup<caches.length;lookup++)lvl=caches[lookup],cache=lvl.texture,cache.invalidatedWidth+=lvl.width,lvl.invalidated=!0,this.checkTextureUtility(cache);this.removeFromQueue(ele)}};ETCp.checkTextureUtility=function(txr){txr.invalidatedWidth>=.2*txr.width&&this.retireTexture(txr)};ETCp.checkTextureFullness=function(txr){var txrQ=this.getTextureQueue(txr.height);.8<txr.usedWidth/txr.width&&10<=txr.fullnessChecks?removeFromArray(txrQ,txr):
txr.fullnessChecks++};ETCp.retireTexture=function(txr){var txrH=txr.height,txrQ=this.getTextureQueue(txrH),lookup=this.lookup;removeFromArray(txrQ,txr);txr.retired=!0;txrQ=txr.eleCaches;for(var i=0;i<txrQ.length;i++){var eleCache=txrQ[i];lookup.deleteCache(eleCache.key,eleCache.level)}clearArray(txrQ);this.getRetiredTextureQueue(txrH).push(txr)};ETCp.addTexture=function(txrH,minW){var txr={};this.getTextureQueue(txrH).push(txr);txr.eleCaches=[];txr.height=txrH;txr.width=Math.max(1024,minW);txr.usedWidth=
0;txr.invalidatedWidth=0;txr.fullnessChecks=0;txr.canvas=this.renderer.makeOffscreenCanvas(txr.width,txr.height);txr.context=txr.canvas.getContext("2d");return txr};ETCp.recycleTexture=function(txrH,minW){var txrQ=this.getTextureQueue(txrH);txrH=this.getRetiredTextureQueue(txrH);for(var i=0;i<txrH.length;i++){var txr=txrH[i];if(txr.width>=minW)return txr.retired=!1,txr.usedWidth=0,txr.invalidatedWidth=0,txr.fullnessChecks=0,clearArray(txr.eleCaches),txr.context.setTransform(1,0,0,1,0,0),txr.context.clearRect(0,
0,txr.width,txr.height),removeFromArray(txrH,txr),txrQ.push(txr),txr}};ETCp.queueElement=function(ele,lvl){var q=this.getElementQueue(),k2q=this.getElementKeyToQueue(),key=this.getKey(ele),existingReq=k2q[key];existingReq?(existingReq.level=Math.max(existingReq.level,lvl),existingReq.eles.merge(ele),existingReq.reqs++,q.updateItem(existingReq)):(ele={eles:ele.spawn().merge(ele),level:lvl,reqs:1,key},q.push(ele),k2q[key]=ele)};ETCp.dequeue=function(pxRatio){for(var q=this.getElementQueue(),k2q=this.getElementKeyToQueue(),
dequeued=[],lookup=this.lookup,i=0;1>i;i++)if(0<q.size()){var req=q.pop(),key=req.key,ele=req.eles[0],cacheExists=lookup.hasCache(ele,req.level);k2q[key]=null;cacheExists||(dequeued.push(req),key=this.getBoundingBox(ele),this.getElement(ele,key,pxRatio,req.level,getTxrReasons.dequeue))}else break;return dequeued};ETCp.removeFromQueue=function(ele){var q=this.getElementQueue(),k2q=this.getElementKeyToQueue(),key=this.getKey(ele),req=k2q[key];null!=req&&(1===req.eles.length?(req.reqs=MAX_INT$1,q.updateItem(req),
q.pop(),k2q[key]=null):req.eles.unmerge(ele))};ETCp.onDequeue=function(fn){this.onDequeues.push(fn)};ETCp.offDequeue=function(fn){removeFromArray(this.onDequeues,fn)};ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(self,pxRatio,extent){return self.dequeue(pxRatio,extent)},onDeqd:function(self,deqd){for(var i=0;i<self.onDequeues.length;i++)(0,self.onDequeues[i])(deqd)},shouldRedraw:function(self,deqd,pxRatio,extent){for(self=
0;self<deqd.length;self++){pxRatio=deqd[self].eles;for(var j=0;j<pxRatio.length;j++){var bb=pxRatio[j].boundingBox();if(boundingBoxesIntersect(bb,extent))return!0}}return!1},priority:function(self){return self.renderer.beforeRenderPriorities.eleTxrDeq}});var LayeredTextureCache=function(renderer){var self=this;renderer=self.renderer=renderer;var cy=renderer.cy;self.layersByLevel={};self.firstGet=!0;self.lastInvalidationTime=pnow()-500;self.skipping=!1;self.eleTxrDeqs=cy.collection();self.scheduleElementRefinement=
debounce__default["default"](function(){self.refineElementTextures(self.eleTxrDeqs);self.eleTxrDeqs.unmerge(self.eleTxrDeqs)},50);renderer.beforeRender(function(willDraw,now){self.skipping=250>=now-self.lastInvalidationTime?!0:!1},renderer.beforeRenderPriorities.lyrTxrSkip);self.layersQueue=new Heap__default["default"](function(a,b){return b.reqs-a.reqs});self.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1;LTCp.makeLayer=function(bb,lvl){var scale=Math.pow(2,
lvl),w=Math.ceil(bb.w*scale),h=Math.ceil(bb.h*scale),canvas=this.renderer.makeOffscreenCanvas(w,h);bb={id:layerIdPool=++layerIdPool%MAX_INT,bb,level:lvl,width:w,height:h,canvas,context:canvas.getContext("2d"),eles:[],elesQueue:[],reqs:0};lvl=bb.context;w=-bb.bb.x1;h=-bb.bb.y1;lvl.scale(scale,scale);lvl.translate(w,h);return bb};LTCp.getLayers=function(eles,pxRatio,lvl){var self=this,zoom=self.renderer.cy.zoom(),firstGet=self.firstGet;self.firstGet=!1;if(null==lvl)if(lvl=Math.ceil(log2(zoom*pxRatio)),
-4>lvl)lvl=-4;else if(3.99<=zoom||2<lvl)return null;self.validateLayersElesOrdering(lvl,eles);var layersByLvl=self.layersByLevel,scale=Math.pow(2,lvl),layers=layersByLvl[lvl]=layersByLvl[lvl]||[],bb,tmpLayers;if(self.levelIsComplete(lvl,eles))return layers;(function(){var checkLvls=function(dir){if(!tmpLayers)for(var l=lvl+dir;-4<=l&&2>=l;l+=dir){var JSCompiler_inline_result=l;self.validateLayersElesOrdering(JSCompiler_inline_result,eles);self.levelIsComplete(JSCompiler_inline_result,eles)?(tmpLayers=
layersByLvl[JSCompiler_inline_result],JSCompiler_inline_result=!0):JSCompiler_inline_result=void 0;if(JSCompiler_inline_result)break}};checkLvls(1);checkLvls(-1);for(checkLvls=layers.length-1;0<=checkLvls;checkLvls--){var layer=layers[checkLvls];layer.invalid&&removeFromArray(layers,layer)}})();zoom=function(opts){opts=opts||{};var after=opts.after;if(!bb){bb=makeBoundingBox();for(var i=0;i<eles.length;i++){var bb1=bb,bb2=eles[i].boundingBox();bb1.x1=Math.min(bb1.x1,bb2.x1);bb1.x2=Math.max(bb1.x2,
bb2.x2);bb1.w=bb1.x2-bb1.x1;bb1.y1=Math.min(bb1.y1,bb2.y1);bb1.y2=Math.max(bb1.y2,bb2.y2);bb1.h=bb1.y2-bb1.y1}}if(16E6<bb.w*scale*bb.h*scale)return null;i=self.makeLayer(bb,lvl);null!=after?(opts=layers.indexOf(after)+1,layers.splice(opts,0,i)):(void 0===opts.insert||opts.insert)&&layers.unshift(i);return i};if(self.skipping&&!firstGet)return null;var layer$jscomp$0=null,maxElesPerLayer=eles.length/1;firstGet=!firstGet;for(var i$jscomp$0=0;i$jscomp$0<eles.length;i$jscomp$0++){var ele=eles[i$jscomp$0],
rs=ele._private.rscratch;rs=rs.imgLayerCaches=rs.imgLayerCaches||{};var existingLayer=rs[lvl];if(existingLayer)layer$jscomp$0=existingLayer;else{if(!layer$jscomp$0||layer$jscomp$0.eles.length>=maxElesPerLayer||!boundingBoxInBoundingBox(layer$jscomp$0.bb,ele.boundingBox()))if(layer$jscomp$0=zoom({insert:!0,after:layer$jscomp$0}),!layer$jscomp$0)return null;tmpLayers||firstGet?self.queueLayer(layer$jscomp$0,ele):self.drawEleInLayer(layer$jscomp$0,ele,lvl,pxRatio);layer$jscomp$0.eles.push(ele);rs[lvl]=
layer$jscomp$0}}return tmpLayers?tmpLayers:firstGet?null:layers};LTCp.getEleLevelForLayerLevel=function(lvl,pxRatio){return lvl};LTCp.drawEleInLayer=function(layer,ele,lvl,pxRatio){var r=this.renderer;layer=layer.context;var bb=ele.boundingBox();0!==bb.w&&0!==bb.h&&ele.visible()&&(lvl=this.getEleLevelForLayerLevel(lvl,pxRatio),r.setImgSmoothing(layer,!1),r.drawCachedElement(layer,ele,null,null,lvl,!0),r.setImgSmoothing(layer,!0))};LTCp.levelIsComplete=function(lvl,eles){lvl=this.layersByLevel[lvl];
if(!lvl||0===lvl.length)return!1;for(var numElesInLayers=0,i=0;i<lvl.length;i++){var layer=lvl[i];if(0<layer.reqs||layer.invalid)return!1;numElesInLayers+=layer.eles.length}return numElesInLayers!==eles.length?!1:!0};LTCp.validateLayersElesOrdering=function(lvl,eles){if(lvl=this.layersByLevel[lvl])for(var i=0;i<lvl.length;i++){for(var layer=lvl[i],offset=-1,j=0;j<eles.length;j++)if(layer.eles[0]===eles[j]){offset=j;break}if(0>offset)this.invalidateLayer(layer);else for(j=0;j<layer.eles.length;j++)if(layer.eles[j]!==
eles[offset+j]){this.invalidateLayer(layer);break}}};LTCp.updateElementsInLayers=function(eles,update){for(var isEles=element$jscomp$0(eles[0]),i=0;i<eles.length;i++){var req=isEles?null:eles[i],ele=isEles?eles[i]:eles[i].ele,rs=ele._private.rscratch;rs=rs.imgLayerCaches=rs.imgLayerCaches||{};for(var l=-4;2>=l;l++){var layer=rs[l];layer&&(req&&this.getEleLevelForLayerLevel(layer.level)!==req.level||update(layer,ele,req))}}};LTCp.haveLayers=function(){for(var haveLayers=!1,l=-4;2>=l;l++){var layers=
this.layersByLevel[l];if(layers&&0<layers.length){haveLayers=!0;break}}return haveLayers};LTCp.invalidateElements=function(eles){var self=this;0!==eles.length&&(self.lastInvalidationTime=pnow(),0!==eles.length&&self.haveLayers()&&self.updateElementsInLayers(eles,function(layer,ele,req){self.invalidateLayer(layer)}))};LTCp.invalidateLayer=function(layer){this.lastInvalidationTime=pnow();if(!layer.invalid){var lvl=layer.level,eles=layer.eles;removeFromArray(this.layersByLevel[lvl],layer);layer.elesQueue=
[];layer.invalid=!0;layer.replacement&&(layer.replacement.invalid=!0);for(layer=0;layer<eles.length;layer++){var caches=eles[layer]._private.rscratch.imgLayerCaches;caches&&(caches[lvl]=null)}}};LTCp.refineElementTextures=function(eles){var self=this;self.updateElementsInLayers(eles,function(layer,ele,req){ele=layer.replacement;ele||(ele=layer.replacement=self.makeLayer(layer.bb,layer.level),ele.replaces=layer,ele.eles=layer.eles);if(!ele.reqs)for(layer=0;layer<ele.eles.length;layer++)self.queueLayer(ele,
ele.eles[layer])})};LTCp.enqueueElementRefinement=function(ele){this.eleTxrDeqs.merge(ele);this.scheduleElementRefinement()};LTCp.queueLayer=function(layer,ele){var q=this.layersQueue,elesQ=layer.elesQueue,hasId=elesQ.hasId=elesQ.hasId||{};if(!layer.replacement){if(ele){if(hasId[ele.id()])return;elesQ.push(ele);hasId[ele.id()]=!0}layer.reqs?(layer.reqs++,q.updateItem(layer)):(layer.reqs=1,q.push(layer))}};LTCp.dequeue=function(pxRatio){for(var q=this.layersQueue,deqd=[],eleDeqs=0;1>eleDeqs&&0!==q.size();){var layer=
q.peek();if(layer.replacement)q.pop();else if(layer.replaces&&layer!==layer.replaces.replacement)q.pop();else if(layer.invalid)q.pop();else{var ele=layer.elesQueue.shift();ele&&(this.drawEleInLayer(layer,ele,layer.level,pxRatio),eleDeqs++);0===deqd.length&&deqd.push(!0);0===layer.elesQueue.length&&(q.pop(),layer.reqs=0,layer.replaces&&this.applyLayerReplacement(layer),this.requestRedraw())}}return deqd};LTCp.applyLayerReplacement=function(layer){var layersInLevel=this.layersByLevel[layer.level],replaced=
layer.replaces,index=layersInLevel.indexOf(replaced);if(!(0>index||replaced.invalid)){layersInLevel[index]=layer;for(layersInLevel=0;layersInLevel<layer.eles.length;layersInLevel++)replaced=layer.eles[layersInLevel]._private,(replaced.imgLayerCaches=replaced.imgLayerCaches||{})[layer.level]=layer;this.requestRedraw()}};LTCp.requestRedraw=debounce__default["default"](function(){var r=this.renderer;r.redrawHint("eles",!0);r.redrawHint("drag",!0);r.redraw()},100);LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:50,
deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(self,pxRatio){return self.dequeue(pxRatio)},onDeqd:noop$1,shouldRedraw:trueify,priority:function(self){return self.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp$a={},impl;CRp$a.arrowShapeImpl=function(name){return(impl||(impl={polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle}))[name]};var CRp$9={drawElement:function(context,ele,
shiftToOriginWithBb,showLabel,showOverlay,showOpacity){ele.isNode()?this.drawNode(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity):this.drawEdge(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity)},drawElementOverlay:function(context,ele){ele.isNode()?this.drawNodeOverlay(context,ele):this.drawEdgeOverlay(context,ele)},drawElementUnderlay:function(context,ele){ele.isNode()?this.drawNodeUnderlay(context,ele):this.drawEdgeUnderlay(context,ele)},drawCachedElementPortion:function(context,
ele,eleTxrCache,pxRatio,lvl,reason,getRotation,getOpacity){var bb=eleTxrCache.getBoundingBox(ele);if(0!==bb.w&&0!==bb.h)if(pxRatio=eleTxrCache.getElement(ele,bb,pxRatio,lvl,reason),null!=pxRatio){if(getOpacity=getOpacity(this,ele),0!==getOpacity){getRotation=getRotation(this,ele);var x1=bb.x1;reason=bb.y1;lvl=bb.w;bb=bb.h;var smooth;if(0!==getRotation){var sy=eleTxrCache.getRotationPoint(ele);var sx=sy.x;sy=sy.y;context.translate(sx,sy);context.rotate(getRotation);(smooth=this.getImgSmoothing(context))||
this.setImgSmoothing(context,!0);eleTxrCache=eleTxrCache.getRotationOffset(ele);ele=eleTxrCache.x;eleTxrCache=eleTxrCache.y}else ele=x1,eleTxrCache=reason;if(1!==getOpacity){var oldGlobalAlpha=context.globalAlpha;context.globalAlpha=oldGlobalAlpha*getOpacity}context.drawImage(pxRatio.texture.canvas,pxRatio.x,0,pxRatio.width,pxRatio.height,ele,eleTxrCache,lvl,bb);1!==getOpacity&&(context.globalAlpha=oldGlobalAlpha);0!==getRotation&&(context.rotate(-getRotation),context.translate(-sx,-sy),smooth||this.setImgSmoothing(context,
!1))}}else eleTxrCache.drawElement(context,ele)}},getZeroRotation=function(){return 0},getLabelRotation=function(r,ele){return r.getTextAngle(ele,null)},getSourceLabelRotation=function(r,ele){return r.getTextAngle(ele,"source")},getTargetLabelRotation=function(r,ele){return r.getTextAngle(ele,"target")},getOpacity=function(r,ele){return ele.effectiveOpacity()},getTextOpacity=function(e,ele){return ele.pstyle("text-opacity").pfValue*ele.effectiveOpacity()};CRp$9.drawCachedElement=function(context,
ele,pxRatio,extent,lvl,requestHighQuality){var _r$data=this.data,eleTxrCache=_r$data.eleTxrCache,lblTxrCache=_r$data.lblTxrCache,slbTxrCache=_r$data.slbTxrCache;_r$data=_r$data.tlbTxrCache;var bb=ele.boundingBox();requestHighQuality=!0===requestHighQuality?eleTxrCache.reasons.highQuality:null;0===bb.w||0===bb.h||!ele.visible()||extent&&!boundingBoxesIntersect(bb,extent)||(extent=ele.isEdge(),bb=ele.element()._private.rscratch.badLine,this.drawElementUnderlay(context,ele),this.drawCachedElementPortion(context,
ele,eleTxrCache,pxRatio,lvl,requestHighQuality,getZeroRotation,getOpacity),extent&&bb||this.drawCachedElementPortion(context,ele,lblTxrCache,pxRatio,lvl,requestHighQuality,getLabelRotation,getTextOpacity),extent&&!bb&&(this.drawCachedElementPortion(context,ele,slbTxrCache,pxRatio,lvl,requestHighQuality,getSourceLabelRotation,getTextOpacity),this.drawCachedElementPortion(context,ele,_r$data,pxRatio,lvl,requestHighQuality,getTargetLabelRotation,getTextOpacity)),this.drawElementOverlay(context,ele))};
CRp$9.drawElements=function(context,eles){for(var i=0;i<eles.length;i++)this.drawElement(context,eles[i])};CRp$9.drawCachedElements=function(context,eles,pxRatio,extent){for(var i=0;i<eles.length;i++)this.drawCachedElement(context,eles[i],pxRatio,extent)};CRp$9.drawCachedNodes=function(context,eles,pxRatio,extent){for(var i=0;i<eles.length;i++){var ele=eles[i];ele.isNode()&&this.drawCachedElement(context,ele,pxRatio,extent)}};CRp$9.drawLayeredElements=function(context,eles,pxRatio,extent){var layers=
this.data.lyrTxrCache.getLayers(eles,pxRatio);if(layers)for(eles=0;eles<layers.length;eles++)pxRatio=layers[eles],extent=pxRatio.bb,0!==extent.w&&0!==extent.h&&context.drawImage(pxRatio.canvas,extent.x1,extent.y1,extent.w,extent.h);else this.drawCachedElements(context,eles,pxRatio,extent)};var CRp$8={drawEdge:function(context,edge,shiftToOriginWithBb){var drawLabel=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,shouldDrawOverlay=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0,
shouldDrawOpacity=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!0,r=this,rs=edge._private.rscratch;if(!(shouldDrawOpacity&&!edge.visible()||rs.badLine||null==rs.allpts||isNaN(rs.allpts[0]))){if(shiftToOriginWithBb){var bb=shiftToOriginWithBb;context.translate(-bb.x1,-bb.y1)}var opacity=shouldDrawOpacity?edge.pstyle("opacity").value:1;shouldDrawOpacity=shouldDrawOpacity?edge.pstyle("line-opacity").value:1;var curveStyle=edge.pstyle("curve-style").value,lineStyle=edge.pstyle("line-style").value,
edgeWidth=edge.pstyle("width").pfValue,lineCap=edge.pstyle("line-cap").value,effectiveLineOpacity=opacity*shouldDrawOpacity,effectiveArrowOpacity=opacity*shouldDrawOpacity;opacity=function(){var strokeOpacity=0<arguments.length&&void 0!==arguments[0]?arguments[0]:effectiveLineOpacity;"straight-triangle"===curveStyle?(r.eleStrokeStyle(context,edge,strokeOpacity),r.drawEdgeTrianglePath(edge,context,rs.allpts)):(context.lineWidth=edgeWidth,context.lineCap=lineCap,r.eleStrokeStyle(context,edge,strokeOpacity),
r.drawEdgePath(edge,context,rs.allpts,lineStyle),context.lineCap="butt")};shouldDrawOpacity=function(){r.drawArrowheads(context,edge,0<arguments.length&&void 0!==arguments[0]?arguments[0]:effectiveArrowOpacity)};context.lineJoin="round";if("yes"===edge.pstyle("ghost").value){var gx=edge.pstyle("ghost-offset-x").pfValue,gy=edge.pstyle("ghost-offset-y").pfValue,ghostOpacity=edge.pstyle("ghost-opacity").value;ghostOpacity*=effectiveLineOpacity;context.translate(gx,gy);opacity(ghostOpacity);shouldDrawOpacity(ghostOpacity);
context.translate(-gx,-gy)}shouldDrawOverlay&&r.drawEdgeUnderlay(context,edge);opacity();shouldDrawOpacity();shouldDrawOverlay&&r.drawEdgeOverlay(context,edge);r.drawElementText(context,edge,null,drawLabel);shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)}}},drawEdgeOverlayUnderlay=function(overlayOrUnderlay){if(!["overlay","underlay"].includes(overlayOrUnderlay))throw Error("Invalid state");return function(context,edge){if(edge.visible()){var opacity=edge.pstyle("".concat(overlayOrUnderlay,"-opacity")).value;
if(0!==opacity){var usePaths=this.usePaths(),rs=edge._private.rscratch,width=2*edge.pstyle("".concat(overlayOrUnderlay,"-padding")).pfValue,color=edge.pstyle("".concat(overlayOrUnderlay,"-color")).value;context.lineWidth=width;context.lineCap="self"!==rs.edgeType||usePaths?"round":"butt";this.colorStrokeStyle(context,color[0],color[1],color[2],opacity);this.drawEdgePath(edge,context,rs.allpts,"solid")}}}};CRp$8.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay");CRp$8.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay");
CRp$8.drawEdgePath=function(edge,context,pts,type){var rs=edge._private.rscratch,canvasCxt=context,pathCacheHit=!1,usePaths=this.usePaths(),lineDashPattern=edge.pstyle("line-dash-pattern").pfValue;edge=edge.pstyle("line-dash-offset").pfValue;if(usePaths){var pathCacheKey=pts.join("$");if(rs.pathCacheKey&&rs.pathCacheKey===pathCacheKey){var path=context=rs.pathCache;pathCacheHit=!0}else path=context=new Path2D,rs.pathCacheKey=pathCacheKey,rs.pathCache=path}if(canvasCxt.setLineDash)switch(type){case "dotted":canvasCxt.setLineDash([1,
1]);break;case "dashed":canvasCxt.setLineDash(lineDashPattern);canvasCxt.lineDashOffset=edge;break;case "solid":canvasCxt.setLineDash([])}if(!pathCacheHit&&!rs.badLine)switch(context.beginPath&&context.beginPath(),context.moveTo(pts[0],pts[1]),rs.edgeType){case "bezier":case "self":case "compound":case "multibezier":for(type=2;type+3<pts.length;type+=4)context.quadraticCurveTo(pts[type],pts[type+1],pts[type+2],pts[type+3]);break;case "straight":case "segments":case "haystack":for(type=2;type+1<pts.length;type+=
2)context.lineTo(pts[type],pts[type+1])}context=canvasCxt;usePaths?context.stroke(path):context.stroke();context.setLineDash&&context.setLineDash([])};CRp$8.drawEdgeTrianglePath=function(edge,context,pts){context.fillStyle=context.strokeStyle;edge=edge.pstyle("width").pfValue;for(var i=0;i+1<pts.length;i+=2){var vector=[pts[i+2]-pts[i],pts[i+3]-pts[i+1]],length=Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]);vector=[vector[1]/length,-vector[0]/length];vector=[vector[0]*edge/2,vector[1]*edge/2];
context.beginPath();context.moveTo(pts[i]-vector[0],pts[i+1]-vector[1]);context.lineTo(pts[i]+vector[0],pts[i+1]+vector[1]);context.lineTo(pts[i+2],pts[i+3]);context.closePath();context.fill()}};CRp$8.drawArrowheads=function(context,edge,opacity){var rs=edge._private.rscratch,isHaystack="haystack"===rs.edgeType;isHaystack||this.drawArrowhead(context,edge,"source",rs.arrowStartX,rs.arrowStartY,rs.srcArrowAngle,opacity);this.drawArrowhead(context,edge,"mid-target",rs.midX,rs.midY,rs.midtgtArrowAngle,
opacity);this.drawArrowhead(context,edge,"mid-source",rs.midX,rs.midY,rs.midsrcArrowAngle,opacity);isHaystack||this.drawArrowhead(context,edge,"target",rs.arrowEndX,rs.arrowEndY,rs.tgtArrowAngle,opacity)};CRp$8.drawArrowhead=function(context,edge,prefix,x,y,angle,opacity){if(!(isNaN(x)||null==x||isNaN(y)||null==y||isNaN(angle)||null==angle)){var arrowShape=edge.pstyle(prefix+"-arrow-shape").value;if("none"!==arrowShape){var arrowClearFill="hollow"===edge.pstyle(prefix+"-arrow-fill").value?"both":
"filled",arrowFill=edge.pstyle(prefix+"-arrow-fill").value,edgeWidth=edge.pstyle("width").pfValue,edgeOpacity=edge.pstyle("opacity").value;void 0===opacity&&(opacity=edgeOpacity);edgeOpacity=context.globalCompositeOperation;if(1!==opacity||"hollow"===arrowFill)context.globalCompositeOperation="destination-out",this.colorFillStyle(context,255,255,255,1),this.colorStrokeStyle(context,255,255,255,1),this.drawArrowShape(edge,context,arrowClearFill,edgeWidth,arrowShape,x,y,angle),context.globalCompositeOperation=
edgeOpacity;prefix=edge.pstyle(prefix+"-arrow-color").value;this.colorFillStyle(context,prefix[0],prefix[1],prefix[2],opacity);this.colorStrokeStyle(context,prefix[0],prefix[1],prefix[2],opacity);this.drawArrowShape(edge,context,arrowFill,edgeWidth,arrowShape,x,y,angle)}}};CRp$8.drawArrowShape=function(edge,context,fill,edgeWidth,shape,x,y,angle){var usePaths=this.usePaths()&&"triangle-cross"!==shape,pathCacheHit=!1,canvasContext=context,translation={x,y};edge=edge.pstyle("arrow-scale").value;edge=
this.getArrowWidth(edgeWidth,edge);var shapeImpl=this.arrowShapes[shape];if(usePaths){var cache=this.arrowPathCache=this.arrowPathCache||[];shape=hashString(shape);context=cache[shape];if(null!=context){var path=context;pathCacheHit=!0}else path=context=new Path2D,cache[shape]=path}pathCacheHit||(context.beginPath&&context.beginPath(),usePaths?shapeImpl.draw(context,1,0,{x:0,y:0},1):shapeImpl.draw(context,edge,angle,translation,edgeWidth),context.closePath&&context.closePath());context=canvasContext;
usePaths&&(context.translate(x,y),context.rotate(angle),context.scale(edge,edge));if("filled"===fill||"both"===fill)usePaths?context.fill(path):context.fill();if("hollow"===fill||"both"===fill)context.lineWidth=(shapeImpl.matchEdgeWidth?edgeWidth:1)/(usePaths?edge:1),context.lineJoin="miter",usePaths?context.stroke(path):context.stroke();usePaths&&(context.scale(1/edge,1/edge),context.rotate(-angle),context.translate(-x,-y))};var CRp$5={drawNode:function(context,node,shiftToOriginWithBb){var drawLabel=
3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,shouldDrawOverlay=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0,shouldDrawOpacity=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!0,r=this,_p=node._private,rs=_p.rscratch,pos=node.position();if(number$1(pos.x)&&number$1(pos.y)&&(!shouldDrawOpacity||node.visible())){var eleOpacity=shouldDrawOpacity?node.effectiveOpacity():1,usePaths=r.usePaths(),pathCacheHit=!1;shouldDrawOpacity=node.padding();var nodeWidth=node.width()+
2*shouldDrawOpacity;var nodeHeight=node.height()+2*shouldDrawOpacity;if(shiftToOriginWithBb){var bb=shiftToOriginWithBb;context.translate(-bb.x1,-bb.y1)}shouldDrawOpacity=node.pstyle("background-image").value;for(var urlDefined=Array(shouldDrawOpacity.length),image=Array(shouldDrawOpacity.length),numImages=0,i=0;i<shouldDrawOpacity.length;i++){var url=shouldDrawOpacity[i];if(urlDefined[i]=null!=url&&"none"!==url){var bgImgCrossOrigin=node.cy().style().getIndexedStyle(node,"background-image-crossorigin",
"value",i);numImages++;image[i]=r.getCachedImage(url,bgImgCrossOrigin,function(){_p.backgroundTimestamp=Date.now();node.emitAndNotify("background")})}}var darkness=node.pstyle("background-blacken").value,borderWidth=node.pstyle("border-width").pfValue,bgOpacity=node.pstyle("background-opacity").value*eleOpacity,borderColor=node.pstyle("border-color").value,borderStyle=node.pstyle("border-style").value,borderOpacity=node.pstyle("border-opacity").value*eleOpacity;context.lineJoin="miter";shouldDrawOpacity=
function(){r.eleFillStyle(context,node,0<arguments.length&&void 0!==arguments[0]?arguments[0]:bgOpacity)};i=function(){r.colorStrokeStyle(context,borderColor[0],borderColor[1],borderColor[2],0<arguments.length&&void 0!==arguments[0]?arguments[0]:borderOpacity)};bgImgCrossOrigin=node.pstyle("shape").strValue;var shapePts=node.pstyle("shape-polygon-points").pfValue;if(usePaths)if(context.translate(pos.x,pos.y),url=r.nodePathCache=r.nodePathCache||[],bgImgCrossOrigin=hashStrings("polygon"===bgImgCrossOrigin?
bgImgCrossOrigin+","+shapePts.join(","):bgImgCrossOrigin,""+nodeHeight,""+nodeWidth),shapePts=url[bgImgCrossOrigin],null!=shapePts){var path=shapePts;pathCacheHit=!0;rs.pathCache=path}else path=new Path2D,url[bgImgCrossOrigin]=rs.pathCache=path;rs=function(){if(!pathCacheHit){var npos=pos;usePaths&&(npos={x:0,y:0});r.nodeShapes[r.getNodeShape(node)].draw(path||context,npos.x,npos.y,nodeWidth,nodeHeight)}usePaths?context.fill(path):context.fill()};url=function(){for(var nodeOpacity=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:eleOpacity,inside=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,prevBging=_p.backgrounding,totalCompleted=0,_i=0;_i<image.length;_i++){var bgContainment=node.cy().style().getIndexedStyle(node,"background-image-containment","value",_i);inside&&"over"===bgContainment||!inside&&"inside"===bgContainment?totalCompleted++:urlDefined[_i]&&image[_i].complete&&!image[_i].error&&(totalCompleted++,r.drawInscribedImage(context,image[_i],node,_i,nodeOpacity))}_p.backgrounding=
totalCompleted!==numImages;prevBging!==_p.backgrounding&&node.updateStyle(!1)};bgImgCrossOrigin=function(){var redrawShape=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,pieOpacity=1<arguments.length&&void 0!==arguments[1]?arguments[1]:eleOpacity;r.hasPie(node)&&(r.drawPie(context,node,pieOpacity),redrawShape&&(usePaths||r.nodeShapes[r.getNodeShape(node)].draw(context,pos.x,pos.y,nodeWidth,nodeHeight)))};shapePts=function(){var opacity=(0<darkness?darkness:-darkness)*(0<arguments.length&&
void 0!==arguments[0]?arguments[0]:eleOpacity),c=0<darkness?0:255;0!==darkness&&(r.colorFillStyle(context,c,c,c,opacity),usePaths?context.fill(path):context.fill())};var drawBorder=function(){if(0<borderWidth){context.lineWidth=borderWidth;context.lineCap="butt";if(context.setLineDash)switch(borderStyle){case "dotted":context.setLineDash([1,1]);break;case "dashed":context.setLineDash([4,2]);break;case "solid":case "double":context.setLineDash([])}usePaths?context.stroke(path):context.stroke();if("double"===
borderStyle){context.lineWidth=borderWidth/3;var gco=context.globalCompositeOperation;context.globalCompositeOperation="destination-out";usePaths?context.stroke(path):context.stroke();context.globalCompositeOperation=gco}context.setLineDash&&context.setLineDash([])}};if("yes"===node.pstyle("ghost").value){var gx=node.pstyle("ghost-offset-x").pfValue,gy=node.pstyle("ghost-offset-y").pfValue,ghostOpacity=node.pstyle("ghost-opacity").value,effGhostOpacity=ghostOpacity*eleOpacity;context.translate(gx,
gy);shouldDrawOpacity(ghostOpacity*bgOpacity);rs();url(effGhostOpacity,!0);i(ghostOpacity*borderOpacity);drawBorder();bgImgCrossOrigin(0!==darkness||0!==borderWidth);url(effGhostOpacity,!1);shapePts(effGhostOpacity);context.translate(-gx,-gy)}usePaths&&context.translate(-pos.x,-pos.y);shouldDrawOverlay&&r.drawNodeUnderlay(context,node,pos,nodeWidth,nodeHeight);usePaths&&context.translate(pos.x,pos.y);shouldDrawOpacity();rs();url(eleOpacity,!0);i();drawBorder();bgImgCrossOrigin(0!==darkness||0!==borderWidth);
url(eleOpacity,!1);shapePts();usePaths&&context.translate(-pos.x,-pos.y);r.drawElementText(context,node,null,drawLabel);shouldDrawOverlay&&r.drawNodeOverlay(context,node,pos,nodeWidth,nodeHeight);shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)}}},drawNodeOverlayUnderlay=function(overlayOrUnderlay){if(!["overlay","underlay"].includes(overlayOrUnderlay))throw Error("Invalid state");return function(context,node,pos,nodeWidth,nodeHeight){if(node.visible()){var padding=node.pstyle("".concat(overlayOrUnderlay,
"-padding")).pfValue,opacity=node.pstyle("".concat(overlayOrUnderlay,"-opacity")).value,color=node.pstyle("".concat(overlayOrUnderlay,"-color")).value,shape=node.pstyle("".concat(overlayOrUnderlay,"-shape")).value;if(0<opacity){pos=pos||node.position();if(null==nodeWidth||null==nodeHeight)nodeHeight=node.padding(),nodeWidth=node.width()+2*nodeHeight,nodeHeight=node.height()+2*nodeHeight;this.colorFillStyle(context,color[0],color[1],color[2],opacity);this.nodeShapes[shape].draw(context,pos.x,pos.y,
nodeWidth+2*padding,nodeHeight+2*padding);context.fill()}}}};CRp$5.drawNodeOverlay=drawNodeOverlayUnderlay("overlay");CRp$5.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay");CRp$5.hasPie=function(node){node=node[0];return node._private.hasPie};CRp$5.drawPie=function(context,node,nodeOpacity,pos){node=node[0];pos=pos||node.position();var cyStyle=node.cy().style(),pieSize=node.pstyle("pie-size"),x=pos.x;pos=pos.y;var nodeW=node.width(),nodeH=node.height();nodeW=Math.min(nodeW,nodeH)/2;nodeH=0;this.usePaths()&&
(pos=x=0);"%"===pieSize.units?nodeW*=pieSize.pfValue:void 0!==pieSize.pfValue&&(nodeW=pieSize.pfValue/2);for(pieSize=1;pieSize<=cyStyle.pieBackgroundN;pieSize++){var size=node.pstyle("pie-"+pieSize+"-background-size").value,color=node.pstyle("pie-"+pieSize+"-background-color").value,opacity=node.pstyle("pie-"+pieSize+"-background-opacity").value*nodeOpacity,percent=size/100;1<percent+nodeH&&(percent=1-nodeH);var angleStart=1.5*Math.PI+2*Math.PI*nodeH,angleEnd=angleStart+2*Math.PI*percent;0===size||
1<=nodeH||1<nodeH+percent||(context.beginPath(),context.moveTo(x,pos),context.arc(x,pos,nodeW,angleStart,angleEnd),context.closePath(),this.colorFillStyle(context,color[0],color[1],color[2],opacity),context.fill(),nodeH+=percent)}};for(var CRp$3={drawPolygonPath:function(context,x,y,width,height,points){width/=2;height/=2;context.beginPath&&context.beginPath();context.moveTo(x+width*points[0],y+height*points[1]);for(var i=1;i<points.length/2;i++)context.lineTo(x+width*points[2*i],y+height*points[2*
i+1]);context.closePath()},drawRoundPolygonPath:function(context,x,y,width,height,points){var halfW=width/2,halfH=height/2;width=Math.min(width/10,height/10,8);context.beginPath&&context.beginPath();for(height=0;height<points.length/4;height++){var sourceUv=0===height?points.length-2:4*height-2;var destUv=4*height+2;var px=x+halfW*points[4*height],py=y+halfH*points[4*height+1],offset=width/Math.tan(Math.acos(-points[sourceUv]*points[destUv]-points[sourceUv+1]*points[destUv+1])/2),cp0x=px-offset*points[sourceUv];
sourceUv=py-offset*points[sourceUv+1];var cp1x=px+offset*points[destUv];destUv=py+offset*points[destUv+1];0===height?context.moveTo(cp0x,sourceUv):context.lineTo(cp0x,sourceUv);context.arcTo(px,py,cp1x,destUv,width)}context.closePath()},drawRoundRectanglePath:function(context,x,y,width,height){var halfWidth=width/2,halfHeight=height/2;width=Math.min(width/4,height/4,8);context.beginPath&&context.beginPath();context.moveTo(x,y-halfHeight);context.arcTo(x+halfWidth,y-halfHeight,x+halfWidth,y,width);
context.arcTo(x+halfWidth,y+halfHeight,x,y+halfHeight,width);context.arcTo(x-halfWidth,y+halfHeight,x-halfWidth,y,width);context.arcTo(x-halfWidth,y-halfHeight,x,y-halfHeight,width);context.lineTo(x,y-halfHeight);context.closePath()},drawBottomRoundRectanglePath:function(context,x,y,width,height){var halfWidth=width/2,halfHeight=height/2;width=Math.min(width/4,height/4,8);context.beginPath&&context.beginPath();context.moveTo(x,y-halfHeight);context.lineTo(x+halfWidth,y-halfHeight);context.lineTo(x+
halfWidth,y);context.arcTo(x+halfWidth,y+halfHeight,x,y+halfHeight,width);context.arcTo(x-halfWidth,y+halfHeight,x-halfWidth,y,width);context.lineTo(x-halfWidth,y-halfHeight);context.lineTo(x,y-halfHeight);context.closePath()},drawCutRectanglePath:function(context,x,y,width,height){width/=2;height/=2;context.beginPath&&context.beginPath();context.moveTo(x-width+8,y-height);context.lineTo(x+width-8,y-height);context.lineTo(x+width,y-height+8);context.lineTo(x+width,y+height-8);context.lineTo(x+width-
8,y+height);context.lineTo(x-width+8,y+height);context.lineTo(x-width,y+height-8);context.lineTo(x-width,y-height+8);context.closePath()},drawBarrelPath:function(context,x,y,width,height){var halfWidth=width/2,halfHeight=height/2,xBegin=x-halfWidth;x+=halfWidth;halfWidth=y-halfHeight;y+=halfHeight;halfHeight=getBarrelCurveConstants(width,height);width=halfHeight.widthOffset;height=halfHeight.heightOffset;halfHeight=halfHeight.ctrlPtOffsetPct*width;context.beginPath&&context.beginPath();context.moveTo(xBegin,
halfWidth+height);context.lineTo(xBegin,y-height);context.quadraticCurveTo(xBegin+halfHeight,y,xBegin+width,y);context.lineTo(x-width,y);context.quadraticCurveTo(x-halfHeight,y,x,y-height);context.lineTo(x,halfWidth+height);context.quadraticCurveTo(x-halfHeight,halfWidth,x-width,halfWidth);context.lineTo(xBegin+width,halfWidth);context.quadraticCurveTo(xBegin+halfHeight,halfWidth,xBegin,halfWidth+height);context.closePath()}},sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/
40,i$jscomp$1=0*Math.PI;i$jscomp$1<2*Math.PI;i$jscomp$1+=ellipseStepSize)sin[i$jscomp$1]=Math.sin(i$jscomp$1),cos[i$jscomp$1]=Math.cos(i$jscomp$1);CRp$3.drawEllipsePath=function(context,centerX,centerY,width,height){context.beginPath&&context.beginPath();if(context.ellipse)context.ellipse(centerX,centerY,width/2,height/2,0,0,2*Math.PI);else{width/=2;for(var rh=height/2,i=0*Math.PI;i<2*Math.PI;i+=ellipseStepSize){height=centerX-width*sin[i]*sin0+width*cos[i]*cos0;var yPos=centerY+rh*cos[i]*sin0+rh*
sin[i]*cos0;0===i?context.moveTo(height,yPos):context.lineTo(height,yPos)}}context.closePath()};var CRp=CanvasRenderer.prototype;CRp.CANVAS_LAYERS=3;CRp.SELECT_BOX=0;CRp.DRAG=1;CRp.NODE=2;CRp.BUFFER_COUNT=3;CRp.TEXTURE_BUFFER=0;CRp.MOTIONBLUR_BUFFER_NODE=1;CRp.MOTIONBLUR_BUFFER_DRAG=2;CRp.redrawHint=function(group,bool){switch(group){case "eles":this.data.canvasNeedsRedraw[CRp.NODE]=bool;break;case "drag":this.data.canvasNeedsRedraw[CRp.DRAG]=bool;break;case "select":this.data.canvasNeedsRedraw[CRp.SELECT_BOX]=
bool}};var pathsImpld="undefined"!==typeof Path2D;CRp.path2dEnabled=function(on){if(void 0===on)return this.pathsEnabled;this.pathsEnabled=on?!0:!1};CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled};CRp.setImgSmoothing=function(context,bool){null!=context.imageSmoothingEnabled?context.imageSmoothingEnabled=bool:(context.webkitImageSmoothingEnabled=bool,context.mozImageSmoothingEnabled=bool,context.msImageSmoothingEnabled=bool)};CRp.getImgSmoothing=function(context){return null!=context.imageSmoothingEnabled?
context.imageSmoothingEnabled:context.webkitImageSmoothingEnabled||context.mozImageSmoothingEnabled||context.msImageSmoothingEnabled};CRp.makeOffscreenCanvas=function(width,height){if("undefined"!==("undefined"===typeof OffscreenCanvas?"undefined":_typeof(OffscreenCanvas)))var canvas=new OffscreenCanvas(width,height);else canvas=document.createElement("canvas"),canvas.width=width,canvas.height=height;return canvas};[CRp$a,CRp$9,CRp$8,{safeDrawImage:function(context,img,ix,iy,iw,ih,x,y,w,h){if(!(0>=
iw||0>=ih||0>=w||0>=h))try{context.drawImage(img,ix,iy,iw,ih,x,y,w,h)}catch(e){warn(e)}},drawInscribedImage:function(context,img,node,index,nodeOpacity){var pos=node.position(),nodeX=pos.x;pos=pos.y;var styleObj=node.cy().style(),getIndexedStyle=styleObj.getIndexedStyle.bind(styleObj),fit=getIndexedStyle(node,"background-fit","value",index);styleObj=getIndexedStyle(node,"background-repeat","value",index);var nodeW=node.width(),nodeH=node.height(),paddingX2=2*node.padding();nodeW+="inner"===getIndexedStyle(node,
"background-width-relative-to","value",index)?0:paddingX2;nodeH+="inner"===getIndexedStyle(node,"background-height-relative-to","value",index)?0:paddingX2;paddingX2=node._private.rscratch;var shouldClip="node"===getIndexedStyle(node,"background-clip","value",index),imgOpacity=getIndexedStyle(node,"background-image-opacity","value",index)*nodeOpacity;nodeOpacity=getIndexedStyle(node,"background-image-smoothing","value",index);var imgW=img.width||img.cachedW,imgH=img.height||img.cachedH;if(null==imgW||
null==imgH)document.body.appendChild(img),imgW=img.cachedW=img.width||img.offsetWidth,imgH=img.cachedH=img.height||img.offsetHeight,document.body.removeChild(img);var w=imgW,h=imgH;"auto"!==getIndexedStyle(node,"background-width","value",index)&&(w="%"===getIndexedStyle(node,"background-width","units",index)?getIndexedStyle(node,"background-width","pfValue",index)*nodeW:getIndexedStyle(node,"background-width","pfValue",index));"auto"!==getIndexedStyle(node,"background-height","value",index)&&(h="%"===
getIndexedStyle(node,"background-height","units",index)?getIndexedStyle(node,"background-height","pfValue",index)*nodeH:getIndexedStyle(node,"background-height","pfValue",index));if(0!==w&&0!==h){"contain"===fit?(fit=Math.min(nodeW/w,nodeH/h),w*=fit,h*=fit):"cover"===fit&&(fit=Math.max(nodeW/w,nodeH/h),w*=fit,h*=fit);fit=nodeX-nodeW/2;var posXUnits=getIndexedStyle(node,"background-position-x","units",index),posXPfVal=getIndexedStyle(node,"background-position-x","pfValue",index);fit="%"===posXUnits?
fit+(nodeW-w)*posXPfVal:fit+posXPfVal;posXUnits=getIndexedStyle(node,"background-offset-x","units",index);posXPfVal=getIndexedStyle(node,"background-offset-x","pfValue",index);fit="%"===posXUnits?fit+(nodeW-w)*posXPfVal:fit+posXPfVal;posXUnits=pos-nodeH/2;posXPfVal=getIndexedStyle(node,"background-position-y","units",index);var posYPfVal=getIndexedStyle(node,"background-position-y","pfValue",index);posXUnits="%"===posXPfVal?posXUnits+(nodeH-h)*posYPfVal:posXUnits+posYPfVal;posXPfVal=getIndexedStyle(node,
"background-offset-y","units",index);index=getIndexedStyle(node,"background-offset-y","pfValue",index);posXUnits="%"===posXPfVal?posXUnits+(nodeH-h)*index:posXUnits+index;paddingX2.pathCache&&(fit-=nodeX,posXUnits-=pos,pos=nodeX=0);index=context.globalAlpha;context.globalAlpha=imgOpacity;getIndexedStyle=this.getImgSmoothing(context);imgOpacity=!1;"no"===nodeOpacity&&getIndexedStyle?(this.setImgSmoothing(context,!1),imgOpacity=!0):"yes"!==nodeOpacity||getIndexedStyle||(this.setImgSmoothing(context,
!0),imgOpacity=!0);"no-repeat"===styleObj?(shouldClip&&(context.save(),paddingX2.pathCache?context.clip(paddingX2.pathCache):(this.nodeShapes[this.getNodeShape(node)].draw(context,nodeX,pos,nodeW,nodeH),context.clip())),this.safeDrawImage(context,img,0,0,imgW,imgH,fit,posXUnits,w,h),shouldClip&&context.restore()):(img=context.createPattern(img,styleObj),context.fillStyle=img,this.nodeShapes[this.getNodeShape(node)].draw(context,nodeX,pos,nodeW,nodeH),context.translate(fit,posXUnits),context.fill(),
context.translate(-fit,-posXUnits));context.globalAlpha=index;imgOpacity&&this.setImgSmoothing(context,getIndexedStyle)}}},{eleTextBiggerThanMin:function(ele,scale){if(!scale){scale=ele.cy().zoom();var pxRatio=this.getPixelRatio();scale=Math.ceil(log2(scale*pxRatio));scale=Math.pow(2,scale)}scale*=ele.pstyle("font-size").pfValue;ele=ele.pstyle("min-zoomed-font-size").pfValue;return scale<ele?!1:!0},drawElementText:function(context,ele,shiftToOriginWithBb,force,prefix){var useEleOpacity=5<arguments.length&&
void 0!==arguments[5]?arguments[5]:!0;if(null==force){if(useEleOpacity&&!this.eleTextBiggerThanMin(ele))return}else if(!1===force)return;if(ele.isNode()){var label=ele.pstyle("label");if(!label||!label.value)return;label=this.getLabelJustification(ele);context.textAlign=label}else{label=ele.element()._private.rscratch.badLine;var _label=ele.pstyle("label"),srcLabel=ele.pstyle("source-label"),tgtLabel=ele.pstyle("target-label");if(label||!(_label&&_label.value||srcLabel&&srcLabel.value||tgtLabel&&
tgtLabel.value))return;context.textAlign="center"}context.textBaseline="bottom";label=!shiftToOriginWithBb;if(shiftToOriginWithBb){var bb=shiftToOriginWithBb;context.translate(-bb.x1,-bb.y1)}null==prefix?(this.drawText(context,ele,null,label,useEleOpacity),ele.isEdge()&&(this.drawText(context,ele,"source",label,useEleOpacity),this.drawText(context,ele,"target",label,useEleOpacity))):this.drawText(context,ele,prefix,label,useEleOpacity);shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)},getFontCache:function(context){this.fontCaches=
this.fontCaches||[];for(var i=0;i<this.fontCaches.length;i++){var cache=this.fontCaches[i];if(cache.context===context)return cache}cache={context};this.fontCaches.push(cache);return cache},setupTextStyle:function(context,ele){var useEleOpacity=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,labelStyle=ele.pstyle("font-style").strValue,labelSize=ele.pstyle("font-size").pfValue+"px",labelFamily=ele.pstyle("font-family").strValue,labelWeight=ele.pstyle("font-weight").strValue;useEleOpacity=
useEleOpacity?ele.effectiveOpacity()*ele.pstyle("text-opacity").value:1;var outlineOpacity=ele.pstyle("text-outline-opacity").value*useEleOpacity,color=ele.pstyle("color").value,outlineColor=ele.pstyle("text-outline-color").value;context.font=labelStyle+" "+labelWeight+" "+labelSize+" "+labelFamily;context.lineJoin="round";this.colorFillStyle(context,color[0],color[1],color[2],useEleOpacity);this.colorStrokeStyle(context,outlineColor[0],outlineColor[1],outlineColor[2],outlineOpacity)},getTextAngle:function(ele,
prefix){var rscratch=ele._private.rscratch,rotation=ele.pstyle((prefix?prefix+"-":"")+"text-rotation");prefix=getPrefixedProperty(rscratch,"labelAngle",prefix);return"autorotate"===rotation.strValue?ele.isEdge()?prefix:0:"none"===rotation.strValue?0:rotation.pfValue},drawText:function(context,ele,prefix){var applyRotation=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,useEleOpacity=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0,rscratch=ele._private.rscratch,parentOpacity=useEleOpacity?
ele.effectiveOpacity():1;if(!useEleOpacity||0!==parentOpacity&&0!==ele.pstyle("text-opacity").value){"main"===prefix&&(prefix=null);var textX=getPrefixedProperty(rscratch,"labelX",prefix),textY=getPrefixedProperty(rscratch,"labelY",prefix),text=this.getLabelText(ele,prefix);if(null!=text&&""!==text&&!isNaN(textX)&&!isNaN(textY)){this.setupTextStyle(context,ele,useEleOpacity);var pdash=prefix?prefix+"-":"";useEleOpacity=getPrefixedProperty(rscratch,"labelWidth",prefix);var textH=getPrefixedProperty(rscratch,
"labelHeight",prefix),marginX=ele.pstyle(pdash+"text-margin-x").pfValue,marginY=ele.pstyle(pdash+"text-margin-y").pfValue,isEdge=ele.isEdge();pdash=ele.pstyle("text-halign").value;var valign=ele.pstyle("text-valign").value;isEdge&&(valign=pdash="center");textX+=marginX;textY+=marginY;applyRotation=applyRotation?this.getTextAngle(ele,prefix):0;if(0!==applyRotation){var orgTextX=textX;var orgTextY=textY;context.translate(orgTextX,orgTextY);context.rotate(applyRotation);textY=textX=0}switch(valign){case "center":textY+=
textH/2;break;case "bottom":textY+=textH}var backgroundOpacity=ele.pstyle("text-background-opacity").value,borderOpacity=ele.pstyle("text-border-opacity").value,textBorderWidth=ele.pstyle("text-border-width").pfValue,backgroundPadding=ele.pstyle("text-background-padding").pfValue;if(0<backgroundOpacity||0<textBorderWidth&&0<borderOpacity){marginX=textX-backgroundPadding;switch(pdash){case "left":marginX-=useEleOpacity;break;case "center":marginX-=useEleOpacity/2}marginY=textY-textH-backgroundPadding;
isEdge=useEleOpacity+2*backgroundPadding;textH+=2*backgroundPadding;if(0<backgroundOpacity){backgroundPadding=context.fillStyle;var textBackgroundColor=ele.pstyle("text-background-color").value;context.fillStyle="rgba("+textBackgroundColor[0]+","+textBackgroundColor[1]+","+textBackgroundColor[2]+","+backgroundOpacity*parentOpacity+")";0===ele.pstyle("text-background-shape").strValue.indexOf("round")?roundRect(context,marginX,marginY,isEdge,textH,2):context.fillRect(marginX,marginY,isEdge,textH);context.fillStyle=
backgroundPadding}if(0<textBorderWidth&&0<borderOpacity){backgroundOpacity=context.strokeStyle;backgroundPadding=context.lineWidth;textBackgroundColor=ele.pstyle("text-border-color").value;var textBorderStyle=ele.pstyle("text-border-style").value;context.strokeStyle="rgba("+textBackgroundColor[0]+","+textBackgroundColor[1]+","+textBackgroundColor[2]+","+borderOpacity*parentOpacity+")";context.lineWidth=textBorderWidth;if(context.setLineDash)switch(textBorderStyle){case "dotted":context.setLineDash([1,
1]);break;case "dashed":context.setLineDash([4,2]);break;case "double":context.lineWidth=textBorderWidth/4;context.setLineDash([]);break;case "solid":context.setLineDash([])}context.strokeRect(marginX,marginY,isEdge,textH);"double"===textBorderStyle&&(parentOpacity=textBorderWidth/2,context.strokeRect(marginX+parentOpacity,marginY+parentOpacity,isEdge-2*parentOpacity,textH-2*parentOpacity));context.setLineDash&&context.setLineDash([]);context.lineWidth=backgroundPadding;context.strokeStyle=backgroundOpacity}}parentOpacity=
2*ele.pstyle("text-outline-width").pfValue;0<parentOpacity&&(context.lineWidth=parentOpacity);if("wrap"===ele.pstyle("text-wrap").value){text=getPrefixedProperty(rscratch,"labelWrapCachedLines",prefix);rscratch=getPrefixedProperty(rscratch,"labelLineHeight",prefix);marginX=useEleOpacity/2;marginY=this.getLabelJustification(ele);"auto"!==marginY&&("left"===pdash?"left"===marginY?textX+=-useEleOpacity:"center"===marginY&&(textX+=-marginX):"center"===pdash?"left"===marginY?textX+=-marginX:"right"===
marginY&&(textX+=marginX):"right"===pdash&&("center"===marginY?textX+=marginX:"right"===marginY&&(textX+=useEleOpacity)));switch(valign){case "top":textY-=(text.length-1)*rscratch;break;case "center":case "bottom":textY-=(text.length-1)*rscratch}for(useEleOpacity=0;useEleOpacity<text.length;useEleOpacity++)0<parentOpacity&&context.strokeText(text[useEleOpacity],textX,textY),context.fillText(text[useEleOpacity],textX,textY),textY+=rscratch}else 0<parentOpacity&&context.strokeText(text,textX,textY),
context.fillText(text,textX,textY);0!==applyRotation&&(context.rotate(-applyRotation),context.translate(-orgTextX,-orgTextY))}}}},CRp$5,{getPixelRatio:function(){var context=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1)},paintCache:function(context){for(var caches=
this.paintCaches=this.paintCaches||[],needToCreateCache=!0,cache,i=0;i<caches.length;i++)if(cache=caches[i],cache.context===context){needToCreateCache=!1;break}needToCreateCache&&(cache={context},caches.push(cache));return cache},createGradientStyleFor:function(context,shapeStyleName,ele,fill,opacity){var usePaths=this.usePaths(),colors=ele.pstyle(shapeStyleName+"-gradient-stop-colors").value;shapeStyleName=ele.pstyle(shapeStyleName+"-gradient-stop-positions").pfValue;if("radial-gradient"===fill)if(ele.isEdge()){fill=
ele.sourceEndpoint();var gradientStyle=ele.targetEndpoint();ele=ele.midpoint();fill=dist(fill,ele);gradientStyle=dist(gradientStyle,ele);gradientStyle=context.createRadialGradient(ele.x,ele.y,0,ele.x,ele.y,Math.max(fill,gradientStyle))}else gradientStyle=usePaths?{x:0,y:0}:ele.position(),fill=ele.paddedWidth(),ele=ele.paddedHeight(),gradientStyle=context.createRadialGradient(gradientStyle.x,gradientStyle.y,0,gradientStyle.x,gradientStyle.y,Math.max(fill,ele));else if(ele.isEdge())gradientStyle=ele.sourceEndpoint(),
ele=ele.targetEndpoint(),gradientStyle=context.createLinearGradient(gradientStyle.x,gradientStyle.y,ele.x,ele.y);else{fill=usePaths?{x:0,y:0}:ele.position();var _width=ele.paddedWidth();usePaths=ele.paddedHeight();_width/=2;usePaths/=2;switch(ele.pstyle("background-gradient-direction").value){case "to-bottom":gradientStyle=context.createLinearGradient(fill.x,fill.y-usePaths,fill.x,fill.y+usePaths);break;case "to-top":gradientStyle=context.createLinearGradient(fill.x,fill.y+usePaths,fill.x,fill.y-
usePaths);break;case "to-left":gradientStyle=context.createLinearGradient(fill.x+_width,fill.y,fill.x-_width,fill.y);break;case "to-right":gradientStyle=context.createLinearGradient(fill.x-_width,fill.y,fill.x+_width,fill.y);break;case "to-bottom-right":case "to-right-bottom":gradientStyle=context.createLinearGradient(fill.x-_width,fill.y-usePaths,fill.x+_width,fill.y+usePaths);break;case "to-top-right":case "to-right-top":gradientStyle=context.createLinearGradient(fill.x-_width,fill.y+usePaths,fill.x+
_width,fill.y-usePaths);break;case "to-bottom-left":case "to-left-bottom":gradientStyle=context.createLinearGradient(fill.x+_width,fill.y-usePaths,fill.x-_width,fill.y+usePaths);break;case "to-top-left":case "to-left-top":gradientStyle=context.createLinearGradient(fill.x+_width,fill.y+usePaths,fill.x-_width,fill.y-usePaths)}}if(!gradientStyle)return null;context=shapeStyleName.length===colors.length;ele=colors.length;for(fill=0;fill<ele;fill++)gradientStyle.addColorStop(context?shapeStyleName[fill]:
fill/(ele-1),"rgba("+colors[fill][0]+","+colors[fill][1]+","+colors[fill][2]+","+opacity+")");return gradientStyle},gradientFillStyle:function(context,ele,fill,opacity){ele=this.createGradientStyleFor(context,"background",ele,fill,opacity);if(!ele)return null;context.fillStyle=ele},colorFillStyle:function(context,r,g,b,a){context.fillStyle="rgba("+r+","+g+","+b+","+a+")"},eleFillStyle:function(context,ele,opacity){var backgroundFill=ele.pstyle("background-fill").value;"linear-gradient"===backgroundFill||
"radial-gradient"===backgroundFill?this.gradientFillStyle(context,ele,backgroundFill,opacity):(ele=ele.pstyle("background-color").value,this.colorFillStyle(context,ele[0],ele[1],ele[2],opacity))},gradientStrokeStyle:function(context,ele,fill,opacity){ele=this.createGradientStyleFor(context,"line",ele,fill,opacity);if(!ele)return null;context.strokeStyle=ele},colorStrokeStyle:function(context,r,g,b,a){context.strokeStyle="rgba("+r+","+g+","+b+","+a+")"},eleStrokeStyle:function(context,ele,opacity){var lineFill=
ele.pstyle("line-fill").value;"linear-gradient"===lineFill||"radial-gradient"===lineFill?this.gradientStrokeStyle(context,ele,lineFill,opacity):(ele=ele.pstyle("line-color").value,this.colorStrokeStyle(context,ele[0],ele[1],ele[2],opacity))},matchCanvasSize:function(container){var data=this.data,bb=this.findContainerClientCoords(),width=bb[2];bb=bb[3];var pixelRatio=this.getPixelRatio(),mbPxRatio=this.motionBlurPxRatio;if(container===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_NODE]||container===
this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_DRAG])pixelRatio=mbPxRatio;container=width*pixelRatio;mbPxRatio=bb*pixelRatio;if(container!==this.canvasWidth||mbPxRatio!==this.canvasHeight){this.fontCaches=null;var canvas=data.canvasContainer;canvas.style.width=width+"px";canvas.style.height=bb+"px";for(var i=0;i<this.CANVAS_LAYERS;i++)canvas=data.canvases[i],canvas.width=container,canvas.height=mbPxRatio,canvas.style.width=width+"px",canvas.style.height=bb+"px";for(i=0;i<this.BUFFER_COUNT;i++)canvas=
data.bufferCanvases[i],canvas.width=container,canvas.height=mbPxRatio,canvas.style.width=width+"px",canvas.style.height=bb+"px";this.textureMult=1;1>=pixelRatio&&(canvas=data.bufferCanvases[this.TEXTURE_BUFFER],this.textureMult=2,canvas.width=container*this.textureMult,canvas.height=mbPxRatio*this.textureMult);this.canvasWidth=container;this.canvasHeight=mbPxRatio}},renderTo:function(cxt,zoom,pan,pxRatio){this.render({forcedContext:cxt,forcedZoom:zoom,forcedPan:pan,drawAllLayers:!0,forcedPxRatio:pxRatio})},
render:function(options){function mbclear(context,x,y,w,h){var gco=context.globalCompositeOperation;context.globalCompositeOperation="destination-out";r.colorFillStyle(context,255,255,255,r.motionBlurTransparency);context.fillRect(x,y,w,h);context.globalCompositeOperation=gco}function setContextTransform(context,clear){if(r.clearingMotionBlur||context!==data.bufferContexts[r.MOTIONBLUR_BUFFER_NODE]&&context!==data.bufferContexts[r.MOTIONBLUR_BUFFER_DRAG]){var ePan=effectivePan;var eZoom=effectiveZoom;
var w=r.canvasWidth;var h=r.canvasHeight}else ePan={x:pan.x*mbPxRatio,y:pan.y*mbPxRatio},eZoom=zoom*mbPxRatio,w=r.canvasWidth*mbPxRatio,h=r.canvasHeight*mbPxRatio;context.setTransform(1,0,0,1,0,0);"motionBlur"===clear?mbclear(context,0,0,w,h):forcedContext||void 0!==clear&&!clear||context.clearRect(0,0,w,h);drawAllLayers||(context.translate(ePan.x,ePan.y),context.scale(eZoom,eZoom));forcedPan&&context.translate(forcedPan.x,forcedPan.y);forcedZoom&&context.scale(forcedZoom,forcedZoom)}options=options||
_staticEmptyObject;var forcedContext=options.forcedContext,drawAllLayers=options.drawAllLayers,drawOnlyNodeLayer=options.drawOnlyNodeLayer,forcedZoom=options.forcedZoom,forcedPan=options.forcedPan,r=this,pixelRatio=void 0===options.forcedPxRatio?this.getPixelRatio():options.forcedPxRatio,cy=r.cy,data=r.data,needDraw=data.canvasNeedsRedraw,textureDraw=r.textureOnViewport&&!forcedContext&&(r.pinching||r.hoverData.dragging||r.swipePanning||r.data.wheelZooming);options=void 0!==options.motionBlur?options.motionBlur:
r.motionBlur;var mbPxRatio=r.motionBlurPxRatio,hasCompoundNodes=cy.hasCompoundNodes(),inNodeDragGesture=r.hoverData.draggingEles,inBoxSelection=r.hoverData.selecting||r.touchData.selecting?!0:!1,motionBlurFadeEffect=options=options&&!forcedContext&&r.motionBlurEnabled&&!inBoxSelection;forcedContext||(r.prevPxRatio!==pixelRatio&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container),r.redrawHint("eles",!0),r.redrawHint("drag",!0)),r.prevPxRatio=pixelRatio);!forcedContext&&r.motionBlurTimeout&&
clearTimeout(r.motionBlurTimeout);options&&(null==r.mbFrames&&(r.mbFrames=0),r.mbFrames++,3>r.mbFrames&&(motionBlurFadeEffect=!1),r.mbFrames>r.minMbLowQualFrames&&(r.motionBlurPxRatio=r.mbPxRBlurry));r.clearingMotionBlur&&(r.motionBlurPxRatio=1);r.textureDrawLastFrame&&!textureDraw&&(needDraw[r.NODE]=!0,needDraw[r.SELECT_BOX]=!0);var style=cy.style(),zoom=cy.zoom(),effectiveZoom=void 0!==forcedZoom?forcedZoom:zoom,pan=cy.pan(),effectivePan={x:pan.x,y:pan.y};inBoxSelection={zoom,pan:{x:pan.x,y:pan.y}};
var prevVp=r.prevViewport;void 0===prevVp||inBoxSelection.zoom!==prevVp.zoom||inBoxSelection.pan.x!==prevVp.pan.x||inBoxSelection.pan.y!==prevVp.pan.y||inNodeDragGesture&&!hasCompoundNodes||(r.motionBlurPxRatio=1);forcedPan&&(effectivePan=forcedPan);effectiveZoom*=pixelRatio;effectivePan.x*=pixelRatio;effectivePan.y*=pixelRatio;prevVp=r.getCachedZSortedEles();textureDraw||(r.textureDrawLastFrame=!1);if(textureDraw){r.textureDrawLastFrame=!0;r.textureCache||(r.textureCache={},r.textureCache.bb=cy.mutableElements().boundingBox(),
r.textureCache.texture=r.data.bufferCanvases[r.TEXTURE_BUFFER],inBoxSelection=r.data.bufferContexts[r.TEXTURE_BUFFER],inBoxSelection.setTransform(1,0,0,1,0,0),inBoxSelection.clearRect(0,0,r.canvasWidth*r.textureMult,r.canvasHeight*r.textureMult),r.render({forcedContext:inBoxSelection,drawOnlyNodeLayer:!0,forcedPxRatio:pixelRatio*r.textureMult}),inBoxSelection=r.textureCache.viewport={zoom:cy.zoom(),pan:cy.pan(),width:r.canvasWidth,height:r.canvasHeight},inBoxSelection.mpan={x:(0-inBoxSelection.pan.x)/
inBoxSelection.zoom,y:(0-inBoxSelection.pan.y)/inBoxSelection.zoom});needDraw[r.DRAG]=!1;needDraw[r.NODE]=!1;inNodeDragGesture=data.contexts[r.NODE];hasCompoundNodes=r.textureCache.texture;inBoxSelection=r.textureCache.viewport;inNodeDragGesture.setTransform(1,0,0,1,0,0);options?mbclear(inNodeDragGesture,0,0,inBoxSelection.width,inBoxSelection.height):inNodeDragGesture.clearRect(0,0,inBoxSelection.width,inBoxSelection.height);var outsideBgColor=style.core("outside-texture-bg-color").value,outsideBgOpacity=
style.core("outside-texture-bg-opacity").value;r.colorFillStyle(inNodeDragGesture,outsideBgColor[0],outsideBgColor[1],outsideBgColor[2],outsideBgOpacity);inNodeDragGesture.fillRect(0,0,inBoxSelection.width,inBoxSelection.height);zoom=cy.zoom();setContextTransform(inNodeDragGesture,!1);inNodeDragGesture.clearRect(inBoxSelection.mpan.x,inBoxSelection.mpan.y,inBoxSelection.width/inBoxSelection.zoom/pixelRatio,inBoxSelection.height/inBoxSelection.zoom/pixelRatio);inNodeDragGesture.drawImage(hasCompoundNodes,
inBoxSelection.mpan.x,inBoxSelection.mpan.y,inBoxSelection.width/inBoxSelection.zoom/pixelRatio,inBoxSelection.height/inBoxSelection.zoom/pixelRatio)}else r.textureOnViewport&&!forcedContext&&(r.textureCache=null);outsideBgColor=cy.extent();hasCompoundNodes=r.pinching||r.hoverData.dragging||r.swipePanning||r.data.wheelZooming||r.hoverData.draggingEles||r.cy.animated();outsideBgOpacity=r.hideEdgesOnViewport&&hasCompoundNodes;hasCompoundNodes=[];hasCompoundNodes[r.NODE]=!needDraw[r.NODE]&&options&&
!r.clearedForMotionBlur[r.NODE]||r.clearingMotionBlur;hasCompoundNodes[r.NODE]&&(r.clearedForMotionBlur[r.NODE]=!0);hasCompoundNodes[r.DRAG]=!needDraw[r.DRAG]&&options&&!r.clearedForMotionBlur[r.DRAG]||r.clearingMotionBlur;hasCompoundNodes[r.DRAG]&&(r.clearedForMotionBlur[r.DRAG]=!0);if(needDraw[r.NODE]||drawAllLayers||drawOnlyNodeLayer||hasCompoundNodes[r.NODE]){var useBuffer=options&&!hasCompoundNodes[r.NODE]&&1!==mbPxRatio;inNodeDragGesture=forcedContext||(useBuffer?r.data.bufferContexts[r.MOTIONBLUR_BUFFER_NODE]:
data.contexts[r.NODE]);setContextTransform(inNodeDragGesture,options&&!useBuffer?"motionBlur":void 0);outsideBgOpacity?r.drawCachedNodes(inNodeDragGesture,prevVp.nondrag,pixelRatio,outsideBgColor):r.drawLayeredElements(inNodeDragGesture,prevVp.nondrag,pixelRatio,outsideBgColor);r.debug&&r.drawDebugPoints(inNodeDragGesture,prevVp.nondrag);drawAllLayers||options||(needDraw[r.NODE]=!1)}!drawOnlyNodeLayer&&(needDraw[r.DRAG]||drawAllLayers||hasCompoundNodes[r.DRAG])&&(useBuffer=options&&!hasCompoundNodes[r.DRAG]&&
1!==mbPxRatio,inNodeDragGesture=forcedContext||(useBuffer?r.data.bufferContexts[r.MOTIONBLUR_BUFFER_DRAG]:data.contexts[r.DRAG]),setContextTransform(inNodeDragGesture,options&&!useBuffer?"motionBlur":void 0),outsideBgOpacity?r.drawCachedNodes(inNodeDragGesture,prevVp.drag,pixelRatio,outsideBgColor):r.drawCachedElements(inNodeDragGesture,prevVp.drag,pixelRatio,outsideBgColor),r.debug&&r.drawDebugPoints(inNodeDragGesture,prevVp.drag),drawAllLayers||options||(needDraw[r.DRAG]=!1));if(r.showFps||!drawOnlyNodeLayer&&
needDraw[r.SELECT_BOX]&&!drawAllLayers)inNodeDragGesture=forcedContext||data.contexts[r.SELECT_BOX],setContextTransform(inNodeDragGesture),1==r.selection[4]&&(r.hoverData.selecting||r.touchData.selecting)&&(zoom=r.cy.zoom(),drawOnlyNodeLayer=style.core("selection-box-border-width").value/zoom,inNodeDragGesture.lineWidth=drawOnlyNodeLayer,inNodeDragGesture.fillStyle="rgba("+style.core("selection-box-color").value[0]+","+style.core("selection-box-color").value[1]+","+style.core("selection-box-color").value[2]+
","+style.core("selection-box-opacity").value+")",inNodeDragGesture.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),0<drawOnlyNodeLayer&&(inNodeDragGesture.strokeStyle="rgba("+style.core("selection-box-border-color").value[0]+","+style.core("selection-box-border-color").value[1]+","+style.core("selection-box-border-color").value[2]+","+style.core("selection-box-opacity").value+")",inNodeDragGesture.strokeRect(r.selection[0],r.selection[1],r.selection[2]-
r.selection[0],r.selection[3]-r.selection[1]))),data.bgActivePosistion&&!r.hoverData.selecting&&(zoom=r.cy.zoom(),drawOnlyNodeLayer=data.bgActivePosistion,inNodeDragGesture.fillStyle="rgba("+style.core("active-bg-color").value[0]+","+style.core("active-bg-color").value[1]+","+style.core("active-bg-color").value[2]+","+style.core("active-bg-opacity").value+")",inNodeDragGesture.beginPath(),inNodeDragGesture.arc(drawOnlyNodeLayer.x,drawOnlyNodeLayer.y,style.core("active-bg-size").pfValue/zoom,0,2*Math.PI),
inNodeDragGesture.fill()),drawOnlyNodeLayer=r.lastRedrawTime,r.showFps&&drawOnlyNodeLayer&&(drawOnlyNodeLayer=Math.round(drawOnlyNodeLayer),pixelRatio=Math.round(1E3/drawOnlyNodeLayer),inNodeDragGesture.setTransform(1,0,0,1,0,0),inNodeDragGesture.fillStyle="rgba(255, 0, 0, 0.75)",inNodeDragGesture.strokeStyle="rgba(255, 0, 0, 0.75)",inNodeDragGesture.lineWidth=1,inNodeDragGesture.fillText("1 frame \x3d "+drawOnlyNodeLayer+" ms \x3d "+pixelRatio+" fps",0,20),inNodeDragGesture.strokeRect(0,30,250,20),
inNodeDragGesture.fillRect(0,30,250*Math.min(pixelRatio/60,1),20)),drawAllLayers||(needDraw[r.SELECT_BOX]=!1);if(options&&1!==mbPxRatio){drawOnlyNodeLayer=data.contexts[r.NODE];pixelRatio=r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_NODE];style=data.contexts[r.DRAG];inNodeDragGesture=r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_DRAG];prevVp=function(cxt,txt,needClear){cxt.setTransform(1,0,0,1,0,0);needClear||!motionBlurFadeEffect?cxt.clearRect(0,0,r.canvasWidth,r.canvasHeight):mbclear(cxt,0,0,r.canvasWidth,
r.canvasHeight);needClear=mbPxRatio;cxt.drawImage(txt,0,0,r.canvasWidth*needClear,r.canvasHeight*needClear,0,0,r.canvasWidth,r.canvasHeight)};if(needDraw[r.NODE]||hasCompoundNodes[r.NODE])prevVp(drawOnlyNodeLayer,pixelRatio,hasCompoundNodes[r.NODE]),needDraw[r.NODE]=!1;if(needDraw[r.DRAG]||hasCompoundNodes[r.DRAG])prevVp(style,inNodeDragGesture,hasCompoundNodes[r.DRAG]),needDraw[r.DRAG]=!1}r.prevViewport=inBoxSelection;r.clearingMotionBlur&&(r.clearingMotionBlur=!1,r.motionBlurCleared=!0,r.motionBlur=
!0);options&&(r.motionBlurTimeout=setTimeout(function(){r.motionBlurTimeout=null;r.clearedForMotionBlur[r.NODE]=!1;r.clearedForMotionBlur[r.DRAG]=!1;r.motionBlur=!1;r.clearingMotionBlur=!textureDraw;r.mbFrames=0;needDraw[r.NODE]=!0;needDraw[r.DRAG]=!0;r.redraw()},100));forcedContext||cy.emit("render")}},CRp$3,{createBuffer:function(w,h){var buffer=document.createElement("canvas");buffer.width=w;buffer.height=h;return[buffer,buffer.getContext("2d")]},bufferCanvasImage:function(options){var cy=this.cy,
bb=cy.mutableElements().boundingBox(),ctrRect=this.findContainerClientCoords(),width=options.full?Math.ceil(bb.w):ctrRect[2];ctrRect=options.full?Math.ceil(bb.h):ctrRect[3];var specdMaxDims=number$1(options.maxWidth)||number$1(options.maxHeight),pxRatio=this.getPixelRatio(),scale=1;if(void 0!==options.scale)width*=options.scale,ctrRect*=options.scale,scale=options.scale;else if(specdMaxDims){var maxScaleW=Infinity,maxScaleH=Infinity;number$1(options.maxWidth)&&(maxScaleW=scale*options.maxWidth/width);
number$1(options.maxHeight)&&(maxScaleH=scale*options.maxHeight/ctrRect);scale=Math.min(maxScaleW,maxScaleH);width*=scale;ctrRect*=scale}specdMaxDims||(width*=pxRatio,ctrRect*=pxRatio,scale*=pxRatio);specdMaxDims=document.createElement("canvas");specdMaxDims.width=width;specdMaxDims.height=ctrRect;specdMaxDims.style.width=width+"px";specdMaxDims.style.height=ctrRect+"px";pxRatio=specdMaxDims.getContext("2d");0<width&&0<ctrRect&&(pxRatio.clearRect(0,0,width,ctrRect),pxRatio.globalCompositeOperation=
"source-over",maxScaleW=this.getCachedZSortedEles(),options.full?(pxRatio.translate(-bb.x1*scale,-bb.y1*scale),pxRatio.scale(scale,scale),this.drawElements(pxRatio,maxScaleW),pxRatio.scale(1/scale,1/scale),pxRatio.translate(bb.x1*scale,bb.y1*scale)):(maxScaleH=cy.pan(),bb=maxScaleH.x*scale,maxScaleH=maxScaleH.y*scale,scale*=cy.zoom(),pxRatio.translate(bb,maxScaleH),pxRatio.scale(scale,scale),this.drawElements(pxRatio,maxScaleW),pxRatio.scale(1/scale,1/scale),pxRatio.translate(-bb,-maxScaleH)),options.bg&&
(pxRatio.globalCompositeOperation="destination-over",pxRatio.fillStyle=options.bg,pxRatio.rect(0,0,width,ctrRect),pxRatio.fill()));return specdMaxDims},png:function(options){return output(options,this.bufferCanvasImage(options),"image/png")},jpg:function(options){return output(options,this.bufferCanvasImage(options),"image/jpeg")}},{nodeShapeImpl:function(name,context,centerX,centerY,width,height,points){switch(name){case "ellipse":return this.drawEllipsePath(context,centerX,centerY,width,height);
case "polygon":return this.drawPolygonPath(context,centerX,centerY,width,height,points);case "round-polygon":return this.drawRoundPolygonPath(context,centerX,centerY,width,height,points);case "roundrectangle":case "round-rectangle":return this.drawRoundRectanglePath(context,centerX,centerY,width,height);case "cutrectangle":case "cut-rectangle":return this.drawCutRectanglePath(context,centerX,centerY,width,height);case "bottomroundrectangle":case "bottom-round-rectangle":return this.drawBottomRoundRectanglePath(context,
centerX,centerY,width,height);case "barrel":return this.drawBarrelPath(context,centerX,centerY,width,height)}}}].forEach(function(props){extend(CRp,props)});var incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CanvasRenderer}]}],extensions={},modules={},extension=function(){if(2===arguments.length)return getExtension.apply(null,arguments);if(3===arguments.length)return setExtension.apply(null,arguments);
if(4===arguments.length)return getModule.apply(null,arguments);if(5===arguments.length)return setModule.apply(null,arguments);error("Invalid extension access syntax")};Core.prototype.extension=extension;incExts.forEach(function(group){group.extensions.forEach(function(ext){setExtension(group.type,ext.name,ext.impl)})});var Stylesheet=function Stylesheet(){if(!(this instanceof Stylesheet))return new Stylesheet;this.length=0},sheetfn=Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"};
sheetfn.selector=function(selector){this[this.length++]={selector,properties:[]};return this};sheetfn.css=function(name,value){var i=this.length-1;if(string$jscomp$0(name))this[i].properties.push({name,value});else if(plainObject(name)){value=Object.keys(name);for(var j=0;j<value.length;j++){var key=value[j],mapVal=name[key];null!=mapVal&&(key=Style.properties[key]||Style.properties[dash2camel(key)],null!=key&&this[i].properties.push({name:key.name,value:mapVal}))}}return this};sheetfn.style=sheetfn.css;
sheetfn.generateStyle=function(cy){cy=new Style(cy);return this.appendToStyle(cy)};sheetfn.appendToStyle=function(style){for(var i=0;i<this.length;i++){var context=this[i],props=context.properties;style.selector(context.selector);for(context=0;context<props.length;context++){var prop=props[context];style.css(prop.name,prop.value)}}return style};var cytoscape=function(options){void 0===options&&(options={});if(plainObject(options))return new Core(options);if(string$jscomp$0(options))return extension.apply(extension,
arguments)};cytoscape.use=function(ext){var args=Array.prototype.slice.call(arguments,1);args.unshift(cytoscape);ext.apply(null,args);return this};cytoscape.warnings=function(bool){return warnings(bool)};cytoscape.version="3.26.0";cytoscape.stylesheet=cytoscape.Stylesheet=Stylesheet;module.exports=cytoscape}
//# sourceMappingURL=module$node_modules$cytoscape$dist$cytoscape_cjs.js.map
