{"version":3,"sources":["goldly/sci/kernel_cljs.cljs"],"mappings":"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","names":["var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","goldly.sci.kernel-cljs/require-async","seq55200","self__5755__auto__","cljs.core/seq","libspec","cljs.core.apply","sci.async/require","goldly.sci.kernel-cljs/ctx-repl","goldly.sci.kernel-cljs/compile-code","code","e55201","sci.core/eval-string*","e","taoensso.timbre._log_BANG_","taoensso.timbre/*config*","cljs.core/Delay","goldly.sci.kernel-cljs/resolve-symbol","sym","sci.impl.resolve.resolve_symbol","goldly.sci.kernel-cljs/sci-ns-lookup","libname","temp__5802__auto__","module-name","cljs.core.get","goldly-bindings-generated/sci-lazy-ns-dict","goldly-bindings-generated/lazy-modules","goldly.sci.kernel-cljs/add-sci-ns","ctx","ns","opts","sci-ns","sci-defs","ns-vars","mlns","sci.core.create_ns","sci-ns-def","cljs.core.map","sci-def","ns-var","cljs.core._EQ_","sci.core.new_var","cljs.core.into","sci.core/add-namespace!","goldly.sci.kernel-cljs/load-module-ns","loadable","goldly.sci.load-shadow/load-ext-shadow","goldly.sci.kernel-cljs/load-module","sci-mod","promises","p__55202","vec__55203","cljs.core.nth","map__55206","cljs.core/--destructure-map","p-all","promesa.core/all","_d","goldly.sci.kernel-cljs/load-module-test","js/Promise.resolve","mod","cljs.core.js__GT_clj","sci.core/add-class!","sci.core/add-import!","goldly.sci.kernel-cljs/ns->filename","clojure.string/replace","p__55207","map__55208","goldly.sci.kernel-cljs/valid-code?","result","and__5043__auto__","clojure.string/blank?","p__55209","vec__55210","map__55213","goldly.sci.kernel-cljs/on-cljs-received","resolve","reject","event-type","data","eval-p","sci.async.eval_string_PLUS_","res","map__55214","val","temp__5804__auto__","as","cljs.core.symbol","G__55215","goldly.sci.kernel-cljs/application-url","cemerick.url.url","js/window","p__55216","map__55217","goldly.sci.kernel-cljs/load-module-sci","property-path","d","filename","url","js/Promise","c__41381__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__41382__auto__","switch__41305__auto__","state_55245","state_val_55246","inst_55218","statearr-55247","statearr-55248","statearr-55249","statearr-55250","inst_55221","inst_55222","inst_55223","cljs.core/PersistentHashMap","statearr-55251","inst_55225","inst_55226","statearr-55252","cljs.core.async.impl.ioc-helpers/take!","inst_55228","inst_55229","inst_55230","inst_55231","inst_55232","inst_55233","inst_55234","cljs.core/PersistentVector","inst_55235","inst_55236","inst_55237","inst_55238","inst_55239","inst_55240","inst_55241","inst_55242","inst_55243","statearr-55253","cljs.core.async.impl.ioc-helpers/return-chan","statearr-55254","state-machine__41306__auto__","ret-value__41307__auto__","result__41308__auto__","cljs.core/keyword-identical?","ex__41309__auto__","e55255","statearr-55256","statearr-55257","cljs.core/first","state__41383__auto__","statearr-55258","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","response","cljs_http.client.get","status","body","p__55259","map__55260","goldly.sci.kernel-cljs/async-load-fn","goldly.sci.kernel-cljs/!last-ns","cljs.core/deref","cljs.core.atom","sci.core/ns","cljs.core/enable-console-print!","goldly.sci.kernel-cljs/output","goldly.sci.kernel-cljs/my-print-fn","seq55261","args","js/console.log","js/console","cljs.core.into_array","cljs.core/str","cljs.core.swap_BANG_","sci.core.alter_var_root","sci.core/print-fn","cljs.core/constantly","sci.core/print-err-fn","cljs.core/*print-err-fn*","goldly.sci.kernel-cljs/compile-code-async","e55262","bm__52092__auto__","cljs.core/map?","js/Error","sci.impl.vars/push-thread-bindings","sci.impl.vars/pop-thread-bindings","map__55263","cljs.core/reset!","goldly.sci.kernel-cljs/rns","goldly.sci.kernel-cljs/ctx-static","goldly-bindings-generated/bindings-generated","cljs.core.merge","goldly-bindings-generated/ns-generated","ns__52079__auto__","var__52080__auto__","goldly.sci.clojure-core/time","val__52081__auto__","m__52082__auto__","cljs.core/meta","name__52083__auto__","or__5045__auto__","new-m__52084__auto__","sci.core.new_dynamic_var","sci.core.new_macro_var","goldly.sci.clojure-core/cljns","cljs.core/system-time","cljs.core/random-uuid","cljs.reader/read-string","sci.core/init"],"sourcesContent":["(ns goldly.sci.kernel-cljs\n  (:require\n   [taoensso.timbre :as timbre :refer-macros [debug debugf info warn error]]\n   [promesa.core]\n   [cljs.reader :refer [read-string]]\n   ; sci\n   [sci.core :as sci]\n   [sci.async :as scia]\n   [sci.impl.resolve :as sci-resolve]\n   ; bindings\n   ;[goldly.sci.bindings-static :refer [ns-static]]\n   [goldly-bindings-generated :refer [bindings-generated ns-generated\n                                      sci-lazy-ns-dict lazy-modules]]\n   [goldly.sci.load-shadow :refer [load-ext-shadow]]\n   [goldly.sci.clojure-core :refer [cljns] :as clojure-core]\n   ; loading of cljs source-code\n   ;[goldly.service.core :refer [run-cb]]\n   [clojure.string]\n   [cljs.core.async :refer [<! >! chan close!] :refer-macros [go]]\n   [cljs-http.client :as http]\n   [cemerick.url :as curl]))\n\n(declare ctx-repl) ; since we want to add compile-sci to the bindings, we have to declare the ctx later\n\n(defn ^:export require-async [& libspec] ; symbol\n  (apply scia/require ctx-repl libspec))\n\n; from scittle\n;(defn ^:export eval-string [s]\n;  (try (sci/eval-string* @ctx s)\n;       (catch :default e\n;         (error/error-handler e (:src @ctx))\n;         (let [sci-error? (isa? (:type (ex-data e)) :sci/error)]\n;           (throw (if sci-error?\n;                    (or (ex-cause e) e)\n;                    e))))))\n\n(defn ^:export compile-code [code]\n  (try\n    {:result (sci/eval-string* ctx-repl code)}\n    (catch :default e\n      (timbre/error \"sci compile-code --]\" code \"[-- ex: \" e)\n      {:error  {:root-ex (.-data e)\n                :err (.-message e)}})))\n\n(defn resolve-symbol [sym]\n  (sci-resolve/resolve-symbol ctx-repl sym))\n\n(defn sci-ns-lookup [libname]\n  ; (str libname)\n  ;(debug \"available lazy namespaces:\" (pr-str sci-lazy-ns-dict))\n  (debug \"looking up module for sci-ns:\" libname)\n  (if-let [module-name (get sci-lazy-ns-dict libname)]\n    (do (info \"module for \" libname \": \" module-name)\n        (get lazy-modules module-name))\n    (do (info \"no lazy-module found for: \" libname)\n        nil)))\n\n(defn add-sci-ns [ctx libname ns opts sci-ns sci-defs ns-vars]\n  (info \"creating sci ns: \" sci-ns \"ns-vars:\" ns-vars \"sci-defs\" sci-defs)\n  (let [mlns (sci/create-ns sci-ns)\n        sci-ns-def (->> (map (fn [sci-def ns-var]\n                               ;(info \"ci-def:\" sci-def \"ns-var:\" ns-var)\n                               ;(when-let [joke (:joke mod)]\n                               ;  (info \"joke: \" (joke)))\n                               (when (= sci-def :add)\n                                 (info \"TEST: adding: \" (ns-var 7 7)))\n\n                               [sci-def (sci/new-var sci-def ns-var {:ns mlns})])\n                             sci-defs ns-vars)\n                        (into {}))]\n    (info \"sci/add-namespace! sci-ns: \" libname \" sci ns :\" sci-ns \"def: \" sci-ns-def)\n    (sci/add-namespace! ctx libname sci-ns-def)))\n\n(defn load-module-ns [ctx libname ns opts sci-ns sci-def loadable]\n  (-> (load-ext-shadow loadable)\n      (.then\n       (fn [ns-vars]\n         (info \"received ns-vars for sci-ns: \" sci-ns \"libname: \" libname \"ns: \" ns)\n         (add-sci-ns ctx libname ns opts sci-ns sci-def ns-vars)))))\n\n(defn load-module [ctx libname ns opts sci-mod]\n  (info \"load-module: \" libname)\n  (let [promises (map (fn [[sci-ns {:keys [sci-def loadable]}]]\n                        (load-module-ns ctx libname ns opts sci-ns sci-def loadable))\n                      sci-mod)\n        p-all (promesa.core/all promises) ; Given an array of promises, return a promise that is fulfilled when all the items in the array are fulfilled.\n        ]\n    (.then p-all\n           (fn [_d]\n             (info \"load-module: \" libname \" - finished loading all namespaces\")\n             ;(info \"all data: \" d)\n             ;; empty map return value, SCI will still process `:as` and `:refer`\n             {}))))\n\n(defn load-module-test [ctx libname ns opts]\n  (-> (js/Promise.resolve #js {:libfn (fn [] \"result!\")})\n      (.then (fn [mod]\n               (info \"demo lib : \" libname \"did load: \" mod \"mod-clj:\" (js->clj mod))\n               (sci/add-class! ctx (:as opts) mod)\n               (sci/add-import! ctx ns (:as opts) (:as opts))\n               {:handled true}))))\n\n; discover clj/cljs files in resources (can be jar or file)\n\n(defn ns->filename [ns]\n  (-> ns\n      (clojure.string/replace #\"\\.\" \"/\")\n      (clojure.string/replace #\"\\-\" \"_\")))\n\n(defn valid-code? [{:keys [code] :as result}]\n  (and code\n       (not (clojure.string/blank? code))))\n\n(defn on-cljs-received [ctx libname ns opts resolve reject [event-type {:keys [result] :as data}]]\n  (info \"on-cljs-received: \" event-type \"data: \" data)\n  (if (valid-code? result)\n    (let [code (:code result)\n          eval-p (scia/eval-string+ ctx code)]\n      (.then eval-p (fn [res]\n                      (let [{:keys [val ns]} res]\n                        (info \"sci-cljs loader require - compile result: \" res)\n                        (when-let [as (:as opts)]\n                             ;; import class in current namespace with reference to globally\n                             ;; registed class\n                          (warn \"registering as: \" as \"in ns: \" ns \" to:\" (symbol libname))\n                          (sci/add-import! ctx ns (symbol libname) (:as opts)))\n                        (resolve {:handled false}))))\n      (.catch eval-p (fn [e]\n                       (error \"compile error for: \" libname \" error: \" e)\n                       (reject \"compile error for: \" libname))))\n    (reject \"no sci-code for: \" libname)))\n\n#_(defn load-module-sci [{:keys [ctx libname ns opts property-path] :as d}]\n  ; libname: bongo.trott ; the ns that gets compiled\n  ; ns:  demo.notebook.applied-science-jsinterop ; the namespace that is using it\n  ; opts: {:as bongo, :refer [saying]}\n  ; ctx is the sci-context\n    (info \"load-sci-src\" \"libname:\" libname \"ns: \" ns \"opts:\" opts)\n    (let [filename (-> libname str ns->filename (str \".cljs\"))]\n      (info \"loading filename: \" filename)\n      (js/Promise.\n       (fn [resolve reject]\n         (run-cb {:fun 'goldly.cljs.loader/load-file-or-res!\n                  :args [filename]\n                  :cb (partial on-cljs-received ctx libname ns opts resolve reject)\n                  :timeout 8000})))))\n\n(defn application-url\n  \"gets the current url, as a map\"\n  []\n  (curl/url (-> js/window .-location .-href)))\n\n(defn load-module-sci [{:keys [ctx libname ns opts property-path] :as d}]\n  ; libname: bongo.trott ; the ns that gets compiled\n  ; ns:  demo.notebook.applied-science-jsinterop ; the namespace that is using it\n  ; opts: {:as bongo, :refer [saying]}\n  ; ctx is the sci-context\n  (info \"load-sci-src\" \"libname:\" libname \"ns: \" ns \"opts:\" opts)\n  (let [filename (-> libname str ns->filename (str \".cljs\"))\n        url (str \"/code/\" filename)]\n    (info \"loading filename: \" filename)\n    (js/Promise.\n     (fn [resolve reject]\n       (go (let [opts (or opts {:with-credentials? false})\n                 response (<! (http/get url opts))\n                 status (:status response)\n                 body (:body response)]\n             (info \"load-module-sci-cljs url: \" url \"status: \" status \"body: \" body)\n             (on-cljs-received ctx libname ns opts resolve reject [:http-load {:result {:code body}}])))))))\n\n(defn async-load-fn\n  [{:keys [libname opts ctx ns] :as d}]\n  (let [sci-mod (sci-ns-lookup libname)]\n    (cond\n      (= libname \"some_js_lib\")\n      (load-module-test ctx libname ns opts)\n\n      sci-mod\n      (load-module ctx libname opts ns sci-mod)\n\n      :else\n      (load-module-sci d))))\n\n(def !last-ns (atom @sci/ns))\n\n;; allow printing\n\n(enable-console-print!) ; this defines *print-fn*\n\n(def output (atom \"\"))\n\n(defn my-print-fn [& args]\n  (.apply js/console.log js/console (into-array args))\n  ; https://github.com/clojure/clojurescript/commit/da2fa520ae5cd55ade7e263ec3b9a2149eb12f82\n  (let [args (apply str args)\n        args (str args \"\\n\")]\n    (swap! output str args)\n    ;(apply *print-fn* args)\n    ))\n\n;(sci/alter-var-root sci/print-fn (constantly *print-fn*))\n(sci/alter-var-root sci/print-fn (constantly my-print-fn))\n(sci/alter-var-root sci/print-err-fn (constantly *print-err-fn*))\n\n(defn ^:export compile-code-async [code]\n  (try\n    (sci/binding [;sci/out *out* ;; this enables println etc.\n                   ; *print-fn*\n                   ; sci/print-newline true\n                   ; sci/print-fn (fn [s]\n                   ;                (.log js/console \"*print-fn*\")\n                   ;                (.log js/console s)\n                   ;               )\n                  sci/ns @!last-ns]\n      (let [eval-p (scia/eval-string+ ctx-repl code)]\n        (.then eval-p (fn [res]\n                        (let [{:keys [val ns]} res\n                              result  {:id nil\n                                       :code code\n                                       :value val\n                                       :out @output\n                                       :ns (str ns)}]\n                          (reset! !last-ns ns)\n                          (reset! output \"\")\n                          (info \"sci-cljs response: \" result)\n                          result)))))\n    (catch :default e\n      (timbre/error \"sci compile-code-async --]\" code \"[-- ex: \" e)\n      {:error  {:root-ex (.-data e)\n                :err (.-message e)}})))\n\n(def rns (sci/create-ns 'cljs.reader nil))\n\n(def ctx-static\n  {:bindings bindings-generated\n   :preset {:termination-safe false} ; was: true\n   :namespaces (merge\n                ns-generated   ; ns-static\n                {'clojure.core {'require scia/require\n                                'time (sci/copy-var clojure-core/time cljns)\n                                'system-time (sci/copy-var system-time cljns)\n                                'random-uuid random-uuid\n                                'read-string (sci/copy-var read-string rns)\n                                ;'println (sci/copy-var clojure.core/println cljns)\n                               ; '*print-fn* (sci/copy-var clojure.core/println cljns)\n                                }\n                 'goldly.sci {'require-async require-async\n                              'compile-sci compile-code\n                              'compile-sci-async compile-code-async\n                              'resolve-symbol-sci resolve-symbol}})\n\n   :classes  {'js js/window :allow :all}\n   ;:classes  {'js goog/global :allow :all} ; In JS hosts, to allow interop with anything, use the following config:\n   ;:classes {'js js/goog.global\n             ;:allow :all\n            ; 'js goog.global ; this returns the same as window.\n            ; 'console js/console\n            ; 'String js/String\n             ;'js2 js/window\n             ;'window js/window\n    ;         }\n   :disable-arity-checks true ; from clerk\n   :async-load-fn async-load-fn})\n\n(def ctx-repl (sci/init ctx-static))\n\n"]}