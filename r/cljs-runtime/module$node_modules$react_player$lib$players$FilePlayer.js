shadow$provide.module$node_modules$react_player$lib$players$FilePlayer=function(global,require,module,exports){function _typeof(obj$jscomp$0){"@babel/helpers - typeof";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj$jscomp$0)}function _getRequireWildcardCache(){if("function"!==typeof WeakMap)return null;
var cache=new WeakMap;_getRequireWildcardCache=function(){return cache};return cache}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i],key;for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};return _extends.apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;
descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=
Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o$jscomp$0,p$jscomp$0){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o$jscomp$0,p$jscomp$0)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=
_getPrototypeOf(this).constructor;Super=Reflect.construct(Super,arguments,NewTarget)}else Super=Super.apply(this,arguments);Super=!Super||"object"!==_typeof(Super)&&"function"!==typeof Super?_assertThisInitialized(this):Super;return Super}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(o$jscomp$0){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o$jscomp$0)}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}Object.defineProperty(exports,
"__esModule",{value:!0});exports["default"]=void 0;var _react=function(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!==typeof obj)return{"default":obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor,key;for(key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,
key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj["default"]=obj;cache&&cache.set(obj,newObj);return newObj}(require("module$node_modules$react$index")),_utils=require("module$node_modules$react_player$lib$utils"),_patterns=require("module$node_modules$react_player$lib$patterns");require=(global="undefined"!==typeof navigator)&&"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;var IS_IOS=global&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||
require)&&!window.MSStream,IS_SAFARI=global&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!window.MSStream,MATCH_DROPBOX_URL=/www\.dropbox\.com\/.+/,MATCH_CLOUDFLARE_STREAM=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/;global=function(_Component){function FilePlayer(){if(!(this instanceof FilePlayer))throw new TypeError("Cannot call a class as a function");for(var _len=arguments.length,_args=Array(_len),_key=0;_key<_len;_key++)_args[_key]=arguments[_key];var _this=_super.call.apply(_super,
[this].concat(_args));_defineProperty(_assertThisInitialized(_this),"onReady",function(){var _this$props;return(_this$props=_this.props).onReady.apply(_this$props,arguments)});_defineProperty(_assertThisInitialized(_this),"onPlay",function(){var _this$props2;return(_this$props2=_this.props).onPlay.apply(_this$props2,arguments)});_defineProperty(_assertThisInitialized(_this),"onBuffer",function(){var _this$props3;return(_this$props3=_this.props).onBuffer.apply(_this$props3,arguments)});_defineProperty(_assertThisInitialized(_this),
"onBufferEnd",function(){var _this$props4;return(_this$props4=_this.props).onBufferEnd.apply(_this$props4,arguments)});_defineProperty(_assertThisInitialized(_this),"onPause",function(){var _this$props5;return(_this$props5=_this.props).onPause.apply(_this$props5,arguments)});_defineProperty(_assertThisInitialized(_this),"onEnded",function(){var _this$props6;return(_this$props6=_this.props).onEnded.apply(_this$props6,arguments)});_defineProperty(_assertThisInitialized(_this),"onError",function(){var _this$props7;
return(_this$props7=_this.props).onError.apply(_this$props7,arguments)});_defineProperty(_assertThisInitialized(_this),"onPlayBackRateChange",function(event){return _this.props.onPlaybackRateChange(event.target.playbackRate)});_defineProperty(_assertThisInitialized(_this),"onEnablePIP",function(){var _this$props8;return(_this$props8=_this.props).onEnablePIP.apply(_this$props8,arguments)});_defineProperty(_assertThisInitialized(_this),"onDisablePIP",function(e){var _this$props9=_this.props,onDisablePIP=
_this$props9.onDisablePIP;_this$props9=_this$props9.playing;onDisablePIP(e);_this$props9&&_this.play()});_defineProperty(_assertThisInitialized(_this),"onPresentationModeChange",function(e){if(_this.player&&(0,_utils.supportsWebKitPresentationMode)(_this.player)){var webkitPresentationMode=_this.player.webkitPresentationMode;if("picture-in-picture"===webkitPresentationMode)_this.onEnablePIP(e);else if("inline"===webkitPresentationMode)_this.onDisablePIP(e)}});_defineProperty(_assertThisInitialized(_this),
"onSeek",function(e){_this.props.onSeek(e.target.currentTime)});_defineProperty(_assertThisInitialized(_this),"mute",function(){_this.player.muted=!0});_defineProperty(_assertThisInitialized(_this),"unmute",function(){_this.player.muted=!1});_defineProperty(_assertThisInitialized(_this),"renderSourceElement",function(source,index){return"string"===typeof source?_react["default"].createElement("source",{key:index,src:source}):_react["default"].createElement("source",_extends({key:index},source))});
_defineProperty(_assertThisInitialized(_this),"renderTrack",function(track,index){return _react["default"].createElement("track",_extends({key:index},track))});_defineProperty(_assertThisInitialized(_this),"ref",function(player){_this.player&&(_this.prevPlayer=_this.player);_this.player=player});return _this}_inherits(FilePlayer,_Component);var _super=_createSuper(FilePlayer);_createClass(FilePlayer,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this);this.addListeners(this.player);
this.player.src=this.getSource(this.props.url);IS_IOS&&this.player.load()}},{key:"componentDidUpdate",value:function(prevProps){this.shouldUseAudio(this.props)!==this.shouldUseAudio(prevProps)&&(this.removeListeners(this.prevPlayer,prevProps.url),this.addListeners(this.player));this.props.url===prevProps.url||(0,_utils.isMediaStream)(this.props.url)||(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.src="";this.removeListeners(this.player);this.hls&&this.hls.destroy()}},
{key:"addListeners",value:function(player){var _this$props10=this.props,url=_this$props10.url;_this$props10=_this$props10.playsinline;player.addEventListener("play",this.onPlay);player.addEventListener("waiting",this.onBuffer);player.addEventListener("playing",this.onBufferEnd);player.addEventListener("pause",this.onPause);player.addEventListener("seeked",this.onSeek);player.addEventListener("ended",this.onEnded);player.addEventListener("error",this.onError);player.addEventListener("ratechange",this.onPlayBackRateChange);
player.addEventListener("enterpictureinpicture",this.onEnablePIP);player.addEventListener("leavepictureinpicture",this.onDisablePIP);player.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange);this.shouldUseHLS(url)||player.addEventListener("canplay",this.onReady);_this$props10&&(player.setAttribute("playsinline",""),player.setAttribute("webkit-playsinline",""),player.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(player,url){player.removeEventListener("canplay",
this.onReady);player.removeEventListener("play",this.onPlay);player.removeEventListener("waiting",this.onBuffer);player.removeEventListener("playing",this.onBufferEnd);player.removeEventListener("pause",this.onPause);player.removeEventListener("seeked",this.onSeek);player.removeEventListener("ended",this.onEnded);player.removeEventListener("error",this.onError);player.removeEventListener("ratechange",this.onPlayBackRateChange);player.removeEventListener("enterpictureinpicture",this.onEnablePIP);player.removeEventListener("leavepictureinpicture",
this.onDisablePIP);player.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange);this.shouldUseHLS(url)||player.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(props){return props.config.forceVideo||props.config.attributes.poster?!1:_patterns.AUDIO_EXTENSIONS.test(props.url)||props.config.forceAudio}},{key:"shouldUseHLS",value:function(url){return this.props.config.forceHLS||IS_SAFARI&&this.props.config.forceSafariHLS?!0:IS_IOS?!1:_patterns.HLS_EXTENSIONS.test(url)||
MATCH_CLOUDFLARE_STREAM.test(url)}},{key:"shouldUseDASH",value:function(url){return _patterns.DASH_EXTENSIONS.test(url)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(url){return _patterns.FLV_EXTENSIONS.test(url)||this.props.config.forceFLV}},{key:"load",value:function(url){var _this2=this,_this$props$config=this.props.config,hlsVersion=_this$props$config.hlsVersion,hlsOptions=_this$props$config.hlsOptions,dashVersion=_this$props$config.dashVersion;_this$props$config=_this$props$config.flvVersion;
this.hls&&this.hls.destroy();this.dash&&this.dash.reset();this.shouldUseHLS(url)&&(0,_utils.getSDK)("https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js".replace("VERSION",hlsVersion),"Hls").then(function(Hls){_this2.hls=new Hls(hlsOptions);_this2.hls.on(Hls.Events.MANIFEST_PARSED,function(){_this2.props.onReady()});_this2.hls.on(Hls.Events.ERROR,function(e,data){_this2.props.onError(e,data,_this2.hls,Hls)});if(MATCH_CLOUDFLARE_STREAM.test(url)){var id=url.match(MATCH_CLOUDFLARE_STREAM)[1];
_this2.hls.loadSource("https://videodelivery.net/{id}/manifest/video.m3u8".replace("{id}",id))}else _this2.hls.loadSource(url);_this2.hls.attachMedia(_this2.player);_this2.props.onLoaded()});this.shouldUseDASH(url)&&(0,_utils.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",dashVersion),"dashjs").then(function(dashjs){_this2.dash=dashjs.MediaPlayer().create();_this2.dash.initialize(_this2.player,url,_this2.props.playing);_this2.dash.on("error",_this2.props.onError);
3>parseInt(dashVersion)?_this2.dash.getDebug().setLogToBrowserConsole(!1):_this2.dash.updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE}});_this2.props.onLoaded()});this.shouldUseFLV(url)&&(0,_utils.getSDK)("https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js".replace("VERSION",_this$props$config),"flvjs").then(function(flvjs){_this2.flv=flvjs.createPlayer({type:"flv",url});_this2.flv.attachMediaElement(_this2.player);_this2.flv.on(flvjs.Events.ERROR,function(e,data){_this2.props.onError(e,
data,_this2.flv,flvjs)});_this2.flv.load();_this2.props.onLoaded()});if(url instanceof Array)this.player.load();else if((0,_utils.isMediaStream)(url))try{this.player.srcObject=url}catch(e){this.player.src=window.URL.createObjectURL(url)}}},{key:"play",value:function(){var promise=this.player.play();if(promise)promise["catch"](this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src");this.dash&&this.dash.reset()}},{key:"seekTo",
value:function(seconds){this.player.currentTime=seconds}},{key:"setVolume",value:function(fraction){this.player.volume=fraction}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,_utils.supportsWebKitPresentationMode)(this.player)&&"picture-in-picture"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&
document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,_utils.supportsWebKitPresentationMode)(this.player)&&"inline"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(rate){try{this.player.playbackRate=rate}catch(error){this.props.onError(error)}}},{key:"getDuration",value:function(){if(!this.player)return null;var _this$player=this.player,duration=_this$player.duration;_this$player=_this$player.seekable;
return Infinity===duration&&0<_this$player.length?_this$player.end(_this$player.length-1):duration}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var buffered=this.player.buffered;if(0===buffered.length)return 0;buffered=buffered.end(buffered.length-1);var duration=this.getDuration();return buffered>duration?duration:buffered}},{key:"getSource",value:function(url){var useHLS=this.shouldUseHLS(url),
useDASH=this.shouldUseDASH(url),useFLV=this.shouldUseFLV(url);if(!(url instanceof Array||(0,_utils.isMediaStream)(url)||useHLS||useDASH||useFLV))return MATCH_DROPBOX_URL.test(url)?url.replace("www.dropbox.com","dl.dropboxusercontent.com"):url}},{key:"render",value:function(){var _this$props11=this.props,url=_this$props11.url,playing=_this$props11.playing,loop=_this$props11.loop,controls=_this$props11.controls,muted=_this$props11.muted,config=_this$props11.config,width=_this$props11.width,height=_this$props11.height;
_this$props11=this.shouldUseAudio(this.props);width={width:"auto"===width?width:"100%",height:"auto"===height?height:"100%"};return _react["default"].createElement(_this$props11?"audio":"video",_extends({ref:this.ref,src:this.getSource(url),style:width,preload:"auto",autoPlay:playing||void 0,controls,muted,loop},config.attributes),url instanceof Array&&url.map(this.renderSourceElement),config.tracks.map(this.renderTrack))}}]);return FilePlayer}(_react.Component);exports["default"]=global;_defineProperty(global,
"displayName","FilePlayer");_defineProperty(global,"canPlay",_patterns.canPlay.file)}
//# sourceMappingURL=module$node_modules$react_player$lib$players$FilePlayer.js.map
