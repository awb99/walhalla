{
"version":3,
"file":"module$node_modules$codemirror$addon$edit$closebrackets.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/codemirror/addon/edit/closebrackets.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$codemirror$addon$edit$closebrackets\"] = function(global,require,module,exports) {\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    closeBefore: \")]}'\\\":;>\",\n    triples: \"\",\n    explode: \"[]{}\"\n  };\n\n  var Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption(\"autoCloseBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      ensureBound(getOption(val, \"pairs\"))\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == \"pairs\" && typeof conf == \"string\") return conf;\n    if (typeof conf == \"object\" && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var keyMap = {Backspace: handleBackspace, Enter: handleEnter};\n  function ensureBound(chars) {\n    for (var i = 0; i < chars.length; i++) {\n      var ch = chars.charAt(i), key = \"'\" + ch + \"'\"\n      if (!keyMap[key]) keyMap[key] = handler(ch)\n    }\n  }\n  ensureBound(defaults.pairs + \"`\")\n\n  function handler(ch) {\n    return function(cm) { return handleChar(cm, ch); };\n  }\n\n  function getConfig(cm) {\n    var deflt = cm.state.closeBrackets;\n    if (!deflt || deflt.override) return deflt;\n    var mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var cur = ranges[i].head;\n      cm.replaceRange(\"\", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), \"+delete\");\n    }\n  }\n\n  function handleEnter(cm) {\n    var conf = getConfig(cm);\n    var explode = conf && getOption(conf, \"explode\");\n    if (!explode || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(function() {\n      var linesep = cm.lineSeparator() || \"\\n\";\n      cm.replaceSelection(linesep + linesep, null);\n      moveSel(cm, -1)\n      ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function moveSel(cm, dir) {\n    var newRanges = [], ranges = cm.listSelections(), primary = 0\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i]\n      if (range.head == cm.getCursor()) primary = i\n      var pos = range.head.ch || dir > 0 ? {line: range.head.line, ch: range.head.ch + dir} : {line: range.head.line - 1}\n      newRanges.push({anchor: pos, head: pos})\n    }\n    cm.setSelections(newRanges, primary)\n  }\n\n  function contractSelection(sel) {\n    var inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n            head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))};\n  }\n\n  function handleChar(cm, ch) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n\n    var closeBefore = getOption(conf,\"closeBefore\");\n\n    var triples = getOption(conf, \"triples\");\n\n    var identical = pairs.charAt(pos + 1) == ch;\n    var ranges = cm.listSelections();\n    var opening = pos % 2 == 0;\n\n    var type;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], cur = range.head, curType;\n      var next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = \"surround\";\n      } else if ((identical || !opening) && next == ch) {\n        if (identical && stringStartsAfter(cm, cur))\n          curType = \"both\";\n        else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch)\n          curType = \"skipThree\";\n        else\n          curType = \"skip\";\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 &&\n                 cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch) {\n        if (cur.ch > 2 && /\\bstring/.test(cm.getTokenTypeAt(Pos(cur.line, cur.ch - 2)))) return CodeMirror.Pass;\n        curType = \"addFour\";\n      } else if (identical) {\n        var prev = cur.ch == 0 ? \" \" : cm.getRange(Pos(cur.line, cur.ch - 1), cur)\n        if (!CodeMirror.isWordChar(next) && prev != ch && !CodeMirror.isWordChar(prev)) curType = \"both\";\n        else return CodeMirror.Pass;\n      } else if (opening && (next.length === 0 || /\\s/.test(next) || closeBefore.indexOf(next) > -1)) {\n        curType = \"both\";\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    var left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    var right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(function() {\n      if (type == \"skip\") {\n        moveSel(cm, 1)\n      } else if (type == \"skipThree\") {\n        moveSel(cm, 3)\n      } else if (type == \"surround\") {\n        var sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = left + sels[i] + right;\n        cm.replaceSelections(sels, \"around\");\n        sels = cm.listSelections().slice();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = contractSelection(sels[i]);\n        cm.setSelections(sels);\n      } else if (type == \"both\") {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        moveSel(cm, -1)\n      } else if (type == \"addFour\") {\n        cm.replaceSelection(left + left + left + left, \"before\");\n        moveSel(cm, 1)\n      }\n    });\n  }\n\n  function charsAround(cm, pos) {\n    var str = cm.getRange(Pos(pos.line, pos.ch - 1),\n                          Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  function stringStartsAfter(cm, pos) {\n    var token = cm.getTokenAt(Pos(pos.line, pos.ch + 1))\n    return /\\bstring/.test(token.type) && token.start == pos.ch &&\n      (pos.ch == 0 || !/\\bstring/.test(cm.getTokenTypeAt(pos)))\n  }\n});\n\n};"],
"names":["shadow$provide","global","require","module","exports","mod","define","amd","CodeMirror","getOption","conf","name","defaults","ensureBound","chars","i","length","ch","charAt","key","keyMap","handler","cm","handleChar","getConfig","deflt","state","closeBrackets","override","getModeAt","mode","getCursor","moveSel","dir","newRanges","ranges","listSelections","primary","range","head","pos","line","push","anchor","setSelections","Pass","pairs","indexOf","closeBefore","triples","identical","opening","type","cur","next","getRange","Pos","empty","curType","test","getTokenTypeAt","prev","isWordChar","stringStartsAfter","left","right","operation","sels","getSelections","replaceSelections","slice","inverted","cmpPos","sel","replaceSelection","triggerElectric","charsAround","str","token","getTokenAt","start","explode","defineOption","val","old","Init","removeKeyMap","addKeyMap","Backspace","handleBackspace","around","replaceRange","Enter","handleEnter","linesep","lineSeparator","indentLine"]
}
