{"version":3,"sources":["goldly/run/app.cljs"],"mappings":"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","names":["goldly.run.app/goldly-start","static?","taoensso.timbre._log_BANG_","taoensso.timbre/*config*","cljs.core/Delay","goldly.run.app.goog$module$shadow$loader.init","cljs.core/reset!","webly.build.lazy/on-load","goldly.run.lazy-ext-css/goldly-on-load","re-frame.core/dispatch","c__41247__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__41248__auto__","switch__41224__auto__","state_54747","state_val_54748","inst_54739","cljs.core.async.impl.ioc-helpers/take!","inst_54741","inst_54742","cljs.core/PersistentVector","inst_54743","inst_54744","inst_54745","statearr-54749","cljs.core.async.impl.ioc-helpers/return-chan","statearr-54750","state-machine__41225__auto__","ret-value__41226__auto__","result__41227__auto__","cljs.core/keyword-identical?","ex__41228__auto__","e54751","statearr-54752","cljs.core/seq","statearr-54753","cljs.core/first","state__41249__auto__","statearr-54754","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","goldly.cljs.loader/load-cljs","re_frame.core.reg_event_db","db","_","or__5045__auto__","goldly.offline.old/static?","cljs.core/assoc-in","re_frame.core.reg_event_fx","p__54755","vec__54756","cljs.core.nth","cofx","new-state-map"],"sourcesContent":["(ns goldly.run.app\n  (:require\n   [re-frame.core :as rf]\n   [taoensso.timbre :as timbre :refer-macros [trace debug debugf info infof warn error]]\n   [cljs.core.async :refer [>! <! chan close! put! timeout] :refer-macros [go]]\n   [webly.build.prefs :refer-macros [pref]]\n   [webly.build.lazy :as webly-lazy]\n   [goldly.offline.old :refer [static?]]\n   [goldly.sci.kernel-cljs]\n   [goldly.run.lazy-ext-css :as lazy-ext-css]\n   [goldly.cljs.loader :refer [load-cljs]]\n   [goldly.service.core]\n   ; [goldly.offline.app] ; testing only!!!\n   [shadow.loader :as l]))\n\n(defn goldly-start [static?]\n  (info \"goldly starting .. static?: \" static?)\n   ;(goldly.offline.app/patch-path) ; testing only\n  (l/init \"\") ; prefix to the path loader\n  (reset! webly-lazy/on-load lazy-ext-css/goldly-on-load)\n  (rf/dispatch [:ga/event {:category \"goldly\" :action \"started\" :label 77 :value 13}])\n  (go (<! (load-cljs static?)) ; await for cljs auto-load to be finised before showing ui.\n      (rf/dispatch [:webly/status :running])))\n\n(rf/reg-event-db\n :goldly/init\n (fn [db _]\n   (warn \"goldly.init..\")\n   (let [db (or db {})\n         static? (static?)]\n     (when static?\n       (error \"goldly.static.mode: \" static?)\n       (goldly-start static?))\n     (-> db\n         (assoc-in [:pref] (pref))))))\n\n(rf/reg-event-fx\n :ws/open-first\n (fn [cofx [_ new-state-map]]\n   (infof \"websocket successfully established!: %s\" new-state-map)\n   (goldly-start false)\n   ;(goldly-start true) ; testing as a static\n   nil))\n"]}