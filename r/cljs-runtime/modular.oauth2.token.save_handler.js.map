{"version":3,"sources":["modular/oauth2/token/save_handler.cljs"],"mappings":";AAMA,yDAAA,zDAACA,sJAEA,aAAAC,FAAKG;AAAL,AAAA,IAAAF,aAAAD;YAAA,AAAAE,4CAAAD,WAAA,IAAA,nEAAQE;eAAR,AAAAD,4CAAAD,WAAA,IAAA,tEAAUG;AAAV,AACE,AAAAC,0DAAAC,mCAAA,qDAAA,oCAAA,KAAA,GAAA,8CAAA,qDAAA,KAAAC,gBAAA;AAAA,AAAA,0FAAA,yCAA+CH;GAA/C,OAAA,KAAA,KAAA;;AADF;;AAID,yDAAA,zDAACL,oJAEA,aAAAS,FAAKL;AAAL,AAAA,IAAAM,aAAAD;YAAA,AAAAN,4CAAAO,WAAA,IAAA,nEAAQN;eAAR,AAAAD,4CAAAO,WAAA,IAAA,tEAAUL;AAAV,AACE,AAAAC,0DAAAC,mCAAA,uDAAA,oCAAA,KAAA,GAAA,8CAAA,qDAAA,KAAAC,gBAAA;AAAA,AAAA,0FAAA,wCAA+CH;GAA/C,OAAA,KAAA,KAAA;;AADF;;AAID,yDAAA,zDAACL,uIAEA,WAAAW,SAAAC;AAAA,AAAA,IAAAC,aAAAF;IAAAE,iBAAA,AAAAC,4BAAAD;SAAA,AAAAE,4CAAAF,eAAA,hEAAaI;IAAbD,aAAAJ;QAAA,AAAAT,4CAAAa,WAAA,IAAA,/DAAmBZ;eAAnB,AAAAD,4CAAAa,WAAA,IAAA,tEAAqBX;YAArB,AAAAF,4CAAAa,WAAA,IAAA,nEAA8BE;AAA9B,AACE,AAAAZ,0DAAAC,mCAAA,qDAAA,oCAAA,KAAA,GAAA,8CAAA,qDAAA,KAAAC,gBAAA;AAAA,AAAA,0FAAA,sCAAA,TAAmCH;GAAnC,OAAA,KAAA,KAAA;;AADF,kDAAA,iEAAA,2CAAA,uDAAA,oDAAA,mDAAA,yBAAA,wDAAA,2CAAA,sEAAA,sEAAA,4OAAA,2DAAA,OAAA,gQAAA,iEAAA,mFAAA,qGAAA,gEAAA,mFAAA,zgCAImCA,iEACHa,wEACR,CAACC,iEAAAA,mEAAAA,0LAEQ,CAACC,kEAAAA,oEAAAA","names":["re_frame.core.reg_event_fx","p__39880","vec__39881","cljs.core.nth","_","provider","taoensso.timbre._log_BANG_","taoensso.timbre/*config*","cljs.core/Delay","p__39884","vec__39885","p__39891","p__39892","map__39893","cljs.core/--destructure-map","cljs.core.get","vec__39894","db","token","ajax.core/transit-request-format","ajax.core/transit-response-format"],"sourcesContent":["(ns modular.oauth2.token.save-handler\n  (:require\n   [taoensso.timbre :refer-macros [info error]]\n   [re-frame.core :as rf]\n   [ajax.core :as ajax]))\n\n(rf/reg-event-fx\n :oauth2/save-result-success\n (fn [_ [_ provider]]\n   (info \"server token save success for provider\" provider)\n   nil))\n\n(rf/reg-event-fx\n :oauth2/save-result-error\n (fn [_ [_ provider]]\n   (error \"server token save error  for provider\" provider)\n   nil))\n\n(rf/reg-event-fx\n :oauth2/save-server\n (fn [{:keys [db]} [_ provider token]]\n   (info \"saving token for provider \" provider \" on server\")\n   {:http-xhrio {:method          :post\n                 :uri            \"/api/oauth2/save-token\"\n                 :params {:provider provider\n                          :token token}\n                 :format (ajax/transit-request-format)\n                 :timeout         5000                     ;; optional see API docs\n                 :response-format (ajax/transit-response-format);; IMPORTANT!: You must provide this.\n                 :on-success      [:oauth2/save-result-success]\n                 :on-failure      [:oauth2/save-result-error]}}))"],"x_google_ignoreList":[0]}